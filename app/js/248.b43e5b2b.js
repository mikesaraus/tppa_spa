"use strict";(self["webpackChunktppa_app"]=self["webpackChunktppa_app"]||[]).push([[248],{5248:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Xe});var o=a(3673);const n=(0,o.Uk)(" Report "),s=(0,o.Uk)("Generate Transactions Report");function l(e,t,a,l,r,i){const c=(0,o.up)("q-icon"),u=(0,o.up)("q-item-label"),m=(0,o.up)("q-item-section"),p=(0,o.up)("q-item"),h=(0,o.up)("ReportCalendar"),d=(0,o.up)("q-list"),_=(0,o.up)("q-card"),f=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(f,{class:"flex full-width full-height"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{flat:"",class:"full-width row justify-center items-start q-pb-xl q-pt-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"col full-width q-gutter-y-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{class:"col text-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"text-h4 text-primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{size:"lg",color:"primary",name:"archive"}),n])),_:1}),(0,o.Wm)(u,{caption:""},{default:(0,o.w5)((()=>[s])),_:1})])),_:1})])),_:1}),(0,o.Wm)(p,{class:"flex flex-center text-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{style:{"max-width":"95%",width:"500px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(h)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var r=a(2323);const i={class:"col full-width"},c={class:"row items-center justify-end q-gutter-x-sm"},u=(0,o.Uk)(" Clear all selected dates "),m=(0,o._)("br",null,null,-1),p=(0,o.Uk)(" Tip: When no date selected it will return all transactions. "),h=(0,o.Uk)("Report Settings"),d={key:0},_=(0,o.Uk)("Users"),f=(0,o.Uk)("Select User"),b=(0,o.Uk)("All Users"),w=(0,o.Uk)("Select Branch"),$=(0,o.Uk)("All Branch"),T=(0,o.Uk)("Cash Denomination"),y=(0,o.Uk)("Report Settings"),N={class:"row items-center no-wrap"},g=(0,o._)("div",{class:"text-center"},"Generate",-1),C=(0,o.Uk)("Machine Readable"),A=(0,o.Uk)(".txt"),k=(0,o.Uk)("Human Readable"),O=(0,o.Uk)(".rpt"),D={key:0},E=(0,o.Uk)(" Custom "),W=(0,o.Uk)("Per User"),v=(0,o.Uk)(" Readable "),R=(0,o.Uk)(".rpt"),S=(0,o.Uk)(" Report categories per-user "),L=(0,o.Uk)("User Per Branch"),M=(0,o.Uk)(" Readable "),Y=(0,o.Uk)(".rpt"),U=(0,o.Uk)(" Report per-user per-branch if user has multiple branch location "),x=(0,o.Uk)("Download All"),I=(0,o.Uk)("All available reports");function Z(e,t,a,n,s,l){const Z=(0,o.up)("q-icon"),P=(0,o.up)("q-badge"),H=(0,o.up)("q-tooltip"),q=(0,o.up)("q-btn"),j=(0,o.up)("q-item-label"),B=(0,o.up)("q-item-section"),Q=(0,o.up)("q-item"),F=(0,o.up)("q-separator"),z=(0,o.up)("q-list"),K=(0,o.up)("q-menu"),V=(0,o.up)("q-avatar"),G=(0,o.up)("q-btn-dropdown"),J=(0,o.up)("q-btn-group"),X=(0,o.up)("q-date"),ee=(0,o.up)("CashDenominationForm"),te=(0,o.up)("q-dialog"),ae=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(ae,{flat:""},{default:(0,o.w5)((()=>[(0,o.Wm)(z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Q,{class:"text-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{class:"row justify-center items-center"},{default:(0,o.w5)((()=>[(0,o._)("div",i,[(0,o.Wm)(X,{range:"",multiple:"","today-btn":"",color:"primary","years-in-month-view":"",events:e.cal_events,modelValue:e.trans_days,"onUpdate:modelValue":t[12]||(t[12]=t=>e.trans_days=t),"event-color":"primary",landscape:e.$q.screen.gt.sm,style:(0,r.j5)([{height:"500px","border-radius":"15px"},`width: ${e.$q.screen.gt.md?"50":e.$q.screen.gt.sm?"70":"100"}%`]),options:t=>t<=e.date.formatDate(new Date,"YYYY/MM/DD"),"navigation-min-year-month":e.nmin_ym,"navigation-max-year-month":e.nmax_ym},{default:(0,o.w5)((()=>[(0,o._)("div",c,[(0,o.Wm)(q,{flat:"",round:"",icon:"clear_all",color:"grey-6 hover-text-primary",onClick:t[0]||(t[0]=t=>e.trans_days=[])},{default:(0,o.w5)((()=>[(0,o.Wm)(H,{offset:[10,10],self:"center end",anchor:"center start",class:"bg-transparent text-right"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(P,{class:"text-body2",color:"accent"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{name:"highlight_off",size:"xs"}),u])),_:1}),m,(0,o.Wm)(P,{rounded:"",class:"shadow-3 text-caption",color:"primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{name:"info",size:"xs"}),p])),_:1})])])),_:1})])),_:1}),(0,o.Wm)(q,{flat:"",round:"",size:"md",color:"grey-6",icon:"settings"},{default:(0,o.w5)((()=>[(0,o.Wm)(K,{modelValue:e.custom_view_show,"onUpdate:modelValue":t[6]||(t[6]=t=>e.custom_view_show=t),"transition-duration":250,"transition-show":"jump-down","transition-hide":"jump-up",class:"text-grey-9"},{default:(0,o.w5)((()=>[(0,o.Wm)(z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(j,{header:""},{default:(0,o.w5)((()=>[h])),_:1}),e.$root.isTeller?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",d,[(0,o.Wm)(Q,{clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{color:"primary",name:e.user_filter.length?"indeterminate_check_box":"check_box"},null,8,["name"])])),_:1}),(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[_])),_:1})])),_:1}),(0,o.Wm)(K,{modelValue:e.custom_view_user_show,"onUpdate:modelValue":t[2]||(t[2]=t=>e.custom_view_user_show=t),anchor:"top end",self:"top start",class:"text-grey-9",style:{"min-width":"175px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(j,{header:""},{default:(0,o.w5)((()=>[f])),_:1}),(0,o.Wm)(Q,{clickable:"",onClick:t[1]||(t[1]=t=>e.user_filter=[])},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{color:e.user_filter.length?e.$root.app_settings.darkmode?"grey-8":"grey-5":"primary",name:e.user_filter.length?"check_box_outline_blank":"check_box"},null,8,["color","name"])])),_:1}),(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[b])),_:1})])),_:1})])),_:1}),(0,o.Wm)(F,{inset:"item",style:{opacity:"0.25"},color:"grey-6"}),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(2==e.$root.accessLevel?e.branchmates:Object.keys(e.users),((t,a)=>((0,o.wg)(),(0,o.iD)("div",{key:t},[(0,o.Wm)(Q,{clickable:"",onClick:()=>{e.user_filter.indexOf(t)>=0?e.user_filter.splice(e.user_filter.indexOf(t),1):e.user_filter.push(t)}},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{color:e.user_filter.includes(t)?"primary":e.$root.app_settings.darkmode?"grey-8":"grey-5",name:e.user_filter.includes(t)?"check_box":"check_box_outline_blank"},null,8,["color","name"])])),_:2},1024),(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[(0,o.Uk)("#"+(0,r.zw)(t),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),a+1<(2==e.$root.accessLevel?e.branchmates.length:Object.keys(e.users).length)?((0,o.wg)(),(0,o.j4)(F,{key:0,inset:"item",style:{opacity:"0.25"},color:"grey-6"})):(0,o.kq)("",!0)])))),128))])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(F,{inset:"item",style:{opacity:"0.25"},color:"grey-6"}),(0,o.Wm)(Q,{clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{color:e.$root.isLogin&&e.$root.accessLevel<2?"primary":e.$root.app_settings.darkmode?"grey-8":"grey-5",name:e.branch_filter.length?"indeterminate_check_box":"check_box"},null,8,["color","name"])])),_:1}),(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.$root.isLogin&&e.$root.accessLevel>1?"This Branch":"Branches"),1)])),_:1}),e.$root.isLogin&&e.$root.accessLevel>1?((0,o.wg)(),(0,o.j4)(H,{key:0,anchor:"center right",self:"center left"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.getObj(e.authenticated,"data.branch_location")),1)])),_:1})):(0,o.kq)("",!0)])),_:1}),e.$root.isLogin&&e.$root.accessLevel<2?((0,o.wg)(),(0,o.j4)(K,{key:0,modelValue:e.custom_view_branch_show,"onUpdate:modelValue":t[4]||(t[4]=t=>e.custom_view_branch_show=t),anchor:"top end",self:"top start",class:"text-grey-9",style:{"min-width":"175px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(j,{header:""},{default:(0,o.w5)((()=>[w])),_:1}),(0,o.Wm)(Q,{clickable:"",onClick:t[3]||(t[3]=t=>e.branch_filter=[])},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{color:e.branch_filter.length?e.$root.app_settings.darkmode?"grey-8":"grey-5":"primary",name:e.branch_filter.length?"check_box_outline_blank":"check_box"},null,8,["color","name"])])),_:1}),(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[$])),_:1})])),_:1})])),_:1}),(0,o.Wm)(F,{inset:"item",style:{opacity:"0.25"},color:"grey-6"}),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.branches,((t,a)=>((0,o.wg)(),(0,o.iD)("div",{key:t},[(0,o.Wm)(Q,{clickable:"",onClick:()=>{e.branch_filter.indexOf(t)>=0?e.branch_filter.splice(e.branch_filter.indexOf(t),1):e.branch_filter.push(t)}},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{color:e.branch_filter.includes(t)?"primary":e.$root.app_settings.darkmode?"grey-8":"grey-5",name:e.branch_filter.includes(t)?"check_box":"check_box_outline_blank"},null,8,["color","name"])])),_:2},1024),(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(t),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),a+1<e.branches.length?((0,o.wg)(),(0,o.j4)(F,{key:0,inset:"item",style:{opacity:"0.25"},color:"grey-6"})):(0,o.kq)("",!0)])))),128))])),_:1})])),_:1},8,["modelValue"])):(0,o.kq)("",!0)])),_:1})])),(0,o.Wm)(F,{inset:"item",style:{opacity:"0.25"},color:"grey-6"}),(0,o.Wm)(Q,{clickable:"",onClick:t[5]||(t[5]=t=>e.with_denomination=!e.with_denomination)},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{name:"view_stream",color:e.with_denomination?"primary":e.$root.app_settings.darkmode?"grey-8":"grey-5"},null,8,["color"])])),_:1}),(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[T])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(H,null,{default:(0,o.w5)((()=>[y])),_:1})])),_:1}),(0,o.Wm)(J,{rounded:"",unelevated:"",push:""},{default:(0,o.w5)((()=>[(0,o.Wm)(G,{split:"",rounded:"","auto-close":"",unelevated:"",color:"primary",disable:e.processing,onClick:e.fetchReport},{label:(0,o.w5)((()=>[(0,o._)("div",N,[(0,o.Wm)(Z,{left:"",name:"archive"}),g])])),default:(0,o.w5)((()=>[(0,o.Wm)(z,{padding:"",style:{width:"250px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(Q,{clickable:"",onClick:t[7]||(t[7]=t=>e.fetchReport(t,"systxt"))},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{icon:"point_of_sale",color:"accent","text-color":"white"})])),_:1}),(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[C])),_:1}),(0,o.Wm)(j,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(`Report for ${e.distribution_comp}`),1)])),_:1})])),_:1}),(0,o.Wm)(B,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(P,null,{default:(0,o.w5)((()=>[A])),_:1})])),_:1})])),_:1}),(0,o.Wm)(Q,{clickable:"",onClick:t[8]||(t[8]=t=>e.fetchReport(t,"rpt"))},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{icon:"engineering",color:"accent","text-color":"white"})])),_:1}),(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[k])),_:1}),(0,o.Wm)(j,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(`For ${e.company.name_short}`),1)])),_:1})])),_:1}),(0,o.Wm)(B,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(P,null,{default:(0,o.w5)((()=>[O])),_:1})])),_:1})])),_:1}),e.$root.isTeller?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",D,[(0,o.Wm)(F,{inset:"",class:"q-mt-sm"}),(0,o.Wm)(j,{header:"",class:"q-pb-xs"},{default:(0,o.w5)((()=>[E])),_:1}),(0,o.Wm)(Q,{clickable:"",onClick:t[9]||(t[9]=t=>e.fetchReport(t,"user_rpt"))},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{icon:"groups",color:"teal","text-color":"white"})])),_:1}),(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[W])),_:1}),(0,o.Wm)(j,{caption:""},{default:(0,o.w5)((()=>[v,(0,o.Wm)(P,null,{default:(0,o.w5)((()=>[R])),_:1})])),_:1})])),_:1}),(0,o.Wm)(B,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{name:"info",color:"amber"},{default:(0,o.w5)((()=>[(0,o.Wm)(H,null,{default:(0,o.w5)((()=>[S])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(Q,{clickable:"",onClick:t[10]||(t[10]=t=>e.fetchReport(t,"user_branch_rpt"))},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{icon:"privacy_tip",color:"teal","text-color":"white"})])),_:1}),(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[L])),_:1}),(0,o.Wm)(j,{caption:""},{default:(0,o.w5)((()=>[M,(0,o.Wm)(P,null,{default:(0,o.w5)((()=>[Y])),_:1})])),_:1})])),_:1}),(0,o.Wm)(B,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{name:"info",color:"amber"},{default:(0,o.w5)((()=>[(0,o.Wm)(H,null,{default:(0,o.w5)((()=>[U])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(F,{inset:"",class:"q-mt-sm q-mb-sm"}),(0,o.Wm)(Q,{clickable:"",onClick:t[11]||(t[11]=t=>e.fetchReport(t,"report_all"))},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{icon:"download_for_offline",color:"accent","text-color":"white"})])),_:1}),(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[x])),_:1}),(0,o.Wm)(j,{caption:""},{default:(0,o.w5)((()=>[(0,o.Wm)(P,{color:"accent"},{default:(0,o.w5)((()=>[I])),_:1})])),_:1})])),_:1})])),_:1})]))])),_:1})])),_:1},8,["disable","onClick"])])),_:1})])])),_:1},8,["events","modelValue","landscape","style","options","navigation-min-year-month","navigation-max-year-month"])])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(te,{modelValue:e.dialogCashSplit,"onUpdate:modelValue":t[15]||(t[15]=t=>e.dialogCashSplit=t),"transition-duration":100,"transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(ee,{cash_match:e.total_cash_collection,onSave:e.saveInputsMoney,onClose:t[13]||(t[13]=()=>{e.dialogCashSplit=!1}),onCancel:t[14]||(t[14]=()=>{e.dialogCashSplit=!1})},null,8,["cash_match","onSave"])])),_:1},8,["modelValue"])])),_:1})}a(6801),a(71);var P=a(5616),H=a(8825),q=a(2841),j=a(3317),B=a(3617),Q=a(6386),F=a(9063),z=a(8880);const K=(0,o.Uk)(" Cash Denomination "),V={class:"text-h6"},G=(0,o.Uk)(" Centavo "),J={class:"on-right"},X={class:"full-with"},ee=(0,o._)("div",{class:"text-h6 text-grey-6"},"C",-1),te={class:"text-caption"},ae={key:0},oe={class:"text-h6"},ne=(0,o.Uk)(" Peso "),se={class:"on-right"},le={class:"full-with"},re=(0,o._)("div",{class:"text-h6 text-grey-6"},"P",-1),ie={class:"text-caption"},ce={key:0},ue={class:"text-body2"},me=(0,o.Uk)(" TOTAL "),pe=(0,o.Uk)(" PHP "),he={key:0},de=(0,o.Uk)(" Difference "),_e=(0,o.Uk)(" PHP ");function fe(e,t,a,n,s,l){const i=(0,o.up)("q-btn"),c=(0,o.up)("q-toolbar-title"),u=(0,o.up)("q-toolbar"),m=(0,o.up)("q-icon"),p=(0,o.up)("q-space"),h=(0,o.up)("q-item-label"),d=(0,o.up)("q-tooltip"),_=(0,o.up)("q-input"),f=(0,o.up)("q-item-section"),b=(0,o.up)("q-item"),w=(0,o.up)("q-slide-transition"),$=(0,o.up)("q-list"),T=(0,o.up)("q-scroll-area"),y=(0,o.up)("q-form"),N=(0,o.up)("q-card");return e.formIsOk?((0,o.wg)(),(0,o.j4)(N,{key:0,style:{width:"500px","max-width":"80vw","border-radius":"15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"bg-primary text-white"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{flat:"",round:"",ripple:"","no-caps":"",size:"md",icon:"view_stream",onClick:e.icon_click},null,8,["onClick"]),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[K,(0,o._)("small",null,"(P "+(0,r.zw)(e.formatMoney(e.cash_match))+")",1)])),_:1})])),_:1}),(0,o.Wm)(y,{autofocus:"",onSubmit:e.doSave,ref:e.form_conf.ref},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{"thumb-style":e.$style.scrollarea.thumb,"bar-style":e.$style.scrollarea.bar,style:(0,r.j5)(`max-height: calc(100vh - 200px); height: calc(110px + (90px * ${(e.show_centavo?e.denominations.filter((e=>e<1)).length:0)+(e.show_peso?e.denominations.filter((e=>e>=1)).length:0)}))`)},{default:(0,o.w5)((()=>[(0,o.Wm)($,{class:"q-pt-md q-px-md q-gutter-y-xs"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{class:(0,r.C_)(["row items-center",e.$root.app_settings.darkmode?"text-grey-6":"text-grey-8"])},{default:(0,o.w5)((()=>[(0,o._)("span",V,[(0,o.Wm)(m,{name:"view_stream",size:"md",color:e.$root.app_settings.darkmode?"grey-9":"grey-3"},null,8,["color"]),G]),(0,o.Wm)(p),(0,o._)("span",J,[(0,o.Wm)(i,{flat:"",round:"",size:"md",color:"grey-6",icon:e.show_centavo?"visibility_off":"visibility",onClick:t[0]||(t[0]=t=>e.show_centavo=!e.show_centavo)},null,8,["icon"])])])),_:1},8,["class"]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.denominations.filter((e=>e<1)),(t=>((0,o.wg)(),(0,o.iD)("div",{key:t,class:"full-with"},[(0,o.Wm)(w,{duration:1e3,class:"full-with"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("div",X,[(0,o.Wm)(b,{class:"no-padding q-mx-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[e.local_inputs[t]?((0,o.wg)(),(0,o.j4)(_,{key:0,rounded:"",type:"number",standout:"bg-primary text-white",placeholder:e.genLabel(t),"input-class":`${e.form_conf.inputclass}`,modelValue:e.local_inputs[t].value,"onUpdate:modelValue":a=>e.local_inputs[t].value=a,rules:[t=>e.checker.input(!t||t&&Number(t)>=0&&!String(t).includes(".")||"",500)],onKeyup:e.modKey},{before:(0,o.w5)((()=>[ee])),prepend:(0,o.w5)((()=>[(0,o.Wm)(m,{size:"sm",name:"numbers"})])),append:(0,o.w5)((()=>[(0,o._)("div",te,[Number(e.local_inputs[t].value)>0?((0,o.wg)(),(0,o.iD)("span",ae,[(0,o.Uk)(" piece"+(0,r.zw)(Number(e.local_inputs[t].value)>1?"s":"")+" of ",1),(0,o._)("b",null,(0,r.zw)(t>=1?t+" Peso"+(t>1?"s":""):100*t+" Centavo"+(100*t>1?"s":"")),1)])):(0,o.kq)("",!0)])])),after:(0,o.w5)((()=>[(0,o.Wm)(i,{flat:"",round:"",size:"md",icon:"remove",onClick:a=>Number(e.local_inputs[t].value)>1?e.local_inputs[t].value=Number(e.local_inputs[t].value)-1:e.local_inputs[t].value=""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" -1 of "+(0,r.zw)(e.genLabel(t)),1)])),_:2},1024)])),_:2},1032,["onClick"]),(0,o.Wm)(i,{flat:"",round:"",size:"md",icon:"add",onClick:a=>e.local_inputs[t].value?e.local_inputs[t].value=Number(e.local_inputs[t].value)+1:e.local_inputs[t].value=1},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" +1 of "+(0,r.zw)(e.genLabel(t)),1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1032,["placeholder","input-class","modelValue","onUpdate:modelValue","rules","onKeyup"])):(0,o.kq)("",!0)])),_:2},1024)])),_:2},1024)],512),[[z.F8,e.show_centavo]])])),_:2},1024)])))),128)),(0,o.Wm)(h,{class:(0,r.C_)(["row items-center",e.$root.app_settings.darkmode?"text-grey-6":"text-grey-8"])},{default:(0,o.w5)((()=>[(0,o._)("span",oe,[(0,o.Wm)(m,{name:"view_stream",size:"md",color:e.$root.app_settings.darkmode?"grey-9":"grey-3"},null,8,["color"]),ne]),(0,o.Wm)(p),(0,o._)("span",se,[(0,o.Wm)(i,{flat:"",round:"",size:"md",color:"grey-6",icon:e.show_peso?"visibility_off":"visibility",onClick:t[1]||(t[1]=t=>e.show_peso=!e.show_peso)},null,8,["icon"])])])),_:1},8,["class"]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.denominations.filter((e=>e>=1)),((t,a)=>((0,o.wg)(),(0,o.iD)("div",{key:t,class:"full-with"},[(0,o.Wm)(w,{duration:1e3,class:"full-with"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("div",le,[(0,o.Wm)(b,{class:"no-padding q-mx-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[e.local_inputs[t]?((0,o.wg)(),(0,o.j4)(_,{key:0,rounded:"",type:"number",autofocus:0===a,standout:"bg-primary text-white",placeholder:e.genLabel(t),"input-class":`${e.form_conf.inputclass}`,modelValue:e.local_inputs[t].value,"onUpdate:modelValue":a=>e.local_inputs[t].value=a,rules:[t=>e.checker.input(!t||t&&Number(t)>=0&&!String(t).includes(".")||"",500)],onKeyup:e.modKey},{before:(0,o.w5)((()=>[re])),prepend:(0,o.w5)((()=>[(0,o.Wm)(m,{size:"sm",name:"numbers"})])),append:(0,o.w5)((()=>[(0,o._)("div",ie,[Number(e.local_inputs[t].value)>0?((0,o.wg)(),(0,o.iD)("span",ce,[(0,o.Uk)(" piece"+(0,r.zw)(Number(e.local_inputs[t].value)>1?"s":"")+" of ",1),(0,o._)("b",null,(0,r.zw)(t>=1?t+" Peso"+(t>1?"s":""):100*t+" Centavo"+(100*t>1?"s":"")),1)])):(0,o.kq)("",!0)])])),after:(0,o.w5)((()=>[(0,o.Wm)(i,{flat:"",round:"",size:"md",icon:"remove",onClick:a=>Number(e.local_inputs[t].value)>1?e.local_inputs[t].value=Number(e.local_inputs[t].value)-1:e.local_inputs[t].value=""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" -1 of "+(0,r.zw)(e.genLabel(t)),1)])),_:2},1024)])),_:2},1032,["onClick"]),(0,o.Wm)(i,{flat:"",round:"",size:"md",icon:"add",onClick:a=>e.local_inputs[t].value?e.local_inputs[t].value=Number(e.local_inputs[t].value)+1:e.local_inputs[t].value=1},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" +1 of "+(0,r.zw)(e.genLabel(t)),1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1032,["autofocus","placeholder","input-class","modelValue","onUpdate:modelValue","rules","onKeyup"])):(0,o.kq)("",!0)])),_:2},1024)])),_:2},1024)],512),[[z.F8,e.show_peso]])])),_:2},1024)])))),128))])),_:1})])),_:1},8,["thumb-style","bar-style","style"]),(0,o._)("div",{class:(0,r.C_)(["row q-gutter-x-sm items-center text-grey-6 q-pa-md",e.$root.app_settings.darkmode?"shadow-1-white":"shadow-1"])},[(0,o._)("div",ue,[me,(0,o._)("span",{class:(0,r.C_)(["text-h6 text-weight-bold",e.total_denomination>e.cash_match?"text-red-9":0===e.missing_denomination?"text-primary":""])},(0,r.zw)(e.formatMoney(e.total_denomination)),3),pe,0!==e.missing_denomination?((0,o.wg)(),(0,o.iD)("div",he,[de,(0,o._)("span",{class:(0,r.C_)(0!==e.missing_denomination?"text-red-6":"text-primary")},(0,r.zw)((e.missing_denomination>0?"+":"")+e.formatMoney(e.missing_denomination)),3),_e])):(0,o.kq)("",!0)]),(0,o.Wm)(p),(0,o.Wm)(i,{flat:"",ripple:"",rounded:"",label:"Cancel",color:"grey-6",class:"hover-text-primary",onClick:e.doCancel},null,8,["onClick"]),(0,o.Wm)(i,{ripple:"",rounded:"",unelevated:"",label:"Save",color:"primary","icon-right":"done_all",disable:0!==e.missing_denomination,onClick:e.submitValidation},null,8,["disable","onClick"])],2)])),_:1},8,["onSubmit"])])),_:1})):(0,o.kq)("",!0)}const be=(0,o.aZ)({name:"CashDenominationForm",emits:["save","cancel","close"],data(){return{$q:(0,H.Z)(),checker:Q.ZZ,formatMoney:Q.lb,local_inputs:{},form_conf:{ref:"cash_denomination_form",inputclass:"form_active_input"},formIsOk:!1,show_centavo:!1,show_peso:!0,denominations:[.01,.1,.25,.5,1,5,10,20,50,100,200,500,1e3]}},props:{icon_click:{},cash_denominations:{type:Array},cash_match:{type:Number}},computed:{...(0,B.rn)("user",["authenticated"]),total_denomination(){let e=0;return Object.keys(this.local_inputs).map((e=>(this.local_inputs[e].value||0)*Number(e))).forEach((t=>{e+=Number(t)})),e},missing_denomination(){return this.cash_match-this.total_denomination}},created(){this.cash_denominations&&(this.denominations=this.cash_denominations),this.denominations.forEach((e=>{this.local_inputs[e]={}})),this.formIsOk=this.cash_match>=0&&this.local_inputs&&Object.keys(this.local_inputs).length,this.formIsOk||this.$emit("close")},methods:{submitValidation(){const e=(0,Q.Sw)(this.$refs,`${this.form_conf.ref}`);e&&e.submit()},genLabel(e){return e>=1?e+" Peso"+(e>1?"s":""):100*e+" Centavo"+(100*e>1?"s":"")},async doSave(){this.total_denomination===this.cash_match&&this.$emit("save",this.local_inputs)},async doCancel(){this.$emit("cancel",this.local_inputs)},async modKey(e){switch(e.key){case"Enter":if(e.preventDefault(),e.ctrlKey&&e.shiftKey&&e.altKey);else if(e.altKey);else if(e.shiftKey)(0,Q.A_)(e,!1);else if(e.ctrlKey)this.submitValidation();else{const t=await(0,Q.A_)(e);t||this.$refs[this.form_conf.ref].submit()}break;default:break}}},beforeUnmount(){this.$emit("close")}});var we=a(4260),$e=a(151),Te=a(9570),ye=a(2165),Ne=a(3747),ge=a(5269),Ce=a(7704),Ae=a(7011),ke=a(2350),Oe=a(4554),De=a(2025),Ee=a(2471),We=a(3414),ve=a(2035),Re=a(4842),Se=a(8870),Le=a(7518),Me=a.n(Le);const Ye=(0,we.Z)(be,[["render",fe]]),Ue=Ye;Me()(be,"components",{QCard:$e.Z,QToolbar:Te.Z,QBtn:ye.Z,QToolbarTitle:Ne.Z,QForm:ge.Z,QScrollArea:Ce.Z,QList:Ae.Z,QItemLabel:ke.Z,QIcon:Oe.Z,QSpace:De.Z,QSlideTransition:Ee.Z,QItem:We.Z,QItemSection:ve.Z,QInput:Re.Z,QTooltip:Se.Z});const xe=(e,t,a=" ",o=!0,n=!0)=>{if("undefined"===typeof e)return e;isNaN(t)&&(t=e.length),"boolean"!==typeof o&&(o=!1),"undefined"===typeof a&&(a=" "),"boolean"!==typeof n&&(n=!1);var s=String(e);return n&&(s=s.trim()),s=s.substring(0,t),s=o?s.padStart(t,a):s.padEnd(t,a),s},Ie=(0,o.aZ)({name:"ReportCalendar",components:{CashDenominationForm:Ue},data(){return{$q:(0,H.Z)(),date:P.ZP,trans_days:[],nmin_ym:null,nmax_ym:null,cal_events:[],control_no:0,distribution_comp:"DLPC",report_file_type:"CLF",report_to_generate:"",fetchReport:null,report:[],total_cash_collection:0,report_strdates:[],cash_split:{},total_cash_split:0,dialogCashSplit:!1,download_ready:!0,with_denomination:!0,download_success:null,processing:!1,getObj:Q.Sw,branches:[],custom_view_show:!1,custom_view_user_show:!1,custom_view_branch_show:!1,branch_filter:[],user_filter:[]}},async created(){const e=new Date;this.nmin_ym="2000/01",this.nmax_ym=P.ZP.formatDate(e,"YYYY/MM"),this.control_no=xe(P.ZP.formatDate(e,"DDDD"),3,0),this.control_no+=xe((0,Q.Sw)(this.authenticated,"data.userid",""),3,0),this.cal_events.push(P.ZP.formatDate(e,"YYYY/MM/DD")),this.trans_days.push(P.ZP.formatDate(e,"YYYY/MM/DD")),(0,F.C_)().then((e=>this.branches=e)),this.fetchReport=(0,j.Z)(this.fetchReportNow,3e3),this.trans_days.length||this.trans_days.push({from:P.ZP.formatDate(e.setDate(e.getDate()-6),"YYYY/MM/DD"),to:P.ZP.formatDate(new Date,"YYYY/MM/DD")}),this.$root.isTeller?this.user_filter.push((0,Q.Sw)(this.authenticated,"data.userid")):2==this.$root.accessLevel&&this.branch_filter.push((0,Q.Sw)(this.authenticated,"data.branch_location"))},computed:{...(0,B.rn)("company",["company"]),...(0,B.Se)("user",["branchmates"]),...(0,B.rn)("user",["authenticated","users"])},methods:{...(0,B.nv)("transaction",["getAllTransactions"]),saveInputsMoney(e){this.total_cash_split=0,Object.keys(e).forEach((t=>{this.cash_split[t]=Number(e[t].value||0),this.total_cash_split+=Number(t||0)*Number(e[t].value||0)})),this.dialogCashSplit=!1,this.generateReports()},async generateReports(){if(this.with_denomination&&this.total_cash_split!==this.total_cash_collection)this.download_success=!1,this.$q.notify({message:`Error: Total cash of ${(0,Q.lb)(this.total_cash_collection)} did not match with ${(0,Q.lb)(this.total_cash_split)}`,color:"negative",icon:"info"});else{switch(this.$q.notify({message:`Generating reports for ${this.report_strdates.join(", ")}...`,timeout:1e3,color:"secondary",type:"ongoing"}),this.report_to_generate){case"systxt":this.formatReportTxt();break;case"rpt":this.formatReportRpt();break;case"user_rpt":this.formatReportUsersRpt();break;case"user_branch_rpt":this.formatReportUserBranchRpt();break;case"report_all":this.formatReportTxt(),this.formatReportRpt(),this.formatReportUsersRpt(),this.formatReportUserBranchRpt();break;default:this.formatReportTxt(),this.formatReportRpt();break}setTimeout((async()=>{this.download_ready=!0}),2e3)}},async fetchReportNow(e,t){this.processing=!0,this.report=[],this.total_cash_collection=0,this.total_cash_split=0;let a=[];!1!==this.download_success&&(this.cash_split={}),this.trans_days.forEach(((e,t)=>{a.push(`${(0,Q.JH)(e)&&e.from?e.from:e||""}${e.to?"::"+P.ZP.formatDate(new Date(e.to).setHours(24,0,0,0),"YYYY/MM/DD"):""}`)}));let o=[`date_paid=${a.join("||")}`];this.user_filter.length&&o.push(`receiver_id=${this.user_filter.join("||")}`),this.branch_filter.length&&o.push(`branch_location=${this.branch_filter.join("||")}`);const n=await this.getAllTransactions({query:o}),s=(0,Q.Sw)(n,"response.data.data");s&&s.length?(this.download_ready=!1,s.map((e=>"cash"==e.paymethod.toLowerCase()?Number(e.amount_paid||0)+Number(e.trans_fee||0):0)).forEach((e=>{this.total_cash_collection+=e})),this.report=s,this.report_to_generate=t,this.report_strdates=await this.joinDatesArrayObj(this.trans_days,this.report),this.with_denomination&&this.total_cash_collection>0?this.dialogCashSplit=!0:this.generateReports()):this.$q.notify({message:`No transaction for selected date${this.trans_days.length>1?"s":""}!`,color:"negative",icon:"info"}),setTimeout((async()=>{while(this.dialogCashSplit)await this.sleep();this.processing=!1}),3e3)},async formatReportTxt(){const e=this.report;if(e.length){const t=this.company,a=this.users,o=new Date;let n=0,s="H";s+=xe(`${this.control_no}`,6,0),s+=xe(`${t.name_short}`,30," ",!1),s+=xe(`${P.ZP.formatDate(o,"YYYYMMDDHHmmss")}`,14," ",!1);let l=[];e.forEach(((e,t)=>{n+=Number(e.amount_paid);let o="D";o+=xe(`${e.branch_location}`,10," ",!1),o+=xe(`${a[e.receiver_id]?(0,Q.Sw)(a[e.receiver_id],"firstname","")+" "+(0,Q.Sw)(a[e.receiver_id],"lastname",""):e.receiver_id}`,30," ",!1),o+=xe(`${P.ZP.formatDate(e.date_paid,"YYYYMMDD")}`,8,"0",!1),o+=xe(`${P.ZP.formatDate(e.date_paid,"HHmmss")}`,6,"0",!1),o+=xe(`${e.trans_id}`,10,"0"),o+=xe(`${Number(e.amount_paid).toFixed(2)}`,16,"0"),o+=xe(`${e.account_id}`,20," "),o+=xe(`${e.account_name}`.toUpperCase(),50," ",!1),o+=xe(`${this.abbr_format(e.channel)}`,2," ",!1),o+=xe(`${this.abbr_format(e.paymethod)}`,2," ",!1),o+=xe(`${e.check_no||""}`,10," ",!1),o+=xe(`${e.check_date?P.ZP.formatDate(e.check_date,"YYYYMMDD"):""}`,8,e.check_date?"0":" ",!1),o+=xe(`${e.check_bank||""}`,30," ",!1),o+=xe(`${e.check_type?this.abbr_format(e.check_type):""}`,2," ",!1),l.push(o)}));let r="T";r+=xe(`${e.length}`,7,"0"),r+=xe(`${Number(n).toFixed(2)}`,16,"0");const i=(new Array).concat(s,l,r);let c=this.generateReportFileName("TXT");return this.downloadReport(c,i.join("\n")),i}},async formatReportRpt(){const e=this.report;if(e.length){const t=this.company,a=(this.users,new Date),o=()=>"-".repeat(200);let n=o();n+="\n".repeat(3),n+=xe(`${t.name}`,200," ",!1),n+="\n",n+=xe(`BILLS PAYMENT SYSTEM - ${this.distribution_comp}`,100," ",!1),n+=xe(`RUN DATE: ${P.ZP.formatDate(a,"MM/DD/YYYY")}`,100," "),n+="\n",n+=xe("COLLECTION REPORT",100," ",!1),n+=xe(`RUN TIME: ${xe(P.ZP.formatDate(a,"HH:mm:ss"),10," ",!1)}`,100," "),n+="\n";const s=this.report_strdates;n+=`TRANSACTION DATE${s.length>1?"S":""}: ${s.join(", ")}`,n+="\n";const{branches:l,receivers:r}=this.splitDetails(e);let i=[],c=0,u=0,m=0,p=0,h=0,d=0,_=0,f=0,b=0;l.forEach((t=>{let a=[];a.push(xe(`\nBRANCH: ${t}\n`,200," ",!1));let n=xe("SUBSCRIBER ID",30," ",!1);n+=xe("CUSTOMER NAME",50," ",!1),n+=xe("TRANS DATE",20," ",!1),n+=xe("AMT  DUE",20," "),n+=xe("CASH AMOUNT",20," "),n+=xe("CHECK AMOUNT",20," "),n+=xe("TOTAL AMT",20," "),n+=xe("CHECK NO",20," "),a.push(`${n}`),a.push(`${o()}\n`);let s=0,l=0,r=0,w=0,$=0,T=0,y=0,N=0,g=0;e.filter((e=>e.branch_location==t)).forEach(((e,t)=>{let o=xe(`${e.account_id}`,30," ",!1);o+=xe(`${e.account_name}`,50," ",!1),o+=xe(`${P.ZP.formatDate(e.date_paid,"MM/DD/YYYY")}`,20," ",!1),o+=xe(`${e.amount_due?(0,Q.lb)(e.amount_due):""}`,20," "),o+=xe(`${(0,Q.lb)(e.check_no?0:e.amount_paid)}`,20," "),o+=xe(`${(0,Q.lb)(e.check_no?e.amount_paid:0)}`,20," "),o+=xe(`${(0,Q.lb)(e.amount_paid)}`,20," "),o+=xe(`${e.check_no?e.check_no:""}`,20," "),"cash"==e.paymethod.toLowerCase()?(s+=Number(e.amount_paid),w+=1,y+=Number(e.amount_paid)+Number(e.trans_fee)):e.check_no&&(l+=Number(e.amount_paid),N+=Number(e.amount_paid)+Number(e.trans_fee),$+=1),r+=Number(e.amount_paid),g+=Number(e.amount_paid)+Number(e.trans_fee),T++,a.push(`${o}`)})),m+=Number(r),b+=Number(g),c+=Number(s),_+=Number(y),f+=Number(N),u+=Number(l),d+=T,p+=w,h+=$,a.push(`\n${o()}`);let C=xe(`Branch Total: ${t} (${T} Transactions)`,120," ",!1);C+=xe(`${(0,Q.lb)(s)}`,20," "),C+=xe(`${(0,Q.lb)(l)}`,20," "),C+=xe(`${(0,Q.lb)(r)}`,20," "),a.push(C),a.push(`${o()}\n`),i.push(`${a.join("\n")}`)})),i.push(`${"\n".repeat(3)}`);let w=xe(`Grand Total: ${s.join(", ")}`,120," ",!1);w+=xe(`${(0,Q.lb)(c)}`,20," "),w+=xe(`${(0,Q.lb)(u)}`,20," "),w+=xe(`${(0,Q.lb)(m)}`,20," ");let $=(new Array).concat(o(),w,"\n".repeat(5),"=".repeat(200));$.push(xe(`${" ".repeat(25)}${t.name}`,100," ",!1,!1)),$.push(xe(`${" ".repeat(25)}BILLS PAYMENT SYSTEM - ${this.distribution_comp}`,100," ",!1,!1)+xe(`RUN DATE: ${P.ZP.formatDate(a,"MM/DD/YYYY")}`,50," ")),$.push(xe(`${" ".repeat(25)}COLLECTION SUMMARY REPORT`,100," ",!1,!1)+xe(`RUN TIME: ${xe(P.ZP.formatDate(a,"HH:mm:ss"),10," ",!1)}`,50," ")),$.push(`${" ".repeat(25)}TRANSACTION DATE${s.length>1?"S":""}: ${s.join(", ")}`),$.push("=".repeat(200)),$.push(""),$.push(xe(`${" ".repeat(25)}TOTAL NO. OF BRANCHES`,70,".",!1,!1)+xe(":",15," ")+xe(`${l.length}`,35," ")),$.push(xe(`${" ".repeat(25)}TOTAL NO. OF TELLERS`,70,".",!1,!1)+xe(":",15," ")+xe(`${r.length}`,35," ")),$.push(""),$.push(xe(`${" ".repeat(25)}TOTAL CASH TRANSACTIONS`,70,".",!1,!1)+xe(":",15," ")+xe(`${p}`,35," ")),$.push(xe(`${" ".repeat(25)}TOTAL CASH AMOUNT`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(c)}`,35," ")),$.push(xe(`${" ".repeat(25)}TOTAL CASH AMOUNT WITH TRANSACTION FEE`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(_)}`,35," ")),this.with_denomination&&Object.keys(this.cash_split).forEach((e=>{this.cash_split[e]&&$.push(xe(`${" ".repeat(25)}* PHP ${e} x ${Number(this.cash_split[e]||0)}`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(Number(e||0)*Number(this.cash_split[e]||0))}`,35," "))})),$.push(""),$.push(xe(`${" ".repeat(25)}TOTAL CHECK TRANSACTION`,70,".",!1,!1)+xe(":",15," ")+xe(`${h}`,35," ")),$.push(xe(`${" ".repeat(25)}TOTAL CHECK AMOUNT`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(u)}`,35," ")),$.push(xe(`${" ".repeat(25)}TOTAL CHECK AMOUNT WITH TRANSACTION FEE`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(f)}`,35," ")),$.push(""),$.push(xe(`${" ".repeat(25)}TOTAL NO. OF TRANSACTIONS`,70,".",!1,!1)+xe(":",15," ")+xe(`${d}`,35," ")),$.push(xe(`${" ".repeat(25)}TOTAL COLLECTION AMOUNT`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(m)}`,35," ")),$.push(xe(`${" ".repeat(25)}TOTAL COLLECTION AMOUNT WITH TRANSACTION FEE`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(b)}`,35," ")),$.push(xe(`${" ".repeat(25)}TOTAL COLLECTIONS TRANSACTION FEE`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(b-m)}`,35," ")),$.push("\n"),$.push(`${o()}`);const T=(new Array).concat(n,i,$);let y=this.generateReportFileName("RPT");return this.downloadReport(y,T.join("\n")),T}},async formatReportUsersRpt(){const e=this.report;if(e.length){const t=this.company,a=this.users,o=new Date,n=()=>"-".repeat(200);let s=n();s+="\n".repeat(3),s+=xe(`${t.name}`,200," ",!1),s+="\n",s+=xe(`BILLS PAYMENT SYSTEM - ${this.distribution_comp}`,100," ",!1),s+=xe(`RUN DATE: ${P.ZP.formatDate(o,"MM/DD/YYYY")}`,100," "),s+="\n",s+=xe("COLLECTION REPORT",100," ",!1),s+=xe(`RUN TIME: ${xe(P.ZP.formatDate(o,"HH:mm:ss"),10," ",!1)}`,100," "),s+="\n";const l=this.report_strdates;s+=`TRANSACTION DATE${l.length>1?"S":""}: ${l.join(", ")}`,s+="\n";const{branches:r,receivers:i}=this.splitDetails(e);let c=[],u=0,m=0,p=0,h=0,d=0,_=0,f=0,b=0,w=0;i.forEach((t=>{let o=[];o.push(xe(`RECEIVER ID: ${t}`,160," ",!1)+xe(`BRANCH LOCATION: ${(0,Q.Sw)(a[t],"branch_location","")}`,40," ",!1)),o.push(xe(`RECEIVER NAME: ${(0,Q.Sw)(a[t],"firstname","")} ${(0,Q.Sw)(a[t],"lastname","")}`,160," ",!1)+xe(`LAST LOGIN: ${P.ZP.formatDate((0,Q.Sw)(a[t],"last_login"),"MM/DD/YYYY HH:mm:ss")||""}`,40," ",!1)),o.push("");let s=xe("SUBSCRIBER ID",30," ",!1);s+=xe("CUSTOMER NAME",50," ",!1),s+=xe("TRANS DATE",20," ",!1),s+=xe("AMT DUE",20," "),s+=xe("CASH AMOUNT",20," "),s+=xe("CHECK AMOUNT",20," "),s+=xe("TOTAL AMT",20," "),s+=xe("CHECK NO",20," "),o.push(`${s}`),o.push(`${n()}\n`);let l=0,r=0,i=0,$=0,T=0,y=0,N=0,g=0,C=0;e.filter((e=>e.receiver_id==t)).forEach(((e,t)=>{let a=xe(`${e.account_id}`,30," ",!1);a+=xe(`${e.account_name}`,50," ",!1),a+=xe(`${P.ZP.formatDate(e.date_paid,"MM/DD/YYYY")}`,20," ",!1),a+=xe(`${e.amount_due?(0,Q.lb)(e.amount_due):""}`,20," "),a+=xe(`${(0,Q.lb)(e.check_no?0:e.amount_paid)}`,20," "),a+=xe(`${(0,Q.lb)(e.check_no?e.amount_paid:0)}`,20," "),a+=xe(`${(0,Q.lb)(e.amount_paid)}`,20," "),a+=xe(`${e.check_no?e.check_no:""}`,20," "),"cash"==e.paymethod.toLowerCase()?(l+=Number(e.amount_paid),$+=1,N+=Number(e.amount_paid)+Number(e.trans_fee)):e.check_no&&(r+=Number(e.amount_paid),g+=Number(e.amount_paid)+Number(e.trans_fee),T+=1),i+=Number(e.amount_paid),C+=Number(e.amount_paid)+Number(e.trans_fee),y++,o.push(`${a}`)})),p+=Number(i),w+=Number(C),u+=Number(l),f+=Number(N),b+=Number(g),m+=Number(r),_+=y,h+=$,d+=T,o.push(`\n${n()}`);let A=xe(`Receiver Total: ${t} (${y} Transactions)`,120," ",!1);A+=xe(`${(0,Q.lb)(l)}`,20," "),A+=xe(`${(0,Q.lb)(r)}`,20," "),A+=xe(`${(0,Q.lb)(i)}`,20," "),o.push(A),o.push(`${n()}\n`),c.push(`\n${o.join("\n")}`)})),c.push(`${"\n".repeat(3)}`);let $=xe(`Grand Total: ${l.join(", ")}`,120," ",!1);$+=xe(`${(0,Q.lb)(u)}`,20," "),$+=xe(`${(0,Q.lb)(m)}`,20," "),$+=xe(`${(0,Q.lb)(p)}`,20," ");let T=(new Array).concat(n(),$,"\n".repeat(5),"=".repeat(200));T.push(xe(`${" ".repeat(25)}${t.name}`,100," ",!1,!1)),T.push(xe(`${" ".repeat(25)}BILLS PAYMENT SYSTEM - ${this.distribution_comp}`,100," ",!1,!1)+xe(`RUN DATE: ${P.ZP.formatDate(o,"MM/DD/YYYY")}`,50," ")),T.push(xe(`${" ".repeat(25)}COLLECTION SUMMARY REPORT`,100," ",!1,!1)+xe(`RUN TIME: ${xe(P.ZP.formatDate(o,"HH:mm:ss"),10," ",!1)}`,50," ")),T.push(`${" ".repeat(25)}TRANSACTION DATE${l.length>1?"S":""}: ${l.join(", ")}`),T.push("=".repeat(200)),T.push(""),T.push(xe(`${" ".repeat(25)}TOTAL NO. OF BRANCHES`,70,".",!1,!1)+xe(":",15," ")+xe(`${r.length}`,35," ")),T.push(xe(`${" ".repeat(25)}TOTAL NO. OF TELLERS`,70,".",!1,!1)+xe(":",15," ")+xe(`${i.length}`,35," ")),T.push(""),T.push(xe(`${" ".repeat(25)}TOTAL CASH TRANSACTIONS`,70,".",!1,!1)+xe(":",15," ")+xe(`${h}`,35," ")),T.push(xe(`${" ".repeat(25)}TOTAL CASH AMOUNT`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(u)}`,35," ")),T.push(xe(`${" ".repeat(25)}TOTAL CASH AMOUNT WITH TRANSACTION FEE`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(f)}`,35," ")),this.with_denomination&&Object.keys(this.cash_split).forEach((e=>{this.cash_split[e]&&T.push(xe(`${" ".repeat(25)}* PHP ${e} x ${Number(this.cash_split[e]||0)}`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(Number(e||0)*Number(this.cash_split[e]||0))}`,35," "))})),T.push(""),T.push(xe(`${" ".repeat(25)}TOTAL CHECK TRANSACTION`,70,".",!1,!1)+xe(":",15," ")+xe(`${d}`,35," ")),T.push(xe(`${" ".repeat(25)}TOTAL CHECK AMOUNT`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(m)}`,35," ")),T.push(xe(`${" ".repeat(25)}TOTAL CHECK AMOUNT WITH TRANSACTION FEE`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(b)}`,35," ")),T.push(""),T.push(xe(`${" ".repeat(25)}TOTAL NO. OF TRANSACTIONS`,70,".",!1,!1)+xe(":",15," ")+xe(`${_}`,35," ")),T.push(xe(`${" ".repeat(25)}TOTAL COLLECTION AMOUNT`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(p)}`,35," ")),T.push(xe(`${" ".repeat(25)}TOTAL COLLECTION AMOUNT WITH TRANSACTION FEE`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(w)}`,35," ")),T.push(xe(`${" ".repeat(25)}TOTAL COLLECTIONS TRANSACTION FEE`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(w-p)}`,35," ")),T.push("\n"),T.push(`${n()}`);const y=(new Array).concat(s,c,T);let N=`${this.generateReportFileName()}_USERS.RPT`;return this.downloadReport(N,y.join("\n")),y}},async formatReportUserBranchRpt(){const e=this.report;if(e.length){const t=this.company,a=this.users,o=new Date,n=()=>"-".repeat(200);let s=n();s+="\n".repeat(3),s+=xe(`${t.name}`,200," ",!1),s+="\n",s+=xe(`BILLS PAYMENT SYSTEM - ${this.distribution_comp}`,100," ",!1),s+=xe(`RUN DATE: ${P.ZP.formatDate(o,"MM/DD/YYYY")}`,100," "),s+="\n",s+=xe("COLLECTION REPORT",100," ",!1),s+=xe(`RUN TIME: ${xe(P.ZP.formatDate(o,"HH:mm:ss"),10," ",!1)}`,100," "),s+="\n";const l=this.report_strdates;s+=`TRANSACTION DATE${l.length>1?"S":""}: ${l.join(", ")}`,s+="\n";const{branches:r,receivers:i}=this.splitDetails(e);let c=[],u=0,m=0,p=0,h=0,d=0,_=0,f=0,b=0,w=0;i.forEach((t=>{let o=[];const s=this.splitDetails(e.filter((e=>e.receiver_id==t)));o.push(`${"=".repeat(200)}`),o.push(xe(`RECEIVER ID: ${t}`,160," ",!1)+xe(`BRANCH LOCATION: ${(0,Q.Sw)(a[t],"branch_location","")}`,40," ",!1)),o.push(xe(`RECEIVER NAME: ${(0,Q.Sw)(a[t],"firstname","")} ${(0,Q.Sw)(a[t],"lastname","")}`,160," ",!1)+xe(`LAST LOGIN: ${P.ZP.formatDate((0,Q.Sw)(a[t],"last_login"),"MM/DD/YYYY HH:mm:ss")||""}`,40," ",!1));let l=0,r=0,i=0,$=0,T=0,y=0,N=0,g=0,C=0,A=0;const k=s.branches;k.forEach((a=>{let s=[];s.push(xe(`\nBRANCH: ${a}\n`,200," ",!1));let c=xe("SUBSCRIBER ID",30," ",!1);c+=xe("CUSTOMER NAME",50," ",!1),c+=xe("TRANS DATE",20," ",!1),c+=xe("AMT  DUE",20," "),c+=xe("CASH AMOUNT",20," "),c+=xe("CHECK AMOUNT",20," "),c+=xe("TOTAL AMT",20," "),c+=xe("CHECK NO",20," "),s.push(`${c}`),s.push(`${n()}\n`);let u=0,m=0,p=0,h=0,d=0,_=0,f=0,b=0,w=0;e.filter((e=>e.branch_location==a&&e.receiver_id==t)).forEach(((e,t)=>{let a=xe(`${e.account_id}`,30," ",!1);a+=xe(`${e.account_name}`,50," ",!1),a+=xe(`${P.ZP.formatDate(e.date_paid,"MM/DD/YYYY")}`,20," ",!1),a+=xe(`${e.amount_due?(0,Q.lb)(e.amount_due):""}`,20," "),a+=xe(`${(0,Q.lb)(e.check_no?0:e.amount_paid)}`,20," "),a+=xe(`${(0,Q.lb)(e.check_no?e.amount_paid:0)}`,20," "),a+=xe(`${(0,Q.lb)(e.amount_paid)}`,20," "),a+=xe(`${e.check_no?e.check_no:""}`,20," "),"cash"==e.paymethod.toLowerCase()?(u+=Number(e.amount_paid),f+=Number(e.amount_paid)+Number(e.trans_fee),h+=1):e.check_no&&(m+=Number(e.amount_paid),b+=Number(e.amount_paid)+Number(e.trans_fee),d+=1),p+=Number(e.amount_paid),w+=Number(e.amount_paid)+Number(e.trans_fee),_++,s.push(`${a}`)})),N++,i+=Number(p),A+=Number(w),l+=Number(u),g+=Number(f),C+=Number(b),r+=Number(m),$+=Number(h),T+=Number(d),y+=Number(_),s.push(`\n${n()}`);let k=xe(`Branch Total: (${_} Transactions)`,120," ",!1);k+=xe(`${(0,Q.lb)(u)}`,20," "),k+=xe(`${(0,Q.lb)(m)}`,20," "),k+=xe(`${(0,Q.lb)(p)}`,20," "),s.push(`${k}`),s.push(`${n()}\n`),o.push(`${s.join("\n")}`)}));let O=xe(`Receiver Total: ${t} (${N} Branch${N>1?"es":""} ${y} Transaction${y>1?"s":""})`,120," ",!1);O+=xe(`${(0,Q.lb)(l)}`,20," "),O+=xe(`${(0,Q.lb)(r)}`,20," "),O+=xe(`${(0,Q.lb)(i)}`,20," "),o.push(O),o.push(`${"=".repeat(200)}\n`),o.push(`${"\n".repeat(3)}`),p+=Number(i),w+=Number(A),u+=Number(l),f+=Number(g),b+=Number(C),m+=Number(r),_+=y,h+=$,d+=T,c.push(o.join("\n"))}));let $=xe(`Grand Total: ${l.join(", ")}`,120," ",!1);$+=xe(`${(0,Q.lb)(u)}`,20," "),$+=xe(`${(0,Q.lb)(m)}`,20," "),$+=xe(`${(0,Q.lb)(p)}`,20," ");let T=(new Array).concat(n(),$,"\n".repeat(5),"=".repeat(200));T.push(xe(`${" ".repeat(25)}${t.name}`,100," ",!1,!1)),T.push(xe(`${" ".repeat(25)}BILLS PAYMENT SYSTEM - ${this.distribution_comp}`,100," ",!1,!1)+xe(`RUN DATE: ${P.ZP.formatDate(o,"MM/DD/YYYY")}`,50," ")),T.push(xe(`${" ".repeat(25)}COLLECTION SUMMARY REPORT`,100," ",!1,!1)+xe(`RUN TIME: ${xe(P.ZP.formatDate(o,"HH:mm:ss"),10," ",!1)}`,50," ")),T.push(`${" ".repeat(25)}TRANSACTION DATE${l.length>1?"S":""}: ${l.join(", ")}`),T.push("=".repeat(200)),T.push(""),T.push(xe(`${" ".repeat(25)}TOTAL NO. OF BRANCHES`,70,".",!1,!1)+xe(":",15," ")+xe(`${r.length}`,35," ")),T.push(xe(`${" ".repeat(25)}TOTAL NO. OF TELLERS`,70,".",!1,!1)+xe(":",15," ")+xe(`${i.length}`,35," ")),T.push(""),T.push(xe(`${" ".repeat(25)}TOTAL CASH TRANSACTIONS`,70,".",!1,!1)+xe(":",15," ")+xe(`${h}`,35," ")),T.push(xe(`${" ".repeat(25)}TOTAL CASH AMOUNT`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(u)}`,35," ")),T.push(xe(`${" ".repeat(25)}TOTAL CASH AMOUNT WITH TRANSACTION FEE`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(f)}`,35," ")),this.with_denomination&&Object.keys(this.cash_split).forEach((e=>{this.cash_split[e]&&T.push(xe(`${" ".repeat(25)}* PHP ${e} x ${Number(this.cash_split[e]||0)}`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(Number(e||0)*Number(this.cash_split[e]||0))}`,35," "))})),T.push(""),T.push(xe(`${" ".repeat(25)}TOTAL CHECK TRANSACTION`,70,".",!1,!1)+xe(":",15," ")+xe(`${d}`,35," ")),T.push(xe(`${" ".repeat(25)}TOTAL CHECK AMOUNT`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(m)}`,35," ")),T.push(xe(`${" ".repeat(25)}TOTAL CHECK AMOUNT WITH TRANSACTION FEE`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(b)}`,35," ")),T.push(""),T.push(xe(`${" ".repeat(25)}TOTAL NO. OF TRANSACTIONS`,70,".",!1,!1)+xe(":",15," ")+xe(`${_}`,35," ")),T.push(xe(`${" ".repeat(25)}TOTAL COLLECTION AMOUNT`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(p)}`,35," ")),T.push(xe(`${" ".repeat(25)}TOTAL COLLECTION AMOUNT WITH TRANSACTION FEE`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(w)}`,35," ")),T.push(xe(`${" ".repeat(25)}TOTAL COLLECTIONS TRANSACTION FEE`,70,".",!1,!1)+xe(":",15," ")+xe(`${(0,Q.lb)(w-p)}`,35," ")),T.push(`\n${n()}`);const y=(new Array).concat(s,c,T);let N=`${this.generateReportFileName()}_DETAILED.RPT`;return this.downloadReport(N,y.join("\n")),y}},abbr_format(e){const t=["OverTheCounter","Internet","ATM","Mobile","Phone"],a=["OT","IB","AT","MB","PB"],o=["Cash","Check","Debit"],n=["CS","CK","DR"],s=["Local","Regional","On Us","Check"],l=["LO","RE","OU","MC"],r=(new Array).concat(t,o,s),i=(new Array).concat(a,n,l);return i[r.indexOf(e)]||""},ducodes(e){const t=["VEC","DLP","CLP","SEZ","MEZ","BEZ","LEZ"],a=["VECO","DLPC","CLPC","SEZC","MEZC","BEZC","LEZC"],o=["Visayan Electric Company","Davao Light and Power Company","Cotabato Light and Power Company","Subic Enerzone Corporation","Mactan Enerzone Corporation","Balamban Enerzone Corporation","Lima Enerzone Corporation"];let n=a.indexOf(e);return-1===n&&(n=o.indexOf(e)),t[n]||""},generateReportFileName(e){let t=`${this.company.name_abbr}`;return t+=`${this.ducodes(this.distribution_comp)}`,t+=xe(`${this.control_no}`,6,"0"),t+=xe(`${P.ZP.formatDate(new Date,"YYYYMMDD")}`,8,"0",!1),t+=`${this.report_file_type}`,e&&(t+=`.${e}`),`${t}`},splitDetails(e){let t=[],a=[],o=[];return Array.isArray(e)&&e.forEach((e=>{(0,Q.Sw)(e,"branch_location")&&-1===t.indexOf(e.branch_location)&&t.push(e.branch_location),(0,Q.Sw)(e,"receiver_id")&&-1===a.indexOf(e.receiver_id)&&a.push(e.receiver_id),(0,Q.Sw)(e,"date_paid")&&-1===o.indexOf(e.date_paid)&&o.push(e.date_paid)})),{branches:t,receivers:a,dates:o}},async getDateRange(e){let t=[];e.forEach((e=>{e.date_paid&&t.push(new Date(e.date_paid))}));const a=P.ZP.getMinDate(...t),o=P.ZP.getMaxDate(...t);return[`${P.ZP.formatDate(a,"MM/DD/YYYY")} - ${P.ZP.formatDate(o,"MM/DD/YYYY")}`]},async joinDatesArrayObj(e,t){let a=[];return Array.isArray(e)&&e.forEach((e=>{(0,Q.JH)(e)?a.push(`${P.ZP.formatDate(e.from,"MM/DD/YYYY")} to ${P.ZP.formatDate(e.to,"MM/DD/YYYY")}`):a.push(P.ZP.formatDate(e,"MM/DD/YYYY"))})),a=a.length?a:await this.getDateRange(t),a},async downloadReport(e,t){while(!this.download_ready)await this.sleep();const a=(0,q.Z)(`${e}`,t,{mimeType:"text/plain;charset=UTF-8"});!0!==a?this.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"}):this.download_success=!0},sleep(e=1e3){return new Promise((function(t,a){setTimeout(t,e)}))}}});var Ze=a(5626),Pe=a(9721),He=a(811),qe=a(5869),je=a(6375),Be=a(2226),Qe=a(5096),Fe=a(6778);const ze=(0,we.Z)(Ie,[["render",Z]]),Ke=ze;Me()(Ie,"components",{QCard:$e.Z,QList:Ae.Z,QItem:We.Z,QItemSection:ve.Z,QDate:Ze.Z,QBtn:ye.Z,QTooltip:Se.Z,QBadge:Pe.Z,QIcon:Oe.Z,QMenu:He.Z,QItemLabel:ke.Z,QSeparator:qe.Z,QBtnGroup:je.Z,QBtnDropdown:Be.Z,QAvatar:Qe.Z,QDialog:Fe.Z});const Ve=(0,o.aZ)({name:"Report",components:{ReportCalendar:Ke},data(){return{}},async created(){this.$root.setMeta({title:"Reports"})}});var Ge=a(4379);const Je=(0,we.Z)(Ve,[["render",l]]),Xe=Je;Me()(Ve,"components",{QPage:Ge.Z,QCard:$e.Z,QList:Ae.Z,QItem:We.Z,QItemSection:ve.Z,QItemLabel:ke.Z,QIcon:Oe.Z})}}]);