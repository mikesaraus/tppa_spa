"use strict";(self["webpackChunktppa_app"]=self["webpackChunktppa_app"]||[]).push([[544],{544:(t,a,e)=>{e.r(a),e.d(a,{default:()=>dt});var r=e(3673);const n=(0,r.Uk)(" Report "),p=(0,r.Uk)("Generate Transactions Report");function d(t,a,e,d,o,s){const l=(0,r.up)("q-icon"),i=(0,r.up)("q-item-label"),c=(0,r.up)("q-item-section"),u=(0,r.up)("q-item"),m=(0,r.up)("ReportCalendar"),h=(0,r.up)("q-list"),$=(0,r.up)("q-card"),E=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(E,{class:"flex full-width full-height"},{default:(0,r.w5)((()=>[(0,r.Wm)($,{flat:"",class:"full-width row justify-center items-start q-pb-xl q-pt-md"},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{class:"col full-width q-gutter-y-sm"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{class:"col text-center"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,{class:"text-h4 text-primary"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{size:"lg",color:"primary",name:"archive"}),n])),_:1}),(0,r.Wm)(i,{caption:""},{default:(0,r.w5)((()=>[p])),_:1})])),_:1})])),_:1}),(0,r.Wm)(u,{class:"flex flex-center text-center"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{style:{"max-width":"95%",width:"500px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(m)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var o=e(2323);const s={class:"col full-width"},l={class:"row items-center justify-end q-gutter-x-sm"},i=(0,r.Uk)(" Clear all selected dates "),c=(0,r._)("br",null,null,-1),u=(0,r.Uk)(" Tip: When no date selected it will return all transactions. "),m={class:"row items-center no-wrap"},h=(0,r._)("div",{class:"text-center"},"Generate",-1),$=(0,r.Uk)("Machine Readable"),E=(0,r.Uk)(".txt"),_=(0,r.Uk)("Human Readable"),S=(0,r.Uk)(".rpt"),f=(0,r.Uk)(" Custom "),T=(0,r.Uk)("Per User"),A=(0,r.Uk)(" Readable "),b=(0,r.Uk)(".rpt"),w=(0,r.Uk)(" Report categories per-user "),D=(0,r.Uk)("User Per Branch"),R=(0,r.Uk)(" Readable "),N=(0,r.Uk)(".rpt"),C=(0,r.Uk)(" Report per-user per-branch if user has multiple branch location "),O=(0,r.Uk)("Download All"),Y=(0,r.Uk)("All available reports");function M(t,a,e,n,p,d){const M=(0,r.up)("q-icon"),y=(0,r.up)("q-badge"),k=(0,r.up)("q-tooltip"),L=(0,r.up)("q-btn"),g=(0,r.up)("q-avatar"),U=(0,r.up)("q-item-section"),Z=(0,r.up)("q-item-label"),W=(0,r.up)("q-item"),P=(0,r.up)("q-separator"),I=(0,r.up)("q-list"),v=(0,r.up)("q-btn-dropdown"),H=(0,r.up)("q-btn-group"),x=(0,r.up)("q-date"),q=(0,r.up)("q-card");return(0,r.wg)(),(0,r.j4)(q,{flat:""},{default:(0,r.w5)((()=>[(0,r.Wm)(I,null,{default:(0,r.w5)((()=>[(0,r.Wm)(W,{class:"text-center"},{default:(0,r.w5)((()=>[(0,r.Wm)(U,{class:"row justify-center items-center"},{default:(0,r.w5)((()=>[(0,r._)("div",s,[(0,r.Wm)(x,{style:(0,o.j5)([`width: ${t.$q.screen.gt.md?"50":t.$q.screen.gt.sm?"70":"100"}%`,{height:"500px","border-radius":"15px"}]),modelValue:t.trans_days,"onUpdate:modelValue":a[6]||(a[6]=a=>t.trans_days=a),range:"",multiple:"",landscape:t.$q.screen.gt.sm,"today-btn":"",color:"primary",events:t.cal_events,"event-color":"primary","years-in-month-view":"",options:t.histDateOnly,"navigation-min-year-month":t.nmin_ym,"navigation-max-year-month":t.nmax_ym},{default:(0,r.w5)((()=>[(0,r._)("div",l,[(0,r.Wm)(L,{icon:"clear_all",flat:"",round:"",color:"grey-6 hover-text-primary",onClick:a[0]||(a[0]=a=>t.trans_days=[])},{default:(0,r.w5)((()=>[(0,r.Wm)(k,{offset:[10,10],self:"center end",anchor:"center start",class:"bg-transparent text-right"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r.Wm)(y,{class:"text-body2",color:"accent"},{default:(0,r.w5)((()=>[(0,r.Wm)(M,{name:"highlight_off",size:"xs"}),i])),_:1}),c,(0,r.Wm)(y,{rounded:"",class:"shadow-3 text-caption",color:"primary"},{default:(0,r.w5)((()=>[(0,r.Wm)(M,{name:"info",size:"xs"}),u])),_:1})])])),_:1})])),_:1}),(0,r.Wm)(H,{rounded:"",push:""},{default:(0,r.w5)((()=>[(0,r.Wm)(v,{"auto-close":"",push:"",rounded:"",glossy:"",color:"primary",split:"",onClick:t.fetchReport},{label:(0,r.w5)((()=>[(0,r._)("div",m,[(0,r.Wm)(M,{left:"",name:"archive"}),h])])),default:(0,r.w5)((()=>[(0,r.Wm)(I,{padding:"",style:{width:"250px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(W,{clickable:"",onClick:a[1]||(a[1]=a=>t.fetchReport(a,"systxt"))},{default:(0,r.w5)((()=>[(0,r.Wm)(U,{avatar:""},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{icon:"point_of_sale",color:"accent","text-color":"white"})])),_:1}),(0,r.Wm)(U,null,{default:(0,r.w5)((()=>[(0,r.Wm)(Z,null,{default:(0,r.w5)((()=>[$])),_:1}),(0,r.Wm)(Z,{caption:""},{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)(`Report for ${t.distribution_comp}`),1)])),_:1})])),_:1}),(0,r.Wm)(U,{side:""},{default:(0,r.w5)((()=>[(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[E])),_:1})])),_:1})])),_:1}),(0,r.Wm)(W,{clickable:"",onClick:a[2]||(a[2]=a=>t.fetchReport(a,"rpt"))},{default:(0,r.w5)((()=>[(0,r.Wm)(U,{avatar:""},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{icon:"engineering",color:"accent","text-color":"white"})])),_:1}),(0,r.Wm)(U,null,{default:(0,r.w5)((()=>[(0,r.Wm)(Z,null,{default:(0,r.w5)((()=>[_])),_:1}),(0,r.Wm)(Z,{caption:""},{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)(`For ${t.company.name_short}`),1)])),_:1})])),_:1}),(0,r.Wm)(U,{side:""},{default:(0,r.w5)((()=>[(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[S])),_:1})])),_:1})])),_:1}),t.$root.isAdmin?((0,r.wg)(),(0,r.j4)(P,{key:0,inset:"",class:"q-mt-sm"})):(0,r.kq)("",!0),t.$root.isAdmin?((0,r.wg)(),(0,r.j4)(Z,{key:1,header:"",class:"q-pb-xs"},{default:(0,r.w5)((()=>[f])),_:1})):(0,r.kq)("",!0),t.$root.isAdmin?((0,r.wg)(),(0,r.j4)(W,{key:2,clickable:"",onClick:a[3]||(a[3]=a=>t.fetchReport(a,"user_rpt"))},{default:(0,r.w5)((()=>[(0,r.Wm)(U,{avatar:""},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{icon:"groups",color:"teal","text-color":"white"})])),_:1}),(0,r.Wm)(U,null,{default:(0,r.w5)((()=>[(0,r.Wm)(Z,null,{default:(0,r.w5)((()=>[T])),_:1}),(0,r.Wm)(Z,{caption:""},{default:(0,r.w5)((()=>[A,(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[b])),_:1})])),_:1})])),_:1}),(0,r.Wm)(U,{side:""},{default:(0,r.w5)((()=>[(0,r.Wm)(M,{name:"info",color:"amber"},{default:(0,r.w5)((()=>[(0,r.Wm)(k,null,{default:(0,r.w5)((()=>[w])),_:1})])),_:1})])),_:1})])),_:1})):(0,r.kq)("",!0),t.$root.isAdmin?((0,r.wg)(),(0,r.j4)(W,{key:3,clickable:"",onClick:a[4]||(a[4]=a=>t.fetchReport(a,"user_branch_rpt"))},{default:(0,r.w5)((()=>[(0,r.Wm)(U,{avatar:""},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{icon:"privacy_tip",color:"teal","text-color":"white"})])),_:1}),(0,r.Wm)(U,null,{default:(0,r.w5)((()=>[(0,r.Wm)(Z,null,{default:(0,r.w5)((()=>[D])),_:1}),(0,r.Wm)(Z,{caption:""},{default:(0,r.w5)((()=>[R,(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[N])),_:1})])),_:1})])),_:1}),(0,r.Wm)(U,{side:""},{default:(0,r.w5)((()=>[(0,r.Wm)(M,{name:"info",color:"amber"},{default:(0,r.w5)((()=>[(0,r.Wm)(k,null,{default:(0,r.w5)((()=>[C])),_:1})])),_:1})])),_:1})])),_:1})):(0,r.kq)("",!0),t.$root.isAdmin?((0,r.wg)(),(0,r.j4)(P,{key:4,inset:"",class:"q-mt-sm q-mb-sm"})):(0,r.kq)("",!0),t.$root.isAdmin?((0,r.wg)(),(0,r.j4)(W,{key:5,clickable:"",onClick:a[5]||(a[5]=a=>t.fetchReport(a,"report_all"))},{default:(0,r.w5)((()=>[(0,r.Wm)(U,{avatar:""},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{icon:"download_for_offline",color:"accent","text-color":"white"})])),_:1}),(0,r.Wm)(U,null,{default:(0,r.w5)((()=>[(0,r.Wm)(Z,null,{default:(0,r.w5)((()=>[O])),_:1}),(0,r.Wm)(Z,{caption:""},{default:(0,r.w5)((()=>[(0,r.Wm)(y,{color:"accent"},{default:(0,r.w5)((()=>[Y])),_:1})])),_:1})])),_:1})])),_:1})):(0,r.kq)("",!0)])),_:1})])),_:1},8,["onClick"])])),_:1})])])),_:1},8,["style","modelValue","landscape","events","options","navigation-min-year-month","navigation-max-year-month"])])])),_:1})])),_:1})])),_:1})])),_:1})}e(71);var y=e(5616),k=e(8825),L=e(2841),g=e(3317),U=e(3617),Z=e(6386);const W=(0,r.aZ)({name:"ReportCalendar",data(){return{$q:(0,k.Z)(),trans_days:[],transactions:[],report_type:null,nmin_ym:null,nmax_ym:null,cal_events:[],distribution_comp:"DLPC",control_no:0,report_file_type:"CLF",fetchReport:null}},async created(){const t=new Date;this.fetchReport=(0,g.Z)(this.fetchReportNow,3e3);const a=new Date;this.trans_days.push(y.ZP.formatDate(t,"YYYY/MM/DD")),this.trans_days.length||this.trans_days.push({from:y.ZP.formatDate(a.setDate(a.getDate()-6),"YYYY/MM/DD"),to:y.ZP.formatDate(new Date,"YYYY/MM/DD")}),this.nmin_ym="2000/01",this.nmax_ym=y.ZP.formatDate(t,"YYYY/MM"),this.cal_events.push(y.ZP.formatDate(t,"YYYY/MM/DD")),this.control_no=y.ZP.formatDate(t,"DDDD")},computed:{...(0,U.rn)("company",["company"]),...(0,U.rn)("user",["authenticated","users"])},methods:{...(0,U.nv)("transaction",["getAllTransactions"]),histDateOnly(t){return t<=y.ZP.formatDate(new Date,"YYYY/MM/DD")},async fetchReportNow(t,a){let e=[];this.trans_days.forEach(((t,a)=>{e.push(`${(0,Z.JH)(t)&&t.from?t.from:t||""}${t.to?"::"+y.ZP.formatDate(new Date(t.to).setHours(24,0,0,0),"YYYY/MM/DD"):""}`)}));let r=[`date_paid=${e.join("||")}`];this.$root.isAdmin||r.push(`receiver_id=${(0,Z.Sw)(this.authenticated,"data.userid",null)}`);const n=await this.getAllTransactions({query:r}),p=(0,Z.Sw)(n,"response.data.data");if(p&&p.length)switch(a){case"systxt":this.formatReportTxt(p);break;case"rpt":this.formatReportRpt(p);break;case"user_rpt":this.formatReportUsersRpt(p);break;case"user_branch_rpt":this.formatReportUserBranchRpt(p);break;case"report_all":this.formatReportTxt(p),this.formatReportRpt(p),this.formatReportUsersRpt(p),this.formatReportUserBranchRpt(p);break;default:this.formatReportTxt(p),this.formatReportRpt(p);break}else this.$q.notify({message:`No transaction for selected date${this.trans_days.length>1?"s":""}!`,color:"negative",icon:"info"})},async formatReportTxt(t){if(t.length){const a=this.company,e=this.users,r=new Date;let n=0,p="H";p+=`${this.control_no}`.padStart(6,0),p+=`${a.name_short}`.padEnd(30," "),p+=`${y.ZP.formatDate(r,"YYYYMMDDHHmmss")}`.padEnd(14,"");let d=[];t.forEach(((t,a)=>{n+=Number(t.amount_paid);let r="D";r+=`${t.branch_location}`.padEnd(10," "),r+=`${e[t.receiver_id]?(0,Z.Sw)(e[t.receiver_id],"firstname","")+" "+(0,Z.Sw)(e[t.receiver_id],"lastname",""):t.receiver_id}`.padEnd(30," "),r+=`${y.ZP.formatDate(t.date_paid,"YYYYMMDD")}`.padEnd(8,"0"),r+=`${y.ZP.formatDate(t.date_paid,"HHmmss")}`.padEnd(6,"0"),r+=`${t.trans_id}`.padStart(10,"0"),r+=`${Number(t.amount_paid).toFixed(2)}`.padStart(16,"0"),r+=`${t.account_id}`.padStart(20," "),r+=`${t.account_name}`.toUpperCase().padEnd(50," "),r+=`${this.abbr_format(t.channel)}`.padEnd(2," "),r+=`${this.abbr_format(t.paymethod)}`.padEnd(2," "),r+=`${t.check_no||""}`.padEnd(10," "),r+=`${t.check_date?y.ZP.formatDate(t.check_date,"YYYYMMDD"):""}`.padEnd(8,t.check_date?"0":" "),r+=`${t.check_bank||""}`.padEnd(30," "),r+=`${t.check_type?this.abbr_format(t.check_type):""}`.padEnd(2," "),d.push(r)}));let o="T";o+=`${t.length}`.padStart(7,"0"),o+=`${Number(n).toFixed(2)}`.padStart(16,"0");const s=(new Array).concat(p,d,o);let l=this.generateReportFileName("TXT");return this.downloadReport(l,s.join("\n")),s}console.warn("Received Empty Report")},async formatReportRpt(t){if(t.length){const a=this.company,e=(this.users,new Date),r=()=>"-".repeat(200);let n=r();n+="\n".repeat(3),n+=`${a.name}`.padEnd(200," "),n+="\n",n+=`BILLS PAYMENT SYSTEM - ${this.distribution_comp}`.padEnd(100," "),n+=`RUN DATE: ${y.ZP.formatDate(e,"MM/DD/YYYY")}`.padStart(100," "),n+="\n",n+="COLLECTION REPORT".padEnd(100," "),n+=`RUN TIME: ${y.ZP.formatDate(e,"HH:mm:ss").padEnd(10," ")}`.padStart(100," "),n+="\n";const p=await this.joinDatesArrayObj(this.trans_days,t);n+=`TRANSACTION DATE${p.length>1?"S":""}: ${p.join(", ")}`,n+="\n";const{branches:d,receivers:o}=this.splitDetails(t);let s=[],l=0,i=0,c=0,u=0,m=0,h=0;d.forEach((a=>{let e=[];e.push(`\nBRANCH: ${a}\n`.padEnd(200," "));let n="SUBSCRIBER ID".padEnd(30," ");n+="CUSTOMER NAME".padEnd(50," "),n+="TRANS DATE".padEnd(20," "),n+="AMT  DUE".padStart(20," "),n+="CASH AMOUNT".padStart(20," "),n+="CHECK AMOUNT".padStart(20," "),n+="TOTAL AMT".padStart(20," "),n+="CHECK NO".padStart(20," "),e.push(`${n}`),e.push(`${r()}\n`);let p=0,d=0,o=0,$=0,E=0,_=0;t.filter((t=>t.branch_location==a)).forEach(((t,a)=>{let r=`${t.account_id}`.padEnd(30," ");r+=`${t.account_name}`.padEnd(50," "),r+=`${y.ZP.formatDate(t.date_paid,"MM/DD/YYYY")}`.padEnd(20," "),r+=`${t.amount_due?(0,Z.lb)(t.amount_due):""}`.padStart(20," "),r+=`${(0,Z.lb)(t.check_no?0:t.amount_paid)}`.padStart(20," "),r+=`${(0,Z.lb)(t.check_no?t.amount_paid:0)}`.padStart(20," "),r+=`${(0,Z.lb)(t.amount_paid)}`.padStart(20," "),r+=`${t.check_no?t.check_no:""}`.padStart(20," "),p+=Number(t.check_no?0:t.amount_paid),d+=Number(t.check_no?t.amount_paid:0),o+=Number(t.amount_paid),$+=t.check_no?0:1,E+=t.check_no?1:0,_++,e.push(`${r}`)})),c+=Number(o),l+=Number(p),i+=Number(d),h+=_,u+=$,m+=E,e.push(`\n${r()}`);let S=`Branch Total: ${a} (${_} Transactions)`.padEnd(120," ");S+=`${(0,Z.lb)(p)}`.padStart(20," "),S+=`${(0,Z.lb)(d)}`.padStart(20," "),S+=`${(0,Z.lb)(o)}`.padStart(20," "),e.push(S),e.push(`${r()}\n`),s.push(`${e.join("\n")}`)})),s.push(`${"\n".repeat(3)}`);let $=`Grand Total: ${p.join(", ")}`.padEnd(120," ");$+=`${(0,Z.lb)(l)}`.padStart(20," "),$+=`${(0,Z.lb)(i)}`.padStart(20," "),$+=`${(0,Z.lb)(c)}`.padStart(20," ");let E=(new Array).concat(r(),$,"\n".repeat(5),"=".repeat(200));E.push(`${" ".repeat(25)}${a.name}`.padEnd(100," ")),E.push(`${" ".repeat(25)}BILLS PAYMENT SYSTEM - ${this.distribution_comp}`.padEnd(100," ")+`RUN DATE: ${y.ZP.formatDate(e,"MM/DD/YYYY")}`.padStart(50," ").padEnd(25," ")),E.push(`${" ".repeat(25)}COLLECTION SUMMARY REPORT`.padEnd(100," ")+`RUN TIME: ${y.ZP.formatDate(e,"HH:mm:ss").padEnd(10," ")}`.padStart(50," ").padEnd(25," ")),E.push(`${" ".repeat(25)}TRANSACTION DATE${p.length>1?"S":""}: ${p.join(", ")}`),E.push("=".repeat(200)),E.push(""),E.push(`${" ".repeat(25)}TOTAL NO. OF BRANCHES`.padEnd(70,".")+":".padStart(15," ")+`${d.length}`.padStart(35," ")),E.push(`${" ".repeat(25)}TOTAL NO. OF TELLERS`.padEnd(70,".")+":".padStart(15," ")+`${o.length}`.padStart(35," ")),E.push(""),E.push(`${" ".repeat(25)}TOTAL CASH AMOUNT`.padEnd(70,".")+":".padStart(15," ")+`${(0,Z.lb)(l)}`.padStart(35," ")),E.push(`${" ".repeat(25)}TOTAL CASH TRANSACTIONS`.padEnd(70,".")+":".padStart(15," ")+`${u}`.padStart(35," ")),E.push(""),E.push(`${" ".repeat(25)}TOTAL CHECK AMOUNT`.padEnd(70,".")+":".padStart(15," ")+`${(0,Z.lb)(i)}`.padStart(35," ")),E.push(`${" ".repeat(25)}TOTAL CHECK TRANSACTION`.padEnd(70,".")+":".padStart(15," ")+`${(0,Z.lb)(m)}`.padStart(35," ")),E.push(""),E.push(`${" ".repeat(25)}TOTAL COLLECTION AMOUNT`.padEnd(70,".")+":".padStart(15," ")+`${(0,Z.lb)(c)}`.padStart(35," ")),E.push(`${" ".repeat(25)}TOTAL NO. OF TRANSACTIONS`.padEnd(70,".")+":".padStart(15," ")+`${(0,Z.lb)(h)}`.padStart(35," ")),E.push("\n"),E.push(`${r()}`);const _=(new Array).concat(n,s,E);let S=this.generateReportFileName("RPT");return this.downloadReport(S,_.join("\n")),_}console.warn("Received Empty Report")},async formatReportUsersRpt(t){if(t.length){const a=this.company,e=this.users,r=new Date,n=()=>"-".repeat(200);let p=n();p+="\n".repeat(3),p+=`${a.name}`.padEnd(200," "),p+="\n",p+=`BILLS PAYMENT SYSTEM - ${this.distribution_comp}`.padEnd(100," "),p+=`RUN DATE: ${y.ZP.formatDate(r,"MM/DD/YYYY")}`.padStart(100," "),p+="\n",p+="COLLECTION REPORT".padEnd(100," "),p+=`RUN TIME: ${y.ZP.formatDate(r,"HH:mm:ss").padEnd(10," ")}`.padStart(100," "),p+="\n";const d=await this.joinDatesArrayObj(this.trans_days,t);p+=`TRANSACTION DATE${d.length>1?"S":""}: ${d.join(", ")}`,p+="\n";const{branches:o,receivers:s}=this.splitDetails(t);let l=[],i=0,c=0,u=0,m=0,h=0,$=0;s.forEach((a=>{let r=[];r.push(`RECEIVER ID: ${a}`.padEnd(160," ")+`BRANCH LOCATION: ${(0,Z.Sw)(e[a],"branch_location","")}`.padEnd(40," ")),r.push(`RECEIVER NAME: ${(0,Z.Sw)(e[a],"firstname","")} ${(0,Z.Sw)(e[a],"lastname","")}`.padEnd(160," ")+`LAST LOGIN: ${y.ZP.formatDate((0,Z.Sw)(e[a],"last_login"),"MM/DD/YYYY HH:mm:ss")||""}`.padEnd(40," ")),r.push("");let p="SUBSCRIBER ID".padEnd(30," ");p+="CUSTOMER NAME".padEnd(50," "),p+="TRANS DATE".padEnd(20," "),p+="AMT DUE".padStart(20," "),p+="CASH AMOUNT".padStart(20," "),p+="CHECK AMOUNT".padStart(20," "),p+="TOTAL AMT".padStart(20," "),p+="CHECK NO".padStart(20," "),r.push(`${p}`),r.push(`${n()}\n`);let d=0,o=0,s=0,E=0,_=0,S=0;t.filter((t=>t.receiver_id==a)).forEach(((t,a)=>{let e=`${t.account_id}`.padEnd(30," ");e+=`${t.account_name}`.padEnd(50," "),e+=`${y.ZP.formatDate(t.date_paid,"MM/DD/YYYY")}`.padEnd(20," "),e+=`${t.amount_due?(0,Z.lb)(t.amount_due):""}`.padStart(20," "),e+=`${(0,Z.lb)(t.check_no?0:t.amount_paid)}`.padStart(20," "),e+=`${(0,Z.lb)(t.check_no?t.amount_paid:0)}`.padStart(20," "),e+=`${(0,Z.lb)(t.amount_paid)}`.padStart(20," "),e+=`${t.check_no?t.check_no:""}`.padStart(20," "),d+=Number(t.check_no?0:t.amount_paid),o+=Number(t.check_no?t.amount_paid:0),s+=Number(t.amount_paid),E+=t.check_no?0:1,_+=t.check_no?1:0,S++,r.push(`${e}`)})),u+=Number(s),i+=Number(d),c+=Number(o),$+=S,m+=E,h+=_,r.push(`\n${n()}`);let f=`Receiver Total: ${a} (${S} Transactions)`.padEnd(120," ");f+=`${(0,Z.lb)(d)}`.padStart(20," "),f+=`${(0,Z.lb)(o)}`.padStart(20," "),f+=`${(0,Z.lb)(s)}`.padStart(20," "),r.push(f),r.push(`${n()}\n`),l.push(`\n${r.join("\n")}`)})),l.push(`${"\n".repeat(3)}`);let E=`Grand Total: ${d.join(", ")}`.padEnd(120," ");E+=`${(0,Z.lb)(i)}`.padStart(20," "),E+=`${(0,Z.lb)(c)}`.padStart(20," "),E+=`${(0,Z.lb)(u)}`.padStart(20," ");let _=(new Array).concat(n(),E,"\n".repeat(5),"=".repeat(200));_.push(`${" ".repeat(25)}${a.name}`.padEnd(100," ")),_.push(`${" ".repeat(25)}BILLS PAYMENT SYSTEM - ${this.distribution_comp}`.padEnd(100," ")+`RUN DATE: ${y.ZP.formatDate(r,"MM/DD/YYYY")}`.padStart(50," ").padEnd(25," ")),_.push(`${" ".repeat(25)}COLLECTION SUMMARY REPORT`.padEnd(100," ")+`RUN TIME: ${y.ZP.formatDate(r,"HH:mm:ss").padEnd(10," ")}`.padStart(50," ").padEnd(25," ")),_.push(`${" ".repeat(25)}TRANSACTION DATE${d.length>1?"S":""}: ${d.join(", ")}`),_.push("=".repeat(200)),_.push(""),_.push(`${" ".repeat(25)}TOTAL NO. OF BRANCHES`.padEnd(70,".")+":".padStart(15," ")+`${o.length}`.padStart(35," ")),_.push(`${" ".repeat(25)}TOTAL NO. OF TELLERS`.padEnd(70,".")+":".padStart(15," ")+`${s.length}`.padStart(35," ")),_.push(""),_.push(`${" ".repeat(25)}TOTAL CASH AMOUNT`.padEnd(70,".")+":".padStart(15," ")+`${(0,Z.lb)(i)}`.padStart(35," ")),_.push(`${" ".repeat(25)}TOTAL CASH TRANSACTIONS`.padEnd(70,".")+":".padStart(15," ")+`${m}`.padStart(35," ")),_.push(""),_.push(`${" ".repeat(25)}TOTAL CHECK AMOUNT`.padEnd(70,".")+":".padStart(15," ")+`${(0,Z.lb)(c)}`.padStart(35," ")),_.push(`${" ".repeat(25)}TOTAL CHECK TRANSACTION`.padEnd(70,".")+":".padStart(15," ")+`${(0,Z.lb)(h)}`.padStart(35," ")),_.push(""),_.push(`${" ".repeat(25)}TOTAL COLLECTION AMOUNT`.padEnd(70,".")+":".padStart(15," ")+`${(0,Z.lb)(u)}`.padStart(35," ")),_.push(`${" ".repeat(25)}TOTAL NO. OF TRANSACTIONS`.padEnd(70,".")+":".padStart(15," ")+`${(0,Z.lb)($)}`.padStart(35," ")),_.push("\n"),_.push(`${n()}`);const S=(new Array).concat(p,l,_);let f=`${this.generateReportFileName()}_USERS.RPT`;return this.downloadReport(f,S.join("\n")),S}console.warn("Received Empty Report")},async formatReportUserBranchRpt(t){if(t.length){const a=this.company,e=this.users,r=new Date,n=()=>"-".repeat(200);let p=n();p+="\n".repeat(3),p+=`${a.name}`.padEnd(200," "),p+="\n",p+=`BILLS PAYMENT SYSTEM - ${this.distribution_comp}`.padEnd(100," "),p+=`RUN DATE: ${y.ZP.formatDate(r,"MM/DD/YYYY")}`.padStart(100," "),p+="\n",p+="COLLECTION REPORT".padEnd(100," "),p+=`RUN TIME: ${y.ZP.formatDate(r,"HH:mm:ss").padEnd(10," ")}`.padStart(100," "),p+="\n";const d=await this.joinDatesArrayObj(this.trans_days,t);p+=`TRANSACTION DATE${d.length>1?"S":""}: ${d.join(", ")}`,p+="\n";const{branches:o,receivers:s}=this.splitDetails(t);let l=[],i=0,c=0,u=0,m=0,h=0,$=0;s.forEach((a=>{let r=[];const p=this.splitDetails(t.filter((t=>t.receiver_id==a)));r.push(`${"=".repeat(200)}`),r.push(`RECEIVER ID: ${a}`.padEnd(160," ")+`BRANCH LOCATION: ${(0,Z.Sw)(e[a],"branch_location","")}`.padEnd(40," ")),r.push(`RECEIVER NAME: ${(0,Z.Sw)(e[a],"firstname","")} ${(0,Z.Sw)(e[a],"lastname","")}`.padEnd(160," ")+`LAST LOGIN: ${y.ZP.formatDate((0,Z.Sw)(e[a],"last_login"),"MM/DD/YYYY HH:mm:ss")||""}`.padEnd(40," "));let d=0,o=0,s=0,E=0,_=0,S=0,f=0;const T=p.branches;T.forEach((e=>{let p=[];p.push(`\nBRANCH: ${e}\n`.padEnd(200," "));let l="SUBSCRIBER ID".padEnd(30," ");l+="CUSTOMER NAME".padEnd(50," "),l+="TRANS DATE".padEnd(20," "),l+="AMT  DUE".padStart(20," "),l+="CASH AMOUNT".padStart(20," "),l+="CHECK AMOUNT".padStart(20," "),l+="TOTAL AMT".padStart(20," "),l+="CHECK NO".padStart(20," "),p.push(`${l}`),p.push(`${n()}\n`);let i=0,c=0,u=0,m=0,h=0,$=0;t.filter((t=>t.branch_location==e&&t.receiver_id==a)).forEach(((t,a)=>{let e=`${t.account_id}`.padEnd(30," ");e+=`${t.account_name}`.padEnd(50," "),e+=`${y.ZP.formatDate(t.date_paid,"MM/DD/YYYY")}`.padEnd(20," "),e+=`${t.amount_due?(0,Z.lb)(t.amount_due):""}`.padStart(20," "),e+=`${(0,Z.lb)(t.check_no?0:t.amount_paid)}`.padStart(20," "),e+=`${(0,Z.lb)(t.check_no?t.amount_paid:0)}`.padStart(20," "),e+=`${(0,Z.lb)(t.amount_paid)}`.padStart(20," "),e+=`${t.check_no?t.check_no:""}`.padStart(20," "),i+=Number(t.check_no?0:t.amount_paid),c+=Number(t.check_no?t.amount_paid:0),u+=Number(t.amount_paid),m+=t.check_no?0:1,h+=t.check_no?1:0,$++,p.push(`${e}`)})),f++,d+=Number(i),o+=Number(c),s+=Number(u),E+=Number(m),_+=Number(h),S+=Number($),p.push(`\n${n()}`);let T=`Branch Total: (${$} Transactions)`.padEnd(120," ");T+=`${(0,Z.lb)(i)}`.padStart(20," "),T+=`${(0,Z.lb)(c)}`.padStart(20," "),T+=`${(0,Z.lb)(u)}`.padStart(20," "),p.push(`${T}`),p.push(`${n()}\n`),r.push(`${p.join("\n")}`)}));let A=`Receiver Total: ${a} (${f} Branch${f>1?"es":""} ${S} Transaction${S>1?"s":""})`.padEnd(120," ");A+=`${(0,Z.lb)(d)}`.padStart(20," "),A+=`${(0,Z.lb)(o)}`.padStart(20," "),A+=`${(0,Z.lb)(s)}`.padStart(20," "),r.push(A),r.push(`${"=".repeat(200)}\n`),r.push(`${"\n".repeat(3)}`),u+=Number(s),i+=Number(d),c+=Number(o),$+=S,m+=E,h+=_,l.push(r.join("\n"))}));let E=`Grand Total: ${d.join(", ")}`.padEnd(120," ");E+=`${(0,Z.lb)(i)}`.padStart(20," "),E+=`${(0,Z.lb)(c)}`.padStart(20," "),E+=`${(0,Z.lb)(u)}`.padStart(20," ");let _=(new Array).concat(n(),E,"\n".repeat(5),"=".repeat(200));_.push(`${" ".repeat(25)}${a.name}`.padEnd(100," ")),_.push(`${" ".repeat(25)}BILLS PAYMENT SYSTEM - ${this.distribution_comp}`.padEnd(100," ")+`RUN DATE: ${y.ZP.formatDate(r,"MM/DD/YYYY")}`.padStart(50," ").padEnd(25," ")),_.push(`${" ".repeat(25)}COLLECTION SUMMARY REPORT`.padEnd(100," ")+`RUN TIME: ${y.ZP.formatDate(r,"HH:mm:ss").padEnd(10," ")}`.padStart(50," ").padEnd(25," ")),_.push(`${" ".repeat(25)}TRANSACTION DATE${d.length>1?"S":""}: ${d.join(", ")}`),_.push("=".repeat(200)),_.push(""),_.push(`${" ".repeat(25)}TOTAL NO. OF BRANCHES`.padEnd(70,".")+":".padStart(15," ")+`${o.length}`.padStart(35," ")),_.push(`${" ".repeat(25)}TOTAL NO. OF TELLERS`.padEnd(70,".")+":".padStart(15," ")+`${s.length}`.padStart(35," ")),_.push(""),_.push(`${" ".repeat(25)}TOTAL CASH AMOUNT`.padEnd(70,".")+":".padStart(15," ")+`${(0,Z.lb)(i)}`.padStart(35," ")),_.push(`${" ".repeat(25)}TOTAL CASH TRANSACTIONS`.padEnd(70,".")+":".padStart(15," ")+`${m}`.padStart(35," ")),_.push(""),_.push(`${" ".repeat(25)}TOTAL CHECK AMOUNT`.padEnd(70,".")+":".padStart(15," ")+`${(0,Z.lb)(c)}`.padStart(35," ")),_.push(`${" ".repeat(25)}TOTAL CHECK TRANSACTION`.padEnd(70,".")+":".padStart(15," ")+`${(0,Z.lb)(h)}`.padStart(35," ")),_.push(""),_.push(`${" ".repeat(25)}TOTAL COLLECTION AMOUNT`.padEnd(70,".")+":".padStart(15," ")+`${(0,Z.lb)(u)}`.padStart(35," ")),_.push(`${" ".repeat(25)}TOTAL NO. OF TRANSACTIONS`.padEnd(70,".")+":".padStart(15," ")+`${(0,Z.lb)($)}`.padStart(35," ")),_.push(`\n${n()}`);const S=(new Array).concat(p,l,_);let f=`${this.generateReportFileName()}_DETAILED.RPT`;return this.downloadReport(f,S.join("\n")),S}console.warn("Received Empty Report")},abbr_format(t){const a=["OverTheCounter","Internet","ATM","Mobile","Phone"],e=["OT","IB","AT","MB","PB"],r=["Cash","Check","Debit"],n=["CS","CK","DR"],p=["Local","Regional","On Us","Check"],d=["LO","RE","OU","MC"],o=(new Array).concat(a,r,p),s=(new Array).concat(e,n,d);return s[o.indexOf(t)]||""},ducodes(t){const a=["VEC","DLP","CLP","SEZ","MEZ","BEZ","LEZ"],e=["VECO","DLPC","CLPC","SEZC","MEZC","BEZC","LEZC"],r=["Visayan Electric Company","Davao Light and Power Company","Cotabato Light and Power Company","Subic Enerzone Corporation","Mactan Enerzone Corporation","Balamban Enerzone Corporation","Lima Enerzone Corporation"];let n=e.indexOf(t);return-1===n&&(n=r.indexOf(t)),a[n]||""},generateReportFileName(t){let a=`${this.company.name_abbr}`;return a+=`${this.ducodes(this.distribution_comp)}`,a+=`${this.control_no}`.padStart(6,"0"),a+=`${y.ZP.formatDate(new Date,"YYYYMMDD")}`.padEnd(8,"0"),a+=`${this.report_file_type}`,t&&(a+=`.${t}`),`${a}`},splitDetails(t){let a=[],e=[],r=[];return Array.isArray(t)&&t.forEach((t=>{(0,Z.Sw)(t,"branch_location")&&-1===a.indexOf(t.branch_location)&&a.push(t.branch_location),(0,Z.Sw)(t,"receiver_id")&&-1===e.indexOf(t.receiver_id)&&e.push(t.receiver_id),(0,Z.Sw)(t,"date_paid")&&-1===r.indexOf(t.date_paid)&&r.push(t.date_paid)})),{branches:a,receivers:e,dates:r}},async getDateRange(t){let a=[];t.forEach((t=>{t.date_paid&&a.push(new Date(t.date_paid))}));const e=y.ZP.getMinDate(...a),r=y.ZP.getMaxDate(...a);return[`${y.ZP.formatDate(e,"MM/DD/YYYY")} - ${y.ZP.formatDate(r,"MM/DD/YYYY")}`]},async joinDatesArrayObj(t,a){let e=[];return Array.isArray(t)&&t.forEach((t=>{(0,Z.JH)(t)?e.push(`${y.ZP.formatDate(t.from,"MM/DD/YYYY")} to ${y.ZP.formatDate(t.to,"MM/DD/YYYY")}`):e.push(y.ZP.formatDate(t,"MM/DD/YYYY"))})),e=e.length?e:await this.getDateRange(a),e},downloadReport(t,a){const e=(0,L.Z)(`${t}`,a,{mimeType:"text/plain;charset=UTF-8"});!0!==e&&this.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}}});var P=e(4260),I=e(151),v=e(7011),H=e(3414),x=e(2035),q=e(5626),j=e(2165),B=e(8870),Q=e(9721),F=e(4554),K=e(6375),V=e(2226),z=e(5096),G=e(2350),J=e(5869),X=e(7518),tt=e.n(X);const at=(0,P.Z)(W,[["render",M]]),et=at;tt()(W,"components",{QCard:I.Z,QList:v.Z,QItem:H.Z,QItemSection:x.Z,QDate:q.Z,QBtn:j.Z,QTooltip:B.Z,QBadge:Q.Z,QIcon:F.Z,QBtnGroup:K.Z,QBtnDropdown:V.Z,QAvatar:z.Z,QItemLabel:G.Z,QSeparator:J.Z});const rt=(0,r.aZ)({name:"Report",components:{ReportCalendar:et},data(){return{}},async created(){this.$root.setMeta({title:"Reports"})}});var nt=e(4379);const pt=(0,P.Z)(rt,[["render",d]]),dt=pt;tt()(rt,"components",{QPage:nt.Z,QCard:I.Z,QList:v.Z,QItem:H.Z,QItemSection:x.Z,QItemLabel:G.Z,QIcon:F.Z})}}]);