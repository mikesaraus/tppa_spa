"use strict";(self["webpackChunktppa_app"]=self["webpackChunktppa_app"]||[]).push([[13],{13:(e,t,a)=>{a.r(t),a.d(t,{default:()=>be});var o=a(83673);const r=(0,o.Uk)(" Dashboard "),i=(0,o.Uk)(" Payment System - Collection Dashboard "),s={class:"row full-width justify-center items-start"},n={class:"row items-center justify-end"},l=(0,o.Uk)(" Clear selected dates "),d=(0,o.Uk)(" Filter Transactions "),c={class:"text-weight-bold q-pb-xs"},h=(0,o.Uk)(" Charts Information "),u=(0,o._)("div",{class:"text-grey"},[(0,o.Uk)(" Charts are "),(0,o._)("b",null,"interactive"),(0,o.Uk)(" you can hover an item to view more information or click a labels to hide/show the value."),(0,o._)("br"),(0,o.Uk)("Draggable "),(0,o._)("b",null,"filters"),(0,o.Uk)(" are also available by default at the bottom-right. ")],-1),m={key:0},p={class:"text-grey text-caption text-italic"},f=(0,o.Uk)(" For more customized and detailed graphs/charts, please send a "),b=(0,o.Uk)("request"),_=[b],g=(0,o.Uk)(". ");function w(e,t,a,b,w,y){const v=(0,o.up)("q-icon"),P=(0,o.up)("q-item-label"),q=(0,o.up)("q-btn"),x=(0,o.up)("q-item-section"),$=(0,o.up)("q-item"),D=(0,o.up)("VEChart"),k=(0,o.up)("q-list"),S=(0,o.up)("q-card"),C=(0,o.up)("SelectUser"),Z=(0,o.up)("q-popup-proxy"),W=(0,o.up)("q-fab-action"),N=(0,o.up)("SelectBranch"),F=(0,o.up)("q-tooltip"),U=(0,o.up)("q-date"),B=(0,o.up)("q-fab"),T=(0,o.up)("q-page-sticky"),Y=(0,o.up)("q-linear-progress"),M=(0,o.up)("q-separator"),Q=(0,o.up)("q-card-section"),j=(0,o.up)("q-dialog"),z=(0,o.up)("q-page"),V=(0,o.Q2)("close-popup"),O=(0,o.Q2)("touch-pan");return(0,o.wg)(),(0,o.j4)(z,{class:"flex full-width"},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{flat:"",class:"row full-width justify-center items-start q-pb-xl q-pt-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{class:"col full-width q-gutter-y-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)($,{class:"row justify-center text-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{class:"col"},{default:(0,o.w5)((()=>[(0,o.Wm)(P,{class:"text-h4 text-primary row justify-center items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{name:"space_dashboard"}),r])),_:1}),(0,o.Wm)(P,{caption:""},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{flat:"",round:"",dense:"",size:"sm",icon:"info",class:"hover-text-primary",color:e.$root.app_settings.darkmode?"grey-8":"grey-4",onClick:t[0]||(t[0]=t=>e.qdialog_information=!e.qdialog_information)},null,8,["color"]),i])),_:1})])),_:1})])),_:1}),(0,o.Wm)($,{class:"flex flex-center full-width"},{default:(0,o.w5)((()=>[(0,o._)("div",s,[(0,o.Wm)(k,{class:"col row full-width full-height q-gutter-y-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)($,{class:"col-12",style:{height:"600px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{options:e.options_perdate,download:e.options_download,loading:e.loadingPerDate},null,8,["options","download","loading"])])),_:1}),(0,o.Wm)($,{class:"col-12",style:{height:"500px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{options:e.options_peruser,download:e.options_download,loading:e.loadingPerUser},null,8,["options","download","loading"])])),_:1}),(0,o.Wm)($,{class:"col-12 col-md-6",style:{height:"500px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{options:e.options_perpaymethod,download:{...e.options_download,position:"absolute-top-right"},loading:e.loadingPerPayMethod},null,8,["options","download","loading"])])),_:1}),(0,o.Wm)($,{class:"col-12 col-md-6",style:{height:"500px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{options:e.options_perbranch,download:{...e.options_download,position:"absolute-top-right"},loading:e.loadingPerBranch},null,8,["options","download","loading"])])),_:1})])),_:1})])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(T,{position:"bottom-right",offset:e.filterFabPos,style:{"z-index":"8"}},{default:(0,o.w5)((()=>[(0,o.wy)(((0,o.wg)(),(0,o.j4)(B,{unelevated:"",direction:"up",color:"primary",icon:"filter_list","active-icon":"filter_alt","vertical-actions-align":"right",ripple:{color:"secondary"}},{default:(0,o.w5)((()=>[e.$root.isTeller?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(W,{key:0,"label-position":"left",color:"primary",icon:"supervised_user_circle",label:"Filter User",class:"q-px-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{modelValue:e.qfilter_user,"onUpdate:modelValue":t[2]||(t[2]=t=>e.qfilter_user=t),"transition-show":"scale","transition-hide":"scale",offset:[250,-100],style:{"border-radius":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{class:"q-pa-md",style:{width:"300px","border-radius":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{rounded:"",outlined:"","use-input":"",autofocus:"",clearable:"",multiple:"",behavior:"dialog","clear-icon":"clear","display-value":e.filter.user&&e.filter.user.length?`Selected ${e.filter.user.length} User${e.filter.user.length>1?"s":""}`:"Showing All Users",modelValue:e.filter.user,"onUpdate:modelValue":t[1]||(t[1]=t=>e.filter.user=t)},null,8,["display-value","modelValue"])])),_:1})])),_:1},8,["modelValue"])])),_:1})),e.$root.isLogin&&this.$root.accessLevel<2?((0,o.wg)(),(0,o.j4)(W,{key:1,"label-position":"left",color:"secondary",icon:"business_center",label:"Filter Branch",class:"q-px-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{modelValue:e.qfilter_branch,"onUpdate:modelValue":t[4]||(t[4]=t=>e.qfilter_branch=t),"transition-show":"scale","transition-hide":"scale",offset:[250,-100],style:{"border-radius":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{class:"q-pa-md",style:{width:"300px","border-radius":"40px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{rounded:"",outlined:"","use-input":"",autofocus:"",clearable:"",multiple:"","clear-icon":"clear","input-debounce":"0",behavior:"dialog","display-value":e.filter.branch&&e.filter.branch.length?`Selected ${e.filter.branch.length} Branch${e.filter.branch.length>1?"es":""}`:"Showing All Branches",modelValue:e.filter.branch,"onUpdate:modelValue":t[3]||(t[3]=t=>e.filter.branch=t)},null,8,["display-value","modelValue"])])),_:1})])),_:1},8,["modelValue"])])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(W,{"label-position":"left",color:"accent",icon:"event",label:"Filter Date",class:"q-px-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{modelValue:e.qfilter_date,"onUpdate:modelValue":t[7]||(t[7]=t=>e.qfilter_date=t),breakpoint:700,"transition-show":"scale","transition-hide":"scale",style:{"border-radius":"15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{range:"",multiple:"","today-btn":"",color:"primary","years-in-month-view":"",events:e.cal_events,modelValue:e.filter.date,"onUpdate:modelValue":t[6]||(t[6]=t=>e.filter.date=t),"event-color":"primary",style:{"border-radius":"15px"},landscape:e.$q.screen.gt.sm,options:t=>t&&t<=e.date.formatDate(new Date,"YYYY/MM/DD"),"navigation-min-year-month":e.nmin_ym,"navigation-max-year-month":e.nmax_ym},{default:(0,o.w5)((()=>[(0,o._)("div",n,[(0,o.Wm)(q,{flat:"",round:"",icon:"clear_all",color:"grey-6 hover-text-primary",onClick:t[5]||(t[5]=t=>e.filter.date=[])},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{offset:[10,10],self:"center end",anchor:"center start"},{default:(0,o.w5)((()=>[l])),_:1})])),_:1}),(0,o.wy)((0,o.Wm)(q,{flat:"",rounded:"",label:"Close",color:"primary"},null,512),[[V]])])])),_:1},8,["events","modelValue","landscape","options","navigation-min-year-month","navigation-max-year-month"])])),_:1},8,["modelValue"])])),_:1})])),_:1})),[[O,e.moveFab,void 0,{prevent:!0,mouse:!0}]]),(0,o.Wm)(F,{delay:500,offset:[10,10],self:"center end",anchor:"center start","transition-show":"scale","transition-hide":"scale",class:"text-body2 bg-primary"},{default:(0,o.w5)((()=>[d])),_:1})])),_:1},8,["offset"]),(0,o.Wm)(j,{seamless:"",position:"bottom",modelValue:e.qdialog_information,"onUpdate:modelValue":t[10]||(t[10]=t=>e.qdialog_information=t),"transition-duration":1e3,"transition-show":"slide-up","transition-hide":"slide-down",style:{"z-index":"9"}},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{style:{width:"450px","border-radius":"15px 15px 0 0"}},{default:(0,o.w5)((()=>[(0,o.Wm)(Y,{value:1,color:"primary"}),(0,o.Wm)(Q,{class:"row items-center no-wrap"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o._)("div",c,[(0,o.Wm)(v,{name:"info",size:"sm",color:"primary"}),h,(0,o.Wm)(q,{flat:"",round:"",icon:"close",size:"sm",class:"text-grey absolute-top-right q-ma-sm hover-text-accent",onClick:t[8]||(t[8]=t=>e.qdialog_information=!1)})]),u,e.$root.isTeller?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",m,[(0,o.Wm)(M,{class:"q-my-sm"}),(0,o._)("div",p,[f,(0,o.wy)(((0,o.wg)(),(0,o.iD)("span",{class:"text-primary cursor-pointer text-weigth-medium",onClick:t[9]||(t[9]=()=>{e.$root.dialogFeedbackOpt={type:{label:"Request Feature",icon:"system_update_alt"}},e.$root.dialogFormFeedback=!e.$root.dialogFormFeedback})},_)),[[V]]),g])]))])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var y=a(62323);function v(e,t,a,r,i,s){const n=(0,o.up)("q-tooltip"),l=(0,o.up)("q-btn"),d=(0,o.up)("EChart"),c=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(c,{class:"echarts-rounded full-width full-height",style:(0,y.j5)(e.$root.app_settings.darkmode?"background-color: #100c2a":"")},{default:(0,o.w5)((()=>[e.download?((0,o.wg)(),(0,o.j4)(l,{key:0,flat:"",round:"",style:{"z-index":"1"},icon:`${e.download_icon}`,size:`${e.download_size}`,class:(0,y.C_)(`${e.download_position} ${e.download_class}`),onClick:t[0]||(t[0]=t=>e.downloadAction())},{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,y.zw)(e.download_tooltip),1)])),_:1})])),_:1},8,["icon","size","class"])):(0,o.kq)("",!0),(0,o.Wm)(d,{ref:e.chartRef,loading:e.loading,"manual-update":!0,autoresize:!0,theme:e.$root.app_settings.darkmode?"dark":"light","loading-options":e.loadingOptions},null,8,["loading","theme","loading-options"])])),_:1},8,["style"])}a(65363),a(97768);var P=a(50763),q=a(88430),x=a(31624),$=a(88027),D=a(69409),k=a(92826),S=a(10546),C=a(23825),Z=a(20187),W=a(60579),N=a(17394),F=a(11185),U=a(48825),B=a(26386);(0,P.D)([q.N,x.N,$.N,D.N,k.N,S.N,C.N,Z.N,W.N]);const T=(0,o.aZ)({name:"VEChart",components:{EChart:N.ZP},provide:{[N.Hm]:{renderer:"svg"}},data(){return{$q:(0,U.Z)(),chartRef:(0,F.Z)(),loading_default:{fontSize:12,showSpinner:!0,text:"Loading data...",maskColor:"rgba(255, 255, 255, 0.8)",spinnerRadius:10,lineWidth:5,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",color:"#22a6ee",textColor:"#000"},loading_add_dark:{maskColor:"rgba(16, 12, 42, 0.8)",textColor:"#c0c0c0"},download_default_class:"text-grey-6 q-ma-sm hover-text-primary"}},props:{options:{type:Object},loading:{type:Boolean,default:!1},download:{type:Object}},computed:{echart(){return this.$refs[this.chartRef]},loadingOptions(){return this.$root.app_settings.darkmode?{...this.loading_default,...this.loading_add_dark}:this.loading_default},download_position(){return(0,B.Sw)(this.download,"position","absolute-top-right")},download_class(){return((0,B.Sw)(this.download,"extend_class")?this.download_default_class:"")+" "+(0,B.Sw)(this.download,"class","")},download_size(){return(0,B.Sw)(this.download,"size",this.$q.screen.gt.sm?"md":"sm")},download_icon(){return(0,B.Sw)(this.download,"icon","download")},download_tooltip(){return(0,B.Sw)(this.download,"tooltip","Download")}},watch:{options:{async handler(e){this.echart&&this.echart.setOption(e)},deep:!0}},mounted(){this.echart&&this.echart.setOption(this.options)},methods:{async downloadAction(e,t,a){try{e=this.echart,t=(0,B.Sw)(this.options,"title.text","")+"_"+String(Date.now());t=t.replaceAll(" ","_"),(0,B.dD)(e,t,a)}catch(o){}}}});var Y=a(74260),M=a(10151),Q=a(2165),j=a(5363),z=a(7518),V=a.n(z);const O=(0,Y.Z)(T,[["render",v]]),A=O;V()(T,"components",{QCard:M.Z,QBtn:Q.Z,QTooltip:j.Z});var L=a(93617),E=a(25616),R=a(49405),I=a(82130),H=a(86081),X=a(92159);a(57961);const G=(0,o.aZ)({name:"Dashboard",components:{VEChart:A,SelectUser:H.Z,SelectBranch:X.Z},data(){return{$q:(0,U.Z)(),date:E.ZP,checker:B.ZZ,qdialog_information:!0,filterFabPos:[18,18],qfilter_date:!1,qfilter_user:!1,qfilter_branch:!1,filter:{date:[],branch:[],user:[]},nmin_ym:null,nmax_ym:null,cal_events:[],data:[],dates:[],options_download:{position:"absolute-bottom-right",icon:"download",class:"q-ma-sm text-grey-6 hover-text-primary",extend_class:!1},requestData:null,generatePerDate:null,generatePerUser:null,generatePerPayMethod:null,generatePerBranch:null,loadingPerDate:!0,loadingPerUser:!0,loadingPerPayMethod:!0,loadingPerBranch:!0,options_perdate:{aria:{show:!0},title:{text:"Daily Transactions",left:"left"},legend:{orient:"horizontal",left:"right",data:["Cash","Check","Debit","Total"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},tooltip:{trigger:"axis",showContent:!0},series:[{name:"Cash",type:"line",smooth:!1,seriesLayoutBy:"row",data:[],emphasis:{focus:"series"}},{name:"Check",type:"line",smooth:!1,seriesLayoutBy:"row",data:[],emphasis:{focus:"series"}},{name:"Debit",type:"line",smooth:!1,seriesLayoutBy:"row",data:[],emphasis:{focus:"series"}},{name:"Total",type:"line",smooth:!1,seriesLayoutBy:"row",data:[],emphasis:{focus:"series"}}]},options_peruser:{aria:{show:!0},title:{text:"Transactions Per User",left:"center"},tooltip:{trigger:"item",width:"100px",formatter:(e,t)=>{var a=`<i style="color: ${e.color}" class="notranslate material-icons q-icon" aria-hidden="true" role="img">circle</i> `;return a+=`<b>${(0,B.Sw)(e,"data.full_name","")}</b> #${e.name}<br/>`,a+=`<i>@${(0,B.Sw)(e,"data.username","")} (<i class="notranslate material-icons q-icon" aria-hidden="true" role="presentation">place</i> ${(0,B.Sw)(e,"data.branch_location","")})<i/><br/>`,a+='<hr class="q-separator q-separator--horizontal q-my-sm" aria-orientation="horizontal">',a+=`<b>${(0,B.lb)(e.value,0)}</b> Transactions (<b>${e.percent}%</b>)<br/>`,a+=`Amount Received: <b>P</b>${(0,B.lb)((0,B.Sw)(e,"data.amount_received"),0)}<br/>`,a}},legend:{orient:"horizontal",left:"center",padding:45,data:[],formatter:e=>this.users[e]?`${(0,B.Sw)(this.users,e+".firstname","")} ${(0,B.Sw)(this.users,e+".lastname","")}`:e},series:[{name:"User Transaction Count",type:"pie",radius:["70%","30%"],center:["50%","60%"],data:[],emphasis:{focus:"series",itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:!1}]},options_perpaymethod:{aria:{show:!0},title:{text:"Payment Methods",left:"center"},tooltip:{trigger:"item",width:"100px",formatter:(e,t)=>{var a=`<i style="color: ${e.color}" class="notranslate material-icons q-icon" aria-hidden="true" role="img">circle</i> `;return a+=`<b>${e.name} Payment${e.value?"s":""}</b><br/>`,a+=`<b>${(0,B.lb)(e.value,0)}</b> Transactions (<b>${e.percent}%</b>)<br/>`,a+='<hr class="q-separator q-separator--horizontal q-my-sm" aria-orientation="horizontal">',a+=`Transaction Fee: <b>P</b>${(0,B.lb)((0,B.Sw)(e,"data.trans_fee",0))}<br/>`,a+=`Amount Paid: <b>P</b>${(0,B.lb)((0,B.Sw)(e,"data.amount_paid",0))}<br/>`,a+=`Amount Received: <b>P</b>${(0,B.lb)((0,B.Sw)(e,"data.amount_received",0))}`,a}},legend:{orient:"horizontal",left:"center",padding:45,data:[]},series:[{name:"Transaction Count",type:"pie",radius:"55%",center:["50%","60%"],data:[],emphasis:{focus:"self",itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{formatter:e=>`${e.name} (${e.percent}%)`}}]},options_perbranch:{aria:{show:!0},title:{text:"Transactions Per Branch",left:"center"},tooltip:{trigger:"item",width:"100px",formatter:(e,t)=>{var a=`<i style="color: ${e.color}" class="notranslate material-icons q-icon" aria-hidden="true" role="img">circle</i> `;return a+=`<b>${e.name}${String(e.name).toLowerCase().endsWith("branch")?"":" Branch"}</b><br/>`,a+=`<b>${(0,B.lb)(e.value,0)}</b> Transactions (<b>${e.percent}%</b>)<br/>`,a+='<hr class="q-separator q-separator--horizontal q-my-sm" aria-orientation="horizontal">',a+=`Transaction Fee: <b>P</b>${(0,B.lb)((0,B.Sw)(e,"data.trans_fee",0))}<br/>`,a+=`Amount Paid: <b>P</b>${(0,B.lb)((0,B.Sw)(e,"data.amount_paid",0))}<br/>`,a+=`Amount Received: <b>P</b>${(0,B.lb)((0,B.Sw)(e,"data.amount_received",0))}`,a}},legend:{orient:"vertical",left:"left",data:[]},series:[{name:"Branch Transaction Count",type:"pie",radius:"55%",center:["50%","60%"],data:[],emphasis:{focus:"self",itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{formatter:e=>`${e.name}`}}]}}},watch:{["$q.screen"]:{async handler(e){e.width-50<this.filterFabPos[0]&&(this.filterFabPos[0]=e.width-50),e.height-100<this.filterFabPos[1]&&(this.filterFabPos[1]=e.height-100)},deep:!0},filter:{async handler(e){this.requestData()},deep:!0}},computed:{...(0,L.rn)("user",["authenticated","users"]),loading(){var e=[this.loadingPerDate,this.loadingPerUser,this.loadingPerPayMethod,this.loadingPerBranch];return!!e.filter((e=>!0===e)).length}},async beforeMount(){this.$root.setMeta({title:"Dashboard"}),this.generatePerDate=(0,R.Z)(this.generatePerDateNow,2e3),this.generatePerUser=(0,R.Z)(this.generatePerUserNow,2e3),this.generatePerPayMethod=(0,R.Z)(this.generatePerPayMethodNow,2e3),this.generatePerBranch=(0,R.Z)(this.generatePerBranchNow,2e3),this.requestData=(0,R.Z)(this.requestDataNow,2e3);const e=new Date;if(this.nmin_ym="2000/01",this.nmax_ym=E.ZP.formatDate(e,"YYYY/MM"),this.cal_events.push(E.ZP.formatDate(e,"YYYY/MM/DD")),this.$root.isTeller){const t=(0,B.Sw)(this.authenticated,"data");t&&this.filter.user.push(t),this.filter.date.push(E.ZP.formatDate(e,"YYYY/MM/DD"))}else 2==this.$root.accessLevel&&this.filter.branch.push((0,B.Sw)(this.authenticated,"data.branch_location"));this.requestData()},methods:{...(0,L.nv)("transaction",["getAllTransactions"]),async requestDataNow(e){e||(e=this.filter);let t=[];e.date&&e.date.forEach(((e,a)=>{t.push(`${(0,B.JH)(e)&&e.from?e.from:e||""}${e.to?"::"+E.ZP.formatDate(new Date(e.to).setHours(24,0,0,0),"YYYY/MM/DD"):""}`)}));let a=e.user?e.user.map((e=>e.userid)):[],o=e.branch||[],r=[];t.length&&r.push(`date_paid=${t.join("||")}`),a.length&&r.push(`receiver_id=${a.join("||")}`),o.length&&r.push(`branch_location=${o.join("||")}`);var i=await this.getAllTransactions({query:r});i=(0,B.Sw)(i,"response.data.data",[]),i?(i.length||this.$q.notify({message:"No transaction found.",timeout:5e3,type:"negative"}),this.data=i,this.dates=(0,B.eQ)(i.map((e=>E.ZP.formatDate(e.date_paid,"YYYY/MM/DD")))),this.generatePerDate(),this.generatePerUser(),this.generatePerPayMethod(),this.generatePerBranch()):this.$q.notify({message:"Failed to get data.",timeout:3e3,type:"negative"})},async generatePerDateNow(e,t){this.loadingPerDate=!0,e=e||this.data,t=t||this.options_perdate;var a={};e.forEach((e=>{var t=E.ZP.formatDate(e.date_paid,"YYYY/MM/DD");const o=(e,t)=>String(e||"").toLowerCase()==String(t||" ").toLowerCase();a[t]?(a[t].Cash+=o(e.paymethod,"cash")?Number(e.amount_received||0):0,a[t].Check+=o(e.paymethod,"check")?Number(e.amount_received||0):0,a[t].Debit+=o(e.paymethod,"debit")?Number(e.amount_received||0):0,a[t].Total+=Number(e.amount_received||0)):a[t]={Cash:o(e.paymethod,"cash")?Number(e.amount_received||0):0,Check:o(e.paymethod,"check")?Number(e.amount_received||0):0,Debit:o(e.paymethod,"debit")?Number(e.amount_received||0):0,Total:Number(e.amount_received||0)}})),t.xAxis.data=Object.values(this.dates);var o=t.series.map((e=>e.name));return t.series[o.indexOf("Cash")].data=Object.values(a).map((e=>e.Cash)),t.series[o.indexOf("Check")].data=Object.values(a).map((e=>e.Check)),t.series[o.indexOf("Debit")].data=Object.values(a).map((e=>e.Debit)),t.series[o.indexOf("Total")].data=Object.values(a).map((e=>e.Total)),this.loadingPerDate=!1,this.options_perdate=t,t},async generatePerUserNow(e,t){this.loadingPerUser=!0,e=e||this.data,t=t||this.options_peruser;var a={};return e.forEach((e=>{a[e.receiver_id]?(a[e.receiver_id].value+=1,a[e.receiver_id].amount_received+=Number(e.amount_received||0)):a[e.receiver_id]={name:e.receiver_id,value:1,amount_received:Number(e.amount_received||0),branch_location:(0,B.Sw)(this.users,`${e.receiver_id}.branch_location`),username:(0,B.Sw)(this.users,`${e.receiver_id}.username`),full_name:(0,B.Sw)(this.users,`${e.receiver_id}.firstname`)+" "+(0,B.Sw)(this.users,`${e.receiver_id}.lastname`)}})),t.legend.data=(0,B.eQ)(e,"receiver_id").map((e=>e.receiver_id)),t.series[t.series.length-1].data=Object.values(a),this.loadingPerUser=!1,this.options_peruser=t,t},async generatePerPayMethodNow(e,t){this.loadingPerPayMethod=!0,e=e||this.data,t=t||this.options_perpaymethod;var a={};return e.forEach((e=>{a[e.paymethod]?(a[e.paymethod].value+=1,a[e.paymethod].amount_received+=Number(e.amount_received||0),a[e.paymethod].amount_paid+=Number(e.amount_paid||0),a[e.paymethod].trans_fee+=Number(e.trans_fee||0)):a[e.paymethod]={name:e.paymethod,value:1,amount_received:Number(e.amount_received||0),amount_paid:Number(e.amount_paid||0),trans_fee:Number(e.trans_fee||0)}})),t.legend.data=(0,B.eQ)(e,"paymethod").map((e=>e.paymethod)),t.series[t.series.length-1].data=Object.values(a),this.loadingPerPayMethod=!1,this.options_perpaymethod=t,t},async generatePerBranchNow(e,t){this.loadingPerBranch=!0,e=e||this.data,t=t||this.options_perbranch,this.$root.accessLevel>0&&(t.title.text=this.$root.isTeller?"Your Transactions Per Branch":"Transactions for "+I.ZP.capitalize((0,B.Sw)(this.authenticated,"data.branch_location","This Branch")));var a={};return e.forEach((e=>{a[e.branch_location]?(a[e.branch_location].value+=1,a[e.branch_location].amount_received+=Number(e.amount_received||0),a[e.branch_location].amount_paid+=Number(e.amount_paid||0),a[e.branch_location].trans_fee+=Number(e.trans_fee||0)):a[e.branch_location]={name:e.branch_location,value:1,amount_received:Number(e.amount_received||0),amount_paid:Number(e.amount_paid||0),trans_fee:Number(e.trans_fee||0)}})),t.legend.data=(0,B.eQ)(e,"branch_location").map((e=>e.branch_location)),t.series[t.series.length-1].data=Object.values(a),this.loadingPerBranch=!1,this.options_perbranch=t,t},async moveFab(e){this.draggingFab=!0!==e.isFirst&&!0!==e.isFinal,this.filterFabPos=[(window.innerWidth-50>this.filterFabPos[0]||e.delta.x>0)&&(this.filterFabPos[0]>-15||e.delta.x<0)?this.filterFabPos[0]-e.delta.x:this.filterFabPos[0],(window.innerHeight-100>this.filterFabPos[1]||e.delta.y>0)&&(this.filterFabPos[1]>-15||e.delta.y<0)?this.filterFabPos[1]-e.delta.y:this.filterFabPos[1]]}}});var J=a(24379),K=a(27011),ee=a(83414),te=a(52035),ae=a(2350),oe=a(24554),re=a(21007),ie=a(39200),se=a(39975),ne=a(83944),le=a(85626),de=a(46778),ce=a(51598),he=a(25589),ue=a(65869),me=a(18406),pe=a(60677);const fe=(0,Y.Z)(G,[["render",w]]),be=fe;V()(G,"components",{QPage:J.Z,QCard:M.Z,QList:K.Z,QItem:ee.Z,QItemSection:te.Z,QItemLabel:ae.Z,QIcon:oe.Z,QBtn:Q.Z,QPageSticky:re.Z,QFab:ie.Z,QFabAction:se.Z,QPopupProxy:ne.Z,QDate:le.Z,QTooltip:j.Z,QDialog:de.Z,QLinearProgress:ce.Z,QCardSection:he.Z,QSeparator:ue.Z}),V()(G,"directives",{TouchPan:me.Z,ClosePopup:pe.Z})}}]);