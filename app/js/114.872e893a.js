(self["webpackChunktppa_app"]=self["webpackChunktppa_app"]||[]).push([[114],{5114:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ga});var n=a(3673),s=a(2323),o=a(8880);const l=(0,n.Uk)(" New Transaction "),i=(0,n.Uk)(" Each transaction is subjected to "),r=(0,n.Uk)("Cancel"),c=(0,n.Uk)("Save"),d=(0,n.Uk)(" convenience fee. "),u=(0,n.Uk)(" Process multiple transactions easily. "),p={class:"self-start text-subtitle1 text-grey-6 q-mt-sm"},m={class:"col-lg-3 col-md-3 col-sm-12 col-xs-12"},_={class:"col-lg-3 col-md-3 col-sm-12 col-xs-12"},h={class:"col-lg-3 col-md-3 col-sm-12 col-xs-12"},f=(0,n.Uk)(" More Details "),w={class:"text-h6 text-primary q-mb-sm"},y=(0,n.Uk)(" Payment Option "),g={class:"row justify-center items-center q-gutter-x-sm full-width"},b={class:"col-4 col-lg-4 col-md-4 col-sm-12 col-xs-12"},k={key:0,class:"text-subtitle2"},v=(0,n.Uk)(" Change: "),C=(0,n.Uk)(" Check must have exact amount! "),x={class:"col-4 col-lg-4 col-md-4 col-sm-12 col-xs-12"},q=(0,n.Uk)(" Check Payment "),W={key:0,class:"row justify-center items-center q-gutter-x-xs full-width"},T=(0,n.Uk)(" Check Payment "),$={class:"col-md-auto col-xs-12"},A={class:"col-md-auto col-xs-12"},U={class:"row items-center justify-end"},S={class:"col-md-auto col-xs-12"},P={class:"col-md-auto col-xs-12"},D=(0,n.Uk)("Close"),I={class:"text-h6 text-accent"},Z=(0,n.Uk)(" Confirm Action"),j=(0,n.Uk)(" Add New Data "),V={class:"text-weight-bold"},M={class:"text-h6"},R={class:"text-grey"},z=(0,n.Uk)("Reset All"),O=(0,n.Uk)("Hide");function F(e,t,a,F,Q,Y){const N=(0,n.up)("q-btn"),K=(0,n.up)("q-item-label"),E=(0,n.up)("q-icon"),B=(0,n.up)("q-tooltip"),L=(0,n.up)("q-input"),H=(0,n.up)("q-popup-edit"),X=(0,n.up)("q-badge"),G=(0,n.up)("q-item-section"),J=(0,n.up)("q-item"),ee=(0,n.up)("q-date"),te=(0,n.up)("q-popup-proxy"),ae=(0,n.up)("SelectCheckType"),ne=(0,n.up)("q-card"),se=(0,n.up)("q-form"),oe=(0,n.up)("TransactionsTable"),le=(0,n.up)("q-list"),ie=(0,n.up)("q-page"),re=(0,n.up)("q-space"),ce=(0,n.up)("q-bar"),de=(0,n.up)("q-card-section"),ue=(0,n.up)("q-separator"),pe=(0,n.up)("q-card-actions"),me=(0,n.up)("q-dialog"),_e=(0,n.up)("q-fab-action"),he=(0,n.up)("q-fab"),fe=(0,n.up)("q-page-sticky"),we=(0,n.up)("q-linear-progress"),ye=(0,n.up)("MoreTransInfo"),ge=(0,n.Q2)("close-popup"),be=(0,n.Q2)("touch-pan");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(ie,{class:"flex full-width full-height"},{default:(0,n.w5)((()=>[(0,n.Wm)(ne,{flat:"",class:"row full-width justify-center items-start q-pb-xl q-pt-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(le,{class:"col full-width q-gutter-y-sm"},{default:(0,n.w5)((()=>[(0,n.Wm)(J,{class:"col text-center"},{default:(0,n.w5)((()=>[(0,n.Wm)(G,null,{default:(0,n.w5)((()=>[(0,n.Wm)(K,{class:"text-h4 text-primary"},{default:(0,n.w5)((()=>[(0,n.Wm)(N,{flat:"",round:"",dense:"",size:"lg",color:"primary",icon:"verified_user",disable:e.form_isprocessing,onClick:t[0]||(t[0]=t=>e.seamless_card=!e.seamless_card)},null,8,["disable"]),l])),_:1}),e.$root.transactions_fee>0||e.$root.isAdmin?((0,n.wg)(),(0,n.j4)(K,{key:0,caption:""},{default:(0,n.w5)((()=>[i,(0,n.Wm)(X,{class:"cursor-pointer",color:e.$root.darkModeStatus?"grey-9":"grey-6",onClick:t[3]||(t[3]=t=>e.local_convenience_fee=Number(e.$root.transactions_fee).toFixed(2))},{default:(0,n.w5)((()=>[(0,n.Uk)(" PHP "+(0,s.zw)(Number(e.$root.transactions_fee).toFixed(2))+" ",1),e.$root.isAdmin?((0,n.wg)(),(0,n.j4)(H,{key:0,cover:"",modelValue:e.local_convenience_fee,"onUpdate:modelValue":t[1]||(t[1]=t=>e.local_convenience_fee=t),title:"Convenience Fee",onSave:t[2]||(t[2]=(t,a)=>e.updateConvenienceFee(t,a)),style:{"border-radius":"15px"}},{default:(0,n.w5)((e=>[(0,n.Wm)(L,{dense:"",counter:"",autofocus:"",type:"number",hint:"Update Convenience Fee",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,modelModifiers:{number:!0},onKeyup:(0,o.D2)(e.set,["enter"])},{prepend:(0,n.w5)((()=>[(0,n.Wm)(E,{name:"php",size:"lg"})])),append:(0,n.w5)((()=>[(0,n.Wm)(N,{flat:"",round:"",dense:"",color:"negative",icon:"cancel",onClick:(0,o.iM)(e.cancel,["stop"])},{default:(0,n.w5)((()=>[(0,n.Wm)(B,null,{default:(0,n.w5)((()=>[r])),_:1})])),_:2},1032,["onClick"]),(0,n.Wm)(N,{flat:"",round:"",dense:"",color:"positive",icon:"check_circle",onClick:(0,o.iM)(e.set,["stop"]),disable:!1===e.validate(e.value)||e.initialValue===e.value},{default:(0,n.w5)((()=>[(0,n.Wm)(B,null,{default:(0,n.w5)((()=>[c])),_:1})])),_:2},1032,["onClick","disable"])])),_:2},1032,["modelValue","onUpdate:modelValue","onKeyup"])])),_:1},8,["modelValue"])):(0,n.kq)("",!0)])),_:1},8,["color"]),d])),_:1})):((0,n.wg)(),(0,n.j4)(K,{key:1,caption:""},{default:(0,n.w5)((()=>[u])),_:1}))])),_:1})])),_:1}),(0,n.Wm)(J,{class:"flex flex-center text-center"},{default:(0,n.w5)((()=>[(0,n.Wm)(G,{style:{"max-width":"80vw",width:"500px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(se,{autofocus:"",class:"full-width",ref:e.form_conf.ref,onSubmit:e.submitTransactionsForm},{default:(0,n.w5)((()=>[(0,n.Wm)(o.W3,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut slow"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(Object.keys(e.local_transactions),((t,a)=>((0,n.wg)(),(0,n.iD)("div",{key:`${t}`,class:"row justify-center items-center q-gutter-x-md"},[(0,n._)("div",p,[(0,n.Wm)(N,{flat:"",push:"",round:"",icon:"cancel",class:"button_exit",ripple:{color:"primary"},disable:e.form_isprocessing,onClick:a=>e.removeTransInput(t),color:e.$root.darkModeStatus?"grey-9":"grey-3"},{default:(0,n.w5)((()=>[(0,n.Wm)(X,{floating:"",color:"primary",rounded:""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(`#${a+1}`),1)])),_:2},1024)])),_:2},1032,["disable","onClick","color"]),(0,n.Wm)(B,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(`Delete #${a+1}`),1)])),_:2},1024)]),(0,n._)("div",m,[(0,n.Wm)(L,{rounded:"",autofocus:"",clearable:"",debounce:1e3,"clear-icon":"clear",standout:"bg-primary text-white","bg-color":e.local_transactions[t].error?"negative":"","input-class":`${e.form_conf.inputclass} `+(e.local_transactions[t].error?"text-grey-3":""),readonly:e.form_isprocessing,modelValue:e.local_transactions[t].accnt_id,"onUpdate:modelValue":[a=>e.local_transactions[t].accnt_id=a,a=>e.searchAccountID(a,t)],label:"Account ID",mask:"### - #### - ####",ref_for:!0,ref:`${t}_accnt_id`,"label-color":e.local_transactions[t].error||e.$root.darkModeStatus?"":"grey-9",tabindex:e.getTransIndex(t,a,1),onKeyup:a=>e.modKey(a,{trans_code:t}),rules:[t=>e.checker.input(e.inputs_empty||11===e.cleanAccountID(t).length||"",500)],onFocus:a=>e.changeInputFocus(`${t}_accnt_id`)},{prepend:(0,n.w5)((()=>[(0,n.Wm)(E,{name:"numbers"})])),_:2},1032,["bg-color","input-class","readonly","modelValue","onUpdate:modelValue","label-color","tabindex","onKeyup","rules","onFocus"])]),(0,n._)("div",_,[(0,n.Wm)(L,{rounded:"",clearable:"",debounce:1e3,"clear-icon":"clear",standout:"bg-primary text-white","bg-color":e.local_transactions[t].error?"negative":"","input-class":`${e.form_conf.inputclass} `+(e.local_transactions[t].error?"text-grey-3":""),readonly:e.form_isprocessing,modelValue:e.local_transactions[t].accnt_name,"onUpdate:modelValue":a=>e.local_transactions[t].accnt_name=a,label:"Account Name","label-color":e.local_transactions[t].error||e.$root.darkModeStatus?"":"grey-9",ref_for:!0,ref:`${t}_accnt_name`,tabindex:e.getTransIndex(t,a,2),onKeyup:a=>e.modKey(a,{trans_code:t}),rules:[t=>e.checker.input(!!t||e.inputs_empty||"",500)],onFocus:a=>e.changeInputFocus(`${t}_accnt_name`)},{prepend:(0,n.w5)((()=>[(0,n.Wm)(E,{name:"person"})])),_:2},1032,["bg-color","input-class","readonly","modelValue","onUpdate:modelValue","label-color","tabindex","onKeyup","rules","onFocus"])]),(0,n._)("div",h,[(0,n.Wm)(L,{rounded:"",clearable:"",debounce:100,"clear-icon":"clear",type:"number",standout:"bg-primary text-white","bg-color":e.local_transactions[t].error?"negative":"","input-class":`${e.form_conf.inputclass} `+(e.local_transactions[t].error?"text-grey-3":""),readonly:e.form_isprocessing,modelValue:e.local_transactions[t].amount,"onUpdate:modelValue":a=>e.local_transactions[t].amount=a,modelModifiers:{number:!0},label:"Amount Due","label-color":e.local_transactions[t].error||e.$root.darkModeStatus?"":"grey-9",ref_for:!0,ref:`${t}_amount`,tabindex:e.getTransIndex(t,a,3),onKeyup:a=>e.modKey(a,{trans_code:t}),rules:[t=>e.checker.input(t&&t>0||e.inputs_empty||"",500)],onFocus:a=>e.changeInputFocus(`${t}_amount`)},{prepend:(0,n.w5)((()=>[(0,n.Wm)(E,{name:"account_balance_wallet"})])),append:(0,n.w5)((()=>[(0,n.Wm)(E,{name:"php",size:"md"})])),_:2},1032,["bg-color","input-class","readonly","modelValue","onUpdate:modelValue","label-color","tabindex","onKeyup","rules","onFocus"])]),(0,n._)("div",{class:(0,s.C_)(["self-start text-subtitle1 text-grey-6",e.$q.screen.gt.sm?"q-mt-sm":""])},[(0,n.Wm)(N,{flat:"",push:"",round:"",class:"hover-text-primary",ripple:{color:"primary"},color:e.$root.darkModeStatus?"grey-9":"grey-3",icon:e.$q.screen.gt.sm?"more_vert":"more_horiz",style:(0,s.j5)(e.$q.screen.lt.md?"top: -20px":""),disable:e.form_isprocessing||!e.local_transactions[t].accnt_id,onClick:()=>{e.dialogMoreDetails=!e.dialogMoreDetails,e.selectedTrans=t}},null,8,["color","icon","style","disable","onClick"]),e.local_transactions[t].accnt_id?((0,n.wg)(),(0,n.j4)(B,{key:0,offset:e.$q.screen.gt.sm?[10,10]:[10,30],anchor:e.$q.screen.gt.sm?"bottom middle":"top middle",self:e.$q.screen.gt.sm?"top middle":"bottom middle"},{default:(0,n.w5)((()=>[f])),_:1},8,["offset","anchor","self"])):(0,n.kq)("",!0)],2),e.local_transactions[t].error?((0,n.wg)(),(0,n.j4)(B,{key:0,anchor:"top middle",self:"bottom middle",offset:[10,10],class:"bg-negative"},{default:(0,n.w5)((()=>[(0,n.Wm)(E,{name:"block",size:"13px"}),(0,n.Uk)(" "+(0,s.zw)(e.local_transactions[t].error),1)])),_:2},1024)):(0,n.kq)("",!0)])))),128))])),_:1}),(0,n.Wm)(o.uT,{appear:"","enter-active-class":"animated fadeIn slow","leave-active-class":"animated fadeOut slow"},{default:(0,n.w5)((()=>[e.inputs_empty?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",{key:0,class:(0,s.C_)(["row justify-center items-top full-width",e.$q.screen.gt.sm?"q-gutter-x-md":""])},[(0,n.Wm)(ne,{flat:"",key:"payment_option_check",class:"col"},{default:(0,n.w5)((()=>[(0,n._)("div",w,[(0,n.Wm)(E,{name:"payments",size:"sm",color:"primary"}),y]),(0,n.Wm)(o.uT,{appear:"","enter-active-class":"animated fadeIn slow","leave-active-class":"animated fadeOut slow"},{default:(0,n.w5)((()=>[(0,n._)("div",g,[(0,n._)("div",b,[(0,n.Wm)(L,{rounded:"",outlined:"",clearable:"",debounce:0,"clear-icon":"clear",type:"number","input-class":e.form_conf.inputclass,readonly:e.form_isprocessing||e.inputs_empty||e.disableAmountReceived,modelValue:e.local_trans_payment.amount_received,"onUpdate:modelValue":t[4]||(t[4]=t=>e.local_trans_payment.amount_received=t),modelModifiers:{number:!0},label:"Amount Received",tabindex:e.getTransIndex("payment_options",1,1),onKeyup:t[5]||(t[5]=t=>e.modKey(t)),onFocus:t[6]||(t[6]=()=>{!e.local_trans_payment.amount_received&&e.local_trans_options.total_amount&&(e.local_trans_payment.amount_received=e.local_trans_options.total_amount)}),rules:[t=>e.checker.input(e.validateAmountReceived(),500)]},{prepend:(0,n.w5)((()=>[(0,n.Wm)(E,{name:"payment"})])),append:(0,n.w5)((()=>[e.local_trans_payment.amount_received&&e.local_trans_options.total_amount?((0,n.wg)(),(0,n.iD)("div",k,[(0,n.Wm)(E,{color:(!0===e.validateAmountReceived()||!e.payViaCheck)&&e.transactionChange>=0?"primary":"negative",name:(!0===e.validateAmountReceived()||!e.payViaCheck)&&e.transactionChange>=0?"done_outline":"warning",size:"md"},null,8,["color","name"]),v,(0,n._)("span",{class:(0,s.C_)(["text-weight-bold text-subtitle1",(!0===e.validateAmountReceived()||!e.payViaCheck)&&e.transactionChange>=0?"text-primary":"text-negative"])},(0,s.zw)(`${e.formatMoney(e.transactionChange)}`),3)])):(0,n.kq)("",!0)])),default:(0,n.w5)((()=>[!0!==e.validateAmountReceived()?((0,n.wg)(),(0,n.j4)(B,{key:0,class:"bg-negative",self:"top middle",anchor:"bottom middle"},{default:(0,n.w5)((()=>[C])),_:1})):(0,n.kq)("",!0)])),_:1},8,["input-class","readonly","modelValue","tabindex","rules"])]),(0,n._)("div",x,[(0,n.Wm)(L,{rounded:"",outlined:"",clearable:"",debounce:10,"clear-icon":"clear","input-class":e.form_conf.inputclass,readonly:e.form_isprocessing||e.inputs_empty,modelValue:e.local_trans_payment.check.check_no,"onUpdate:modelValue":t[7]||(t[7]=t=>e.local_trans_payment.check.check_no=t),label:"Check No. (For Cheque Payment Only)",maxlength:10,tabindex:e.getTransIndex("payment_options",1,2),onKeyup:t[8]||(t[8]=t=>e.modKey(t)),rules:[t=>e.checker.input(`${t}`.length<=10||"",500)]},{prepend:(0,n.w5)((()=>[(0,n.Wm)(E,{name:"numbers"})])),append:(0,n.w5)((()=>[(0,n.Wm)(X,{rounded:"",transparent:""},{default:(0,n.w5)((()=>[(0,n.Wm)(E,{size:"sm",name:"credit_score"}),(0,n.Wm)(B,null,{default:(0,n.w5)((()=>[q])),_:1})])),_:1})])),_:1},8,["input-class","readonly","modelValue","label","tabindex","rules"])])])])),_:1}),(0,n.Wm)(o.uT,{appear:"","enter-active-class":"animated fadeIn slow","leave-active-class":"animated fadeOut slow"},{default:(0,n.w5)((()=>[e.local_trans_payment.check.check_no?((0,n.wg)(),(0,n.iD)("div",W,[(0,n._)("div",{class:(0,s.C_)(["self-start",e.$q.screen.gt.sm?"q-ml-none q-mt-md":""])},[(0,n.Wm)(X,{rounded:"",transparent:"",color:"primary"},{default:(0,n.w5)((()=>[(0,n.Wm)(N,{flat:"",round:"",size:"xs",icon:"credit_score"}),T])),_:1})],2),(0,n._)("div",$,[(0,n.Wm)(L,{rounded:"",outlined:"",clearable:"",debounce:1e3,"clear-icon":"clear","input-class":e.form_conf.inputclass,readonly:e.form_isprocessing,modelValue:e.local_trans_payment.check.check_bank,"onUpdate:modelValue":t[9]||(t[9]=t=>e.local_trans_payment.check.check_bank=t),label:"Drawee Bank",tabindex:e.getTransIndex("payment_options",3,1),onKeyup:t[10]||(t[10]=t=>e.modKey(t)),rules:[t=>e.checker.input(e.payCheckInputRules(t),500)]},{prepend:(0,n.w5)((()=>[(0,n.Wm)(E,{name:"account_balance"})])),_:1},8,["input-class","readonly","modelValue","tabindex","rules"])]),(0,n._)("div",A,[(0,n.Wm)(L,{rounded:"",outlined:"",mask:"date",clearable:"",debounce:1e3,"clear-icon":"clear","input-class":e.form_conf.inputclass,readonly:e.form_isprocessing,modelValue:e.local_trans_payment.check.check_date,"onUpdate:modelValue":t[13]||(t[13]=t=>e.local_trans_payment.check.check_date=t),label:"Check Date",tabindex:e.getTransIndex("payment_options",3,2),onKeyup:t[14]||(t[14]=t=>e.modKey(t)),rules:[t=>e.dateBetween(t)||""],onClick:t[15]||(t[15]=t=>e.local_trans_options.open_check_date_picker=!0)},{prepend:(0,n.w5)((()=>[(0,n.Wm)(N,{flat:"",round:"",icon:"event",readonly:e.form_isprocessing,tabindex:e.getTransIndex("payment_options",3,3)},{default:(0,n.w5)((()=>[(0,n.Wm)(te,{cover:"","model-value":e.local_trans_options.open_check_date_picker,breakpoint:700,"transition-show":"scale","transition-hide":"scale",onHide:t[12]||(t[12]=t=>e.local_trans_options.open_check_date_picker=!1)},{default:(0,n.w5)((()=>[(0,n.Wm)(ee,{"today-btn":"",modelValue:e.local_trans_payment.check.check_date,"onUpdate:modelValue":t[11]||(t[11]=t=>e.local_trans_payment.check.check_date=t)},{default:(0,n.w5)((()=>[(0,n._)("div",U,[(0,n.wy)((0,n.Wm)(N,{flat:"",rounded:"",label:"Close",color:"primary"},null,512),[[ge]]),(0,n.Wm)(X,{rounded:"",floating:"",transparent:"",style:{top:"5px",right:"5px"},class:"bg-transparent"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(N,{flat:"",round:"",size:"sm",icon:"clear",color:"blue-3"},null,512),[[ge]])])),_:1})])])),_:1},8,["modelValue"])])),_:1},8,["model-value"])])),_:1},8,["readonly","tabindex"])])),_:1},8,["input-class","readonly","modelValue","tabindex","rules"])]),(0,n._)("div",S,[(0,n.Wm)(ae,{rounded:"",outlined:"",clearable:"","use-input":"",debounce:1e3,"clear-icon":"clear",label:"Check Type",modelValue:e.local_trans_payment.check.check_type,"onUpdate:modelValue":t[16]||(t[16]=t=>e.local_trans_payment.check.check_type=t),readonly:e.form_isprocessing,tabindex:e.getTransIndex("payment_options",3,4),"input-class":e.form_conf.inputclass,onKeyup:t[17]||(t[17]=t=>e.modKey(t)),rules:[t=>e.checker.input(e.payCheckInputRules(t),500)]},null,8,["modelValue","readonly","tabindex","input-class","rules"])]),(0,n._)("div",P,[(0,n.Wm)(L,{rounded:"",outlined:"",clearable:"",debounce:1e3,"clear-icon":"clear","input-class":e.form_conf.inputclass,readonly:e.form_isprocessing,modelValue:e.local_trans_payment.check.check_bus_style,"onUpdate:modelValue":t[18]||(t[18]=t=>e.local_trans_payment.check.check_bus_style=t),label:"Business Style",tabindex:e.getTransIndex("payment_options",3,5),onKeyup:t[19]||(t[19]=t=>e.modKey(t)),rules:[t=>e.checker.input(e.payCheckInputRules(t),500)]},{prepend:(0,n.w5)((()=>[(0,n.Wm)(E,{name:"business"})])),_:1},8,["input-class","readonly","modelValue","tabindex","rules"])])])):(0,n.kq)("",!0)])),_:1})])),_:1})],2))])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1}),(0,n.Wm)(J,{class:"row justify-center items-center full-width q-pb-xl"},{default:(0,n.w5)((()=>[(0,n.Wm)(G,{class:"col"},{default:(0,n.w5)((()=>[(0,n._)("div",{class:"self-center",style:(0,s.j5)("z-index: 1; width: "+(e.$q.screen.gt.lg?"70vw":e.$q.screen.gt.md?"90%":"100%"))},[(0,n.Wm)(oe,{ref:"transactionsTable"},null,512)],4)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(me,{autofocus:"",modelValue:e.dialog_transactions_options,"onUpdate:modelValue":t[21]||(t[21]=t=>e.dialog_transactions_options=t),"transition-duration":50,"transition-show":"scale","transition-hide":"scale"},{default:(0,n.w5)((()=>[(0,n.Wm)(ne,{style:{width:"450px","max-width":"80vw","border-radius":"15px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(ce,{class:"bg-accent text-white"},{default:(0,n.w5)((()=>[(0,n.Wm)(E,{name:"payment"}),(0,n._)("div",null,(0,s.zw)(`[ ${e.local_transactions_length} ] - Transaction${e.local_transactions_length>1?"s":""}`),1),(0,n.Wm)(re),(0,n.wy)(((0,n.wg)(),(0,n.j4)(N,{flat:"",round:"",dense:"",icon:"close"},{default:(0,n.w5)((()=>[(0,n.Wm)(B,null,{default:(0,n.w5)((()=>[D])),_:1})])),_:1})),[[ge]])])),_:1}),(0,n.Wm)(de,null,{default:(0,n.w5)((()=>[(0,n._)("div",I,[(0,n.Wm)(E,{name:"help_outline",size:"lg"}),Z])])),_:1}),(0,n.Wm)(de,{class:"q-pt-none"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.dialog_multiple_transactions?`Please verify ${e.local_transactions_length} transactions before you proceed.`:`Would you like to process payment${e.local_transactions_length>1?"s":""} or add more transaction?`),1)])),_:1}),(0,n.Wm)(ue),(0,n.Wm)(pe,{align:"right"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(N,{flat:"",ripple:"","no-caps":"",unelevated:"",rounded:"",color:"accent",icon:e.dialog_multiple_transactions?"arrow_back_ios_new":"add",label:e.dialog_multiple_transactions?"Back":"Add Transaction",onClick:t[20]||(t[20]=t=>e.dialog_multiple_transactions?void 0:e.addTransaction())},null,8,["icon","label"]),[[ge]]),(0,n.wy)((0,n.Wm)(N,{ripple:"","no-caps":"",unelevated:"",autofocus:"",rounded:"",icon:"shield",color:"accent",class:"q-px-xl q-py-xs",label:"Process Payment"+(e.local_transactions_length>1?"s":""),onClick:e.submitTransactions},null,8,["label","onClick"]),[[ge]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(fe,{position:"bottom-right",offset:e.fabPos,style:{"z-index":"8"}},{default:(0,n.w5)((()=>[e.$root.isAdmin?(0,n.wy)(((0,n.wg)(),(0,n.j4)(he,{key:0,icon:"add",direction:"up",color:"primary",modelValue:e.fabAdminAction,"onUpdate:modelValue":t[24]||(t[24]=t=>e.fabAdminAction=t),"vertical-actions-align":"right",ripple:{color:"secondary"},disable:e.form_isprocessing||e.draggingFab},{default:(0,n.w5)((()=>[(0,n.Wm)(_e,{"label-position":"left",color:"secondary",icon:"notification_add",label:"Create Notification",disable:e.form_isprocessing||e.draggingFab,onClick:t[22]||(t[22]=t=>e.$root.dialogAddNotif=!e.$root.dialogAddNotif)},null,8,["disable"]),(0,n.Wm)(_e,{"label-position":"left",color:"accent",icon:"payment",label:"Add Transaction",disable:e.form_isprocessing||e.draggingFab,onClick:e.addTransaction},null,8,["disable","onClick"]),(0,n.Wm)(_e,{"label-position":"left",color:"primary",icon:"person_add",label:"Add New User",disable:e.form_isprocessing||e.draggingFab,onClick:t[23]||(t[23]=t=>e.$root.dialogAddUser=!e.$root.dialogAddUser)},null,8,["disable"])])),_:1},8,["modelValue","disable"])),[[be,e.moveFab,void 0,{prevent:!0,mouse:!0}]]):(0,n.wy)(((0,n.wg)(),(0,n.j4)(N,{key:1,fab:"",icon:"add",color:"primary",onClick:e.addTransaction,ripple:{color:"secondary"},disable:e.form_isprocessing||e.draggingFab},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{delay:500,offset:[10,10],self:"center end",anchor:"center start","transition-show":"scale","transition-hide":"scale",class:"text-body2 bg-primary"},{default:(0,n.w5)((()=>[(0,n.Wm)(E,{name:"exposure_plus_1",clas:"bg-accent"}),j])),_:1})])),_:1},8,["onClick","disable"])),[[be,e.moveFab,void 0,{prevent:!0,mouse:!0}]])])),_:1},8,["offset"]),(0,n.Wm)(me,{seamless:"",position:"bottom",modelValue:e.seamless_card,"onUpdate:modelValue":t[26]||(t[26]=t=>e.seamless_card=t),style:{"z-index":"9"},"transition-duration":100,"transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,n.w5)((()=>[(0,n.Wm)(ne,{style:{width:"350px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(we,{value:!e.transactionsReady||e.form_isprocessing?0:1,color:"primary"},null,8,["value"]),(0,n.Wm)(de,{class:"row items-center no-wrap"},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n._)("div",V,[e.inputs_empty?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(E,{key:0,name:e.transactionsReady?e.payViaCheck?"credit_score":"payments":"warning",size:"sm",color:!e.transactionsReady||e.form_isprocessing?"":"primary"},null,8,["name","color"])),(0,n.Uk)(" "+(0,s.zw)(`${e.format.capitalize(e.local_trans_options.paymethod)}`)+" ",1),(0,n.Wm)(E,{size:"md",name:"php",color:"grey-7"}),(0,n._)("span",M,(0,s.zw)(e.formatMoney(e.local_trans_options.total_amount)),1)]),(0,n._)("div",R,(0,s.zw)(e.transactionsReady?`Process ${e.local_transactions_length} transaction${e.local_transactions_length>1?"s":""}.`:e.inputs_empty?"Add transaction details.":"Review transaction details."),1)]),(0,n.Wm)(re),(0,n.Wm)(N,{flat:"",round:"",icon:"send",ripple:{color:"primary"},loading:e.form_isprocessing,disable:!e.transactionsReady||e.form_isprocessing,color:!e.transactionsReady||e.form_isprocessing?"":"primary",onClick:e.submitTransactions},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{class:"bg-blue-4"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)("Process Payment"+(e.local_transactions_length>1?"s":"")),1)])),_:1})])),_:1},8,["loading","disable","color","onClick"]),(0,n.Wm)(N,{flat:"",round:"",icon:"restart_alt",ripple:{color:"primary"},loading:e.form_isprocessing,disable:e.form_isprocessing,onClick:e.resetAllTransaction},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{class:"bg-red-4"},{default:(0,n.w5)((()=>[z])),_:1})])),_:1},8,["loading","disable","onClick"])])),_:1}),(0,n.Wm)(X,{rounded:"",floating:"",transparent:"",style:{top:"5px",right:"0"},class:"bg-transparent text-grey-6"},{default:(0,n.w5)((()=>[(0,n.Wm)(N,{flat:"",round:"",icon:"remove",size:"xs",onClick:t[25]||(t[25]=t=>e.seamless_card=!1)},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{class:"bg-grey-6 text-white"},{default:(0,n.w5)((()=>[O])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(me,{modelValue:e.dialogMoreDetails,"onUpdate:modelValue":t[29]||(t[29]=t=>e.dialogMoreDetails=t),"transition-duration":100,"transition-show":"scale","transition-hide":"scale"},{default:(0,n.w5)((()=>[(0,n.Wm)(ye,(0,n.dG)({onSave:e.saveTransInfo,onClose:t[27]||(t[27]=()=>{e.selectedTrans=null,e.focusBackInput(),e.dialogMoreDetails=!1}),onCancel:t[28]||(t[28]=()=>{e.selectedTrans=null,e.dialogMoreDetails=!1})},e.genMoreTransInfo()),null,16,["onSave"])])),_:1},8,["modelValue"])],64)}a(5363),a(7768);var Q=a(9063),Y=a(6386),N=a(8825),K=a(2130),E=a(1185),B=a(5616),L=a(3437),H=a(3317),X=a(3617),G=(a(2100),a(9949)),J=a.n(G);const ee=(0,n.Uk)(" Show Receipt for "),te=(0,n.Uk)(" Transaction "),ae=(0,n.Uk)("Receipt"),ne=(0,n.Uk)("Copy Transaction"),se=(0,n.Uk)("Clear All Selected"),oe=["onClick"],le={key:4},ie=(0,n.Uk)("Cancel"),re=(0,n.Uk)("Save"),ce={class:"q-gutter-sm"},de=(0,n.Uk)(" No Phone "),ue=(0,n.Uk)(" No Email "),pe={class:"row justify-center items-center q-table__title q-gutter-x-sm q-mb-sm"},me=(0,n._)("img",{class:"col-4",style:{width:"45px"},src:J()},null,-1),_e={class:"column"},he={class:"col"},fe=(0,n.Uk)(" Recent transactions "),we=(0,n.Uk)(" Refresh Data "),ye={class:"col text-caption text-grey"},ge=(0,n.Uk)(" View canceled transactions "),be=(0,n.Uk)("View all transaction"),ke={class:"row justify-center items-center q-gutter-x-xs q-mb-sm"},ve=(0,n.Uk)("Export to CSV"),Ce={class:"q-gutter-x-sm"},xe=(0,n.Uk)(" Automatic Scrolling "),qe={class:"full-width row flex-center text-primary q-gutter-sm"};function We(e,t,a,l,i,r){const c=(0,n.up)("q-badge"),d=(0,n.up)("q-tooltip"),u=(0,n.up)("q-btn"),p=(0,n.up)("q-th"),m=(0,n.up)("q-tr"),_=(0,n.up)("q-item-label"),h=(0,n.up)("q-icon"),f=(0,n.up)("q-item-section"),w=(0,n.up)("q-item"),y=(0,n.up)("q-list"),g=(0,n.up)("q-menu"),b=(0,n.up)("q-td"),k=(0,n.up)("q-input"),v=(0,n.up)("q-popup-edit"),C=(0,n.up)("q-toggle"),x=(0,n.up)("q-select"),q=(0,n.up)("q-table"),W=(0,n.up)("TransactionInfo"),T=(0,n.up)("q-dialog"),$=(0,n.up)("TransactionCheckInfo"),A=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.iD)(n.HY,null,[e.$root.isLogin?((0,n.wg)(),(0,n.j4)(q,{key:0,style:(0,s.j5)(`border-radius: 15px; max-height: ${e.autoScroll?e.tableFullScreen?"100%":"650px":"100%"} !important; ${e._style||""}`),"table-style":e.table_style||"","table-class":[e.table_class,e.tableClass].join(" "),"card-class":e.card_class||"","card-style":e.card_style||"",separator:e.separator,loading:e.loading,dense:e.dense,tabindex:"0","row-key":"trans_id",color:"primary",filteredSortedRows:"","binary-state-sort":"",rows:e.data,columns:e.columns,filter:e.filter,selection:"multiple",selected:e.selected,"onUpdate:selected":t[14]||(t[14]=t=>e.selected=t),expanded:e.expanded,"onUpdate:expanded":t[15]||(t[15]=t=>e.expanded=t),pagination:e.pagination,"onUpdate:pagination":t[16]||(t[16]=t=>e.pagination=t),"visible-columns":e.visibleColumns,onKeydown:e.onKey,onRequest:e.onRequest,onFocusin:t[17]||(t[17]=t=>e.navigationActive=!0),onFocusout:t[18]||(t[18]=t=>e.navigationActive=!1),ref:"myTransactionsTable",class:(0,s.C_)(["q-pa-sm q-px-lg",e.$root.darkModeStatus?"shadow-6 ":""+e._class]),"no-data-label":"I didn't find anything for you","no-results-label":"The filter didn't uncover any results","loading-label":"Getting data from the server","selected-rows-label":e.getSelectedString,"rows-per-page-label":"Transactions per page","rows-per-page-options":e.rowsPerPageOptions(e.autoScroll),"virtual-scroll":"",onVirtualScroll:e.onScroll,"virtual-scroll-item-size":e.dense?24:48,"virtual-scroll-sticky-size-start":e.dense?24:48},(0,n.Nv)({header:(0,n.w5)((a=>[(0,n.Wm)(m,{props:a,class:(0,s.C_)(e.$root.darkModeStatus?"bg-grey-10":"bg-grey-1")},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{"auto-width":"",style:{position:"sticky",top:"0",left:"0","z-index":"3"}},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{flat:"",round:"",ripple:"",size:"md",icon:"print",class:"hover-text-primary",disable:!e.selected.length,color:e.selected.length?"primary":e.$root.darkModeStatus?"grey-9":"blue-1",onClick:t[0]||(t[0]=t=>e.printSelectedReceipt())},{default:(0,n.w5)((()=>[e.selected.length?((0,n.wg)(),(0,n.j4)(d,{key:0,delay:1e3,class:(0,s.C_)(["text-caption",e.$root.darkModeStatus?"bg-accent":"bg-primary"])},{default:(0,n.w5)((()=>[ee,(0,n.Wm)(c,{color:e.$root.darkModeStatus?"primary":"accent"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.selected.length),1)])),_:1},8,["color"]),(0,n.Uk)(" transaction"+(0,s.zw)(e.selected.length>1?"s":""),1)])),_:1},8,["class"])):(0,n.kq)("",!0)])),_:1},8,["disable","color"])])),_:1}),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.cols,(e=>((0,n.wg)(),(0,n.j4)(p,{"auto-width":"",props:a,key:e.name,class:"q-py-none",style:{position:"sticky",top:"0","z-index":"2"}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props","class"])])),body:(0,n.w5)((a=>[(0,n.Wm)(m,{props:a,onContextmenu:(0,o.iM)((t=>e.showCustomMenu(a)),["prevent"])},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{"context-menu":"","touch-position":"","transition-duration":250,"transition-show":"jump-down","transition-hide":"jump-up",class:"q-virtual-scroll--skip"},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{style:{"min-width":"100px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{header:""},{default:(0,n.w5)((()=>[te,(0,n.Wm)(c,{transparent:""},{default:(0,n.w5)((()=>[(0,n.Uk)("#"+(0,s.zw)(e.moreTransOptions.row.trans_id),1)])),_:1})])),_:1}),(0,n.wy)(((0,n.wg)(),(0,n.j4)(w,{clickable:"",class:"hover-text-primary",onClick:t[1]||(t[1]=t=>e.toggleSelected(e.moreTransOptions.selected,e.moreTransOptions.row))},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{avatar:"",style:{"min-width":"unset"}},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{name:e.moreTransOptions.selected?"highlight_off":"task_alt"},null,8,["name"])])),_:1}),(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.moreTransOptions.selected?"Unselect":"Select"),1)])),_:1})])),_:1})),[[A]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(w,{clickable:"",class:"hover-text-primary",onClick:t[2]||(t[2]=t=>e.printSelectedReceipt(e.moreTransOptions.row.trans_id))},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{avatar:"",style:{"min-width":"unset"}},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{name:"print"})])),_:1}),(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[ae])),_:1})])),_:1})),[[A]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(w,{clickable:"",class:"hover-text-primary",onClick:t[3]||(t[3]=t=>e.moreTransOptions.expand=!e.moreTransOptions.expand)},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{avatar:"",style:{"min-width":"unset"}},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{name:e.moreTransOptions.expand?"unfold_less":"unfold_more"},null,8,["name"])])),_:1}),(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" Expand "+(0,s.zw)(e.moreTransOptions.expand?"Less":"More"),1)])),_:1})])),_:1})),[[A]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(w,{clickable:"",class:"hover-text-primary",onClick:t[4]||(t[4]=t=>e.$root.fnCopyToClipboard(JSON.stringify(e.moreTransOptions.row),"Transaction Details"))},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{avatar:"",style:{"min-width":"unset"}},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{name:"copy_all"})])),_:1}),(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[ne])),_:1})])),_:1})),[[A]]),e.selected.length?(0,n.wy)(((0,n.wg)(),(0,n.j4)(w,{key:0,clickable:"",class:"hover-text-primary",onClick:t[5]||(t[5]=t=>e.selected=[])},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{avatar:"",style:{"min-width":"unset"}},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{name:"clear_all"})])),_:1}),(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[se])),_:1})])),_:1})),[[A]]):(0,n.kq)("",!0)])),_:1})])),_:1}),(0,n.Wm)(b,{class:(0,s.C_)(["cursor-pointer text-center",e.$root.darkModeStatus?"bg-grey-10":"bg-grey-1"]),style:{position:"sticky",left:"0","z-index":"1"},onDblclick:e=>a.expand=!a.expand,onClick:t=>e.toggleSelected(a.selected,a.row)},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{round:"",size:e.dense?"xs":"sm",style:{cursor:"grab"},class:"no-shadow text-center",icon:a.expand?"remove":"add",outline:!a.selected,color:a.row.deleted?"negative":"primary"},null,8,["size","icon","outline","color"])])),_:2},1032,["class","onDblclick","onClick"]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(Object.keys(a.row),(l=>((0,n.wg)(),(0,n.j4)(b,{props:a,key:l,class:(0,s.C_)([a.row.date_paid&&e.$root.realtimeDate&&e.date.getDateDiff(e.$root.realtimeDate,new Date(a.row.date_paid),"minutes")<=1?(e.$root.darkModeStatus?"bg-green-2":"bg-green-1")+" text-dark":"",a.row.deleted?(e.$root.darkModeStatus?"bg-red-2":"bg-red-1")+" text-dark":"OverTheCounter"!=a.row.channel?(e.$root.darkModeStatus?"bg-blue-2":"bg-blue-1")+" text-dark":""].join(" ")),onDblclick:(0,o.iM)((t=>e.$root.fnCopyToClipboard(a.colsMap[l].format(a.row[l],null,!1,"date_paid"==l?e.plain_date_paid:void 0),a.colsMap[l].label)),["prevent"])},{default:(0,n.w5)((()=>["id"==l?((0,n.wg)(),(0,n.j4)(c,{key:0,color:e.$root.darkModeStatus?"grey-9":"grey-6"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(a.colsMap[l].format(a.row[l])),1)])),_:2},1032,["color"])):"paymethod"==l?((0,n.wg)(),(0,n.j4)(c,{key:1,color:"cash"==a.row[l].toLowerCase()?"accent":"teal",onDblclick:()=>{"check"==a.row[l].toLowerCase()&&(e.dialogTransCheckInfo=!0,e.view_trans=a.row)}},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{name:"Cash"==a.row[l]?"payment":"credit_score",size:"xs"},null,8,["name"]),(0,n.Uk)(" "+(0,s.zw)(a.colsMap[l].format(a.row[l])),1)])),_:2},1032,["color","onDblclick"])):"trans_id"==l?((0,n.wg)(),(0,n.iD)("div",{key:2,style:{cursor:"copy"},onClick:t=>e.$root.fnCopyToClipboard(a.colsMap[l].format(a.row[l]),a.colsMap[l].label)},(0,s.zw)(a.colsMap[l].format(a.row[l])),9,oe)):"date_paid"==l?((0,n.wg)(),(0,n.iD)("div",{key:3,style:{cursor:"pointer"},onClick:t[6]||(t[6]=t=>e.plain_date_paid=!e.plain_date_paid)},(0,s.zw)(e.plain_date_paid?e.date.formatDate(a.row[l],"ddd MMM D, YYYY h:mma"):a.colsMap[l].format(a.row[l])),1)):((0,n.wg)(),(0,n.iD)("div",le,(0,s.zw)(a.colsMap[l].format(a.row[l])),1)),e.popupEditableColumns.includes(l)?((0,n.wg)(),(0,n.j4)(v,{key:5,cover:"",modelValue:a.row[l],"onUpdate:modelValue":e=>a.row[l]=e,title:a.colsMap[l].label,onSave:(t,n)=>e.popupSubmit(l,t,a),style:{"border-radius":"15px"}},{default:(0,n.w5)((e=>[(0,n.Wm)(k,{dense:"",counter:"",autofocus:"",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeyup:(0,o.D2)(e.set,["enter"])},{prepend:(0,n.w5)((()=>[(0,n.Wm)(h,{name:"edit",size:"sm"})])),append:(0,n.w5)((()=>[(0,n.Wm)(u,{flat:"",round:"",dense:"",color:"negative",icon:"cancel",onClick:(0,o.iM)(e.cancel,["stop"])},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[ie])),_:1})])),_:2},1032,["onClick"]),(0,n.Wm)(u,{flat:"",round:"",dense:"",color:"positive",icon:"check_circle",onClick:(0,o.iM)(e.set,["stop"]),disable:!1===e.validate(e.value)||e.initialValue===e.value},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[re])),_:1})])),_:2},1032,["onClick","disable"])])),_:2},1032,["modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue","title","onSave"])):(0,n.kq)("",!0),a.row.deleted||"OverTheCounter"!=a.row.channel?((0,n.wg)(),(0,n.j4)(d,{key:6,class:(0,s.C_)(a.row.deleted?"bg-red-4":"OverTheCounter"!=a.row.channel?"bg-blue-4":"")},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{name:a.row.deleted?"delete":(a.row.channel,"info"),size:"sm"},null,8,["name"]),(0,n.Uk)(" "+(0,s.zw)(a.row.deleted&&"OverTheCounter"!=a.row.channel?"Deleted - (Channel: "+a.row.channel+")":a.row.deleted?"Deleted":"OverTheCounter"!=a.row.channel?"Channel: "+a.row.channel:""),1)])),_:2},1032,["class"])):(0,n.kq)("",!0)])),_:2},1032,["props","class","onDblclick"])))),128))])),_:2},1032,["props","onContextmenu"]),a.expand?((0,n.wg)(),(0,n.j4)(m,{key:0,props:a,class:"q-virtual-scroll--skip"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{colspan:"100%"},{default:(0,n.w5)((()=>[(0,n._)("div",ce,[(0,n.Wm)(u,{size:"sm",unelevated:"",color:"primary",icon:"receipt",label:"Show Details",onClick:()=>{e.view_trans=a.row,e.dialogTransInfo=!0}},null,8,["onClick"]),a.row.check_no?((0,n.wg)(),(0,n.j4)(u,{key:0,size:"sm",unelevated:"",color:"accent",icon:"credit_score",label:`About Cheque #${a.row.check_no}`,onClick:()=>{e.view_trans=a.row,e.dialogTransCheckInfo=!0}},null,8,["label","onClick"])):(0,n.kq)("",!0),"Internet"!=a.row.channel||"no"!=a.row.channel_online_confirmed&&!e.$root.isAdmin?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(u,{key:1,"no-caps":"",size:"sm",unelevated:"",color:"Y"==a.row.channel_online_confirmed?"grey":"orange-8",icon:"Y"==a.row.channel_online_confirmed?"cancel":"verified_user",disable:"yes"==a.row.channel_online_confirmed&&!e.$root.isAdmin,label:("yes"==a.row.channel_online_confirmed?"Unconfirm":"Confirm")+" Online Transaction",onClick:t=>e.confirmOnlineTransaction(a)},null,8,["color","icon","disable","label","onClick"])),(0,n.Wm)(u,{"no-caps":"",size:"sm",unelevated:"",color:"green",icon:"phone",target:"_blank",label:"CALL"+(a.row.phone?": "+a.row.phone:""),disable:!a.row.phone,href:`tel:${a.row.phone||""}`},{default:(0,n.w5)((()=>[a.row.phone?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(d,{key:0,class:"bg-negative"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{name:"block",size:"13px"}),de])),_:1}))])),_:2},1032,["label","disable","href"]),(0,n.Wm)(u,{"no-caps":"",size:"sm",unelevated:"",color:"teal",icon:"email",target:"_blank",label:"EMAIL"+(a.row.email?": "+a.row.email:""),disable:!a.row.email,href:`mailto:${a.row.email||""}`},{default:(0,n.w5)((()=>[a.row.email?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(d,{key:0,class:"bg-negative"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{name:"block",size:"13px"}),ue])),_:1}))])),_:2},1032,["label","disable","href"]),e.$root.isAdmin?((0,n.wg)(),(0,n.j4)(u,{key:2,size:"sm",unelevated:"",color:"negative",icon:a.row.deleted?"restore":"delete",label:(a.row.deleted?"Un-":"")+"Delete",onClick:t=>e.confirmDeleteUndo(a,!!a.row.deleted)},null,8,["icon","label","onClick"])):(0,n.kq)("",!0)])])),_:2},1024)])),_:2},1032,["props"])):(0,n.kq)("",!0)])),"top-left":(0,n.w5)((()=>[(0,n._)("div",pe,[me,(0,n._)("div",_e,[(0,n._)("div",he,[fe,(0,n.Wm)(u,{flat:"",dense:"",round:"",ripple:"",size:"sm",icon:"refresh",color:"grey-6",class:"hover-text-primary",onClick:t[7]||(t[7]=t=>e.onRequestLimited({pagination:e.pagination,filter:e.filter},1e3))},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"bg-accent"},{default:(0,n.w5)((()=>[we])),_:1})])),_:1})]),(0,n._)("div",ye,[e.pagination.rowsPerPage>=5&&e.pagination.rowsNumber>=5?((0,n.wg)(),(0,n.j4)(u,{key:0,flat:"",round:"",size:"sm",color:"text-grey",class:"hover-text-primary",icon:e.dense?"view_module":"view_comfy",onClick:t[8]||(t[8]=t=>e.dense=!e.dense)},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.dense?"Comfort":"Compact")+" View ",1)])),_:1})])),_:1},8,["icon"])):(0,n.kq)("",!0),(0,n.Wm)(C,{size:"xs",label:"Deleted",modelValue:e.viewDeleted,"onUpdate:modelValue":t[9]||(t[9]=t=>e.viewDeleted=t),"checked-icon":"delete",color:"primary","unchecked-icon":"clear"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[ge])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(C,{size:"xs",label:"All",modelValue:e.viewAllTransaction,"onUpdate:modelValue":t[10]||(t[10]=t=>e.viewAllTransaction=t),"checked-icon":"calendar_today",color:"primary","unchecked-icon":"clear"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[be])),_:1})])),_:1},8,["modelValue"])])])])])),pagination:(0,n.w5)((a=>[(0,n._)("div",Ce,[(0,n.Uk)((0,s.zw)(e.paginationLabel)+" ",1),e.withAutoScroll&&e.pagination.rowsPerPage>=5&&e.pagination.rowsNumber>=5?((0,n.wg)(),(0,n.j4)(C,{key:0,size:"xs",modelValue:e.autoScroll,"onUpdate:modelValue":t[13]||(t[13]=t=>e.autoScroll=t),"checked-icon":"mouse",color:"primary","unchecked-icon":"mouse"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{transparent:"",class:"bg-transparent"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{name:"mouse",size:"xs"}),xe])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,n.kq)("",!0),a.pagesNumber>2?((0,n.wg)(),(0,n.j4)(u,{key:1,icon:"first_page",color:"grey-8",round:"",dense:"",flat:"",disable:a.isFirstPage,onClick:a.firstPage,class:"hover-text-primary"},null,8,["disable","onClick"])):(0,n.kq)("",!0),(0,n.Wm)(u,{icon:"chevron_left",color:"grey-8",round:"",dense:"",flat:"",disable:a.isFirstPage,onClick:a.prevPage,class:"hover-text-primary"},null,8,["disable","onClick"]),(0,n.Wm)(u,{icon:"chevron_right",color:"grey-8",round:"",dense:"",flat:"",disable:a.isLastPage,onClick:a.nextPage,class:"hover-text-primary"},null,8,["disable","onClick"]),a.pagesNumber>2?((0,n.wg)(),(0,n.j4)(u,{key:2,icon:"last_page",color:"grey-8",round:"",dense:"",flat:"",disable:a.isLastPage,onClick:a.lastPage,class:"hover-text-primary"},null,8,["disable","onClick"])):(0,n.kq)("",!0)])])),"no-data":(0,n.w5)((({icon:t,message:a,filter:o})=>[(0,n._)("div",qe,[(0,n.Wm)(h,{size:"2em",name:e.loading?"downloading":o?"sentiment_dissatisfied":t},null,8,["name"]),(0,n._)("span",null,(0,s.zw)(a),1)])])),_:2},[e.$q.screen.gt.xs?{name:"top-right",fn:(0,n.w5)((a=>[(0,n._)("div",ke,[(0,n.Wm)(x,{multiple:"",dense:"",rounded:"",outlined:"","emit-value":"","map-options":"","item-aligned":"","options-dense":"","options-cover":"",options:e.columns,"transition-show":"jump-up","transition-hide":"jump-down","option-value":(e,t)=>e?e.name:null,style:{"min-width":"260px"},modelValue:e.visibleColumns,"onUpdate:modelValue":t[11]||(t[11]=t=>e.visibleColumns=t),"display-value":e.$q.lang.table.columns},{option:(0,n.w5)((e=>[(0,n.Wm)(w,(0,n.dG)(e.itemProps,{class:"col"}),{default:(0,n.w5)((()=>[(0,n.Wm)(f,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{name:e.opt.required?"lock":e.selected?"check":"clear",class:(0,s.C_)(e.opt.required||e.selected?"text-primary":"text-grey-3")},null,8,["name","class"])])),_:2},1024),(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(_,{class:(0,s.C_)(e.opt.required||e.selected?"text-primary":"text-grey-9")},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.opt.label),1)])),_:2},1032,["class"])])),_:2},1024)])),_:2},1040)])),prepend:(0,n.w5)((()=>[(0,n.Wm)(h,{name:"filter_alt"})])),_:1},8,["options","option-value","modelValue","display-value"]),(0,n.Wm)(k,{dense:"",rounded:"",outlined:"",clearable:"",debounce:"1000","clear-icon":"clear",modelValue:e.filter,"onUpdate:modelValue":t[12]||(t[12]=t=>e.filter=t),placeholder:"Search",class:"q-pa-sm"},{prepend:(0,n.w5)((()=>[(0,n.Wm)(h,{name:"search"})])),_:1},8,["modelValue"]),(0,n.Wm)(u,{flat:"",dense:"",round:"",ripple:"",icon:a.inFullscreen?"fullscreen_exit":"fullscreen",class:"q-pa-sm hover-text-primary",onClick:()=>{e.tableScreenUpdate(a.inFullscreen),a.toggleFullscreen()}},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(a.inFullscreen?"Minimize":"Maximize"),1)])),_:2},1024)])),_:2},1032,["icon","onClick"]),(0,n.Wm)(u,{flat:"",dense:"",round:"",ripple:"",icon:"archive",class:"q-pa-sm hover-text-primary",onClick:e.exportTable},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[ve])),_:1})])),_:1},8,["onClick"])])]))}:void 0]),1032,["style","table-style","table-class","card-class","card-style","separator","loading","dense","rows","columns","filter","selected","expanded","pagination","visible-columns","onKeydown","onRequest","class","selected-rows-label","rows-per-page-options","onVirtualScroll","virtual-scroll-item-size","virtual-scroll-sticky-size-start"])):(0,n.kq)("",!0),(0,n.Wm)(T,{modelValue:e.dialogTransInfo,"onUpdate:modelValue":t[19]||(t[19]=t=>e.dialogTransInfo=t),"transition-duration":"100","transition-show":"scale","transition-hide":"scale"},{default:(0,n.w5)((()=>[(0,n.Wm)(W,{trans_id:e.view_trans.trans_id},null,8,["trans_id"])])),_:1},8,["modelValue"]),(0,n.Wm)(T,{modelValue:e.dialogTransCheckInfo,"onUpdate:modelValue":t[20]||(t[20]=t=>e.dialogTransCheckInfo=t),"transition-duration":"100","transition-show":"scale","transition-hide":"scale"},{default:(0,n.w5)((()=>[(0,n.Wm)($,{check_no:e.view_trans.check_no},null,8,["check_no"])])),_:1},8,["modelValue"])],64)}a(71);var Te=a(2841),$e=a(9405);const Ae=(0,n.Uk)("Account Details"),Ue={class:"text-grey-6"},Se=(0,n.Uk)("Transaction Information"),Pe={id:"qrCodeRef",ref:"qrCodeRef"},De=(0,n.Uk)(" Transaction Code "),Ie=(0,n.Uk)("Copy"),Ze=(0,n.Uk)("Date Paid"),je=(0,n.Uk)("Payment Method"),Ve=(0,n.Uk)("Check Details"),Me=(0,n.Uk)("Amount Paid"),Re=(0,n.Uk)("Transaction Fee"),ze=(0,n.Uk)("Total Amount Paid"),Oe=(0,n.Uk)(" (Amount paid + Transaction fee) ");function Fe(e,t,a,o,l,i){const r=(0,n.up)("q-icon"),c=(0,n.up)("q-item-section"),d=(0,n.up)("q-item"),u=(0,n.up)("q-separator"),p=(0,n.up)("q-card-section"),m=(0,n.up)("q-tooltip"),_=(0,n.up)("q-btn"),h=(0,n.up)("q-item-label"),f=(0,n.up)("q-card-actions"),w=(0,n.up)("q-card"),y=(0,n.up)("TransactionCheckInfo"),g=(0,n.up)("q-dialog"),b=(0,n.Q2)("close-popup");return e.transactionInfo?((0,n.wg)(),(0,n.j4)(w,{key:0,style:{"border-radius":"15px",width:"450px","max-width":"80vw"}},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{flat:"",class:"q-ma-sm q-mb-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{class:"q-ma-none q-pa-none"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{class:"rounded-borders q-mx-sm q-pb-none"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"text-h6 text-grey-5"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{thumbnail:""},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{name:"perm_identity",class:"text-primary"})])),_:1}),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[Ae])),_:1})])),_:1}),(0,n.Wm)(u)])),_:1}),(0,n.Wm)(p,{class:"rounded-borders q-my-none q-py-none q-mx-sm"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"text-center"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{class:"text-h6 text-primary text-weight-bold"},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Uk)((0,s.zw)(e.transactionInfo.account_name)+" ",1),(0,n._)("span",Ue,(0,s.zw)(`#${e.transactionInfo.account_id}`),1)])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"text-h6 text-grey-5"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{thumbnail:""},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{name:"info",class:"text-primary"})])),_:1}),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[Se])),_:1}),(0,n._)("div",Pe,null,512)])),_:1}),(0,n._)("div",{style:{"border-radius":"15px"},class:(0,s.C_)(["rounded-borders q-pa-xs",e.$q.dark.isActive?"bg-grey-9":"bg-grey-2"])},[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,{lines:"1"},{default:(0,n.w5)((()=>[De,(0,n.Wm)(_,{flat:"",round:"",size:"xs",color:"grey-6",icon:"content_copy",onClick:t[0]||(t[0]=t=>e.$root.fnCopyToClipboard(e.transactionInfo.trans_id,"Transaction Id")),class:"hover-text-primary"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[Ie])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(c,{side:"",class:"text-weight-bold"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.transactionInfo.trans_id),1)])),_:1})])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,{lines:"1"},{default:(0,n.w5)((()=>[Ze])),_:1})])),_:1}),(0,n.Wm)(c,{side:"",class:"text-weight-bold"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.date.formatDate(e.transactionInfo.date_paid,"MMMM D, YYYY h:mm:ssA")),1)])),_:1})])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,{lines:"1"},{default:(0,n.w5)((()=>[je])),_:1})])),_:1}),(0,n.Wm)(c,{side:"",class:"text-weight-bold"},{default:(0,n.w5)((()=>[(0,n._)("div",null,[e.transactionInfo.check_no?((0,n.wg)(),(0,n.j4)(_,{key:0,flat:"",round:"",size:"md",color:"grey-6",icon:"credit_score",onClick:t[1]||(t[1]=t=>e.dialogTransCheckInfo=!e.dialogTransCheckInfo),class:"hover-text-primary"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[Ve])),_:1})])),_:1})):(0,n.kq)("",!0),(0,n.Uk)(" "+(0,s.zw)(e.transactionInfo.paymethod),1)])])),_:1})])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,{lines:"1"},{default:(0,n.w5)((()=>[Me])),_:1})])),_:1}),(0,n.Wm)(c,{side:"",class:"text-weight-bold"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.formatMoney(e.transactionInfo.amount_paid))+" PHP ",1)])),_:1})])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,{lines:"1"},{default:(0,n.w5)((()=>[Re])),_:1})])),_:1}),(0,n.Wm)(c,{side:"",class:"text-weight-bold"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.formatMoney(e.transactionInfo.trans_fee))+" PHP",1)])),_:1})])),_:1})],2),(0,n.Wm)(d,{class:"text-primary q-py-md q-pt-lg"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,{lines:"1"},{default:(0,n.w5)((()=>[ze])),_:1}),(0,n.Wm)(h,{caption:""},{default:(0,n.w5)((()=>[Oe])),_:1})])),_:1}),(0,n.Wm)(c,{side:"",class:"text-weight-bold text-primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.formatMoney(Number(e.transactionInfo.amount_paid)+Number(e.transactionInfo.trans_fee)))+" PHP ",1)])),_:1})])),_:1})])),_:1}),(0,n.Wm)(f,{vertical:""},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(_,{rounded:"",outline:"",icon:"print",align:"center",color:"primary",class:"hover-bg-primary hover-text-white",label:"Show Receipt",onClick:e.openReceipt},null,8,["onClick"]),[[b]])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(g,{modelValue:e.dialogTransCheckInfo,"onUpdate:modelValue":t[2]||(t[2]=t=>e.dialogTransCheckInfo=t),"transition-duration":"100","transition-show":"scale","transition-hide":"scale"},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{check_no:e.transactionInfo.check_no},null,8,["check_no"])])),_:1},8,["modelValue"])])),_:1})):(0,n.kq)("",!0)}const Qe=(0,n.Uk)("Cheque Details"),Ye=(0,n._)("span",{class:"text-grey-6 text-body2"},"#",-1),Ne=(0,n.Uk)("Copy"),Ke={class:"text-grey-6 text-body2",style:{cursor:"copy"}},Ee=(0,n.Uk)("Check Date"),Be=(0,n.Uk)(" | "),Le=(0,n.Uk)("Drawee Bank"),He=(0,n.Uk)(" | "),Xe=(0,n.Uk)("Cheque Type"),Ge=(0,n.Uk)(" | "),Je=(0,n.Uk)("Bussiness Style"),et=(0,n.Uk)("Show All Receipt"),tt={key:0,class:"text-body2"},at=(0,n.Uk)(" Account Id "),nt=(0,n.Uk)("Copy"),st=["onDblclick"],ot=(0,n.Uk)(" Amount Paid "),lt=["onDblclick"],it=(0,n.Uk)("Cheque Amount"),rt=(0,n.Uk)(" * with Transaction fee ");function ct(e,t,a,o,l,i){const r=(0,n.up)("q-icon"),c=(0,n.up)("q-item-section"),d=(0,n.up)("q-item"),u=(0,n.up)("q-separator"),p=(0,n.up)("q-card-section"),m=(0,n.up)("q-tooltip"),_=(0,n.up)("q-btn"),h=(0,n.up)("q-badge"),f=(0,n.up)("q-item-label"),w=(0,n.up)("q-scroll-area"),y=(0,n.up)("q-card");return e.checkTransactions?((0,n.wg)(),(0,n.j4)(y,{key:0,style:{"border-radius":"15px",width:"450px","max-width":"80vw"}},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{flat:"",class:"q-ma-sm q-mb-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{class:"q-ma-none q-pa-none"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{class:"rounded-borders q-mx-sm q-pb-none"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"text-h6 text-grey-5"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{thumbnail:""},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{name:"credit_score",class:"text-primary"})])),_:1}),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[Qe])),_:1})])),_:1}),(0,n.Wm)(u)])),_:1}),(0,n.Wm)(p,{class:"rounded-borders q-my-none q-py-none"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"text-center"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{class:"text-h6 text-primary text-weight-bold"},{default:(0,n.w5)((()=>[(0,n._)("div",{onDblclick:t[1]||(t[1]=t=>e.$root.fnCopyToClipboard(e.checkTransactions.check_no,"Check Number"))},[Ye,(0,n.Uk)(" "+(0,s.zw)(e.checkTransactions.check_no)+" ",1),(0,n.Wm)(_,{flat:"",round:"",size:"xs",color:"grey-6",icon:"content_copy",onClick:t[0]||(t[0]=t=>e.$root.fnCopyToClipboard(e.checkTransactions.check_no,"Check Number")),class:"hover-text-primary"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[Ne])),_:1})])),_:1})],32),(0,n._)("div",Ke,[(0,n._)("span",{class:"text-grey-8",onClick:t[2]||(t[2]=t=>e.$root.fnCopyToClipboard(e.date.formatDate(e.checkTransactions.check_date,"MMMM D, YYYY"),"Check Date"))},[(0,n.Uk)((0,s.zw)(e.date.formatDate(e.checkTransactions.check_date,"MMMM D, YYYY"))+" ",1),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[Ee])),_:1})]),Be,(0,n._)("span",{class:"text-grey-8",onClick:t[3]||(t[3]=t=>e.$root.fnCopyToClipboard(e.checkTransactions.check_bank,"Drawee Bank"))},[(0,n.Uk)((0,s.zw)(e.checkTransactions.check_bank)+" ",1),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[Le])),_:1})]),He,(0,n._)("span",{class:"text-grey-8",onClick:t[4]||(t[4]=t=>e.$root.fnCopyToClipboard(e.checkTransactions.check_type,"Cheque Type"))},[(0,n.Uk)((0,s.zw)(e.checkTransactions.check_type)+" ",1),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[Xe])),_:1})]),Ge,(0,n._)("span",{class:"text-grey-8",onClick:t[5]||(t[5]=t=>e.$root.fnCopyToClipboard(e.checkTransactions.check_bus_style,"Bussiness Style"))},[(0,n.Uk)((0,s.zw)(e.checkTransactions.check_bus_style)+" ",1),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[Je])),_:1})])])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(p,{class:"q-pt-none"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"text-h6 text-grey-5"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{thumbnail:"",class:"q-pr-sm"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{flat:"",round:"",size:"md",color:"primary",icon:"print",onClick:t[6]||(t[6]=t=>e.openReceipt(e.checkTransactions.list.map((e=>e.trans_id))))},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[et])),_:1})])),_:1})])),_:1}),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Uk)((0,s.zw)("Transaction"+(e.checkTransactions.total>1?"s":""))+" ",1),e.checkTransactions.total>1?((0,n.wg)(),(0,n.iD)("span",tt,"("+(0,s.zw)(e.checkTransactions.total)+")",1)):(0,n.kq)("",!0)])])),_:1}),(0,n.Wm)(c,{side:"",class:"text-caption text-grey-6",onDblclick:t[7]||(t[7]=t=>e.$root.fnCopyToClipboard(e.date.formatDate(e.checkTransactions.date_paid,"MMM D, YYYY h:mmA"),"Transaction Date"))},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.date.formatDate(e.checkTransactions.date_paid,"MMM D, YYYY h:mmA")),1)])),_:1})])),_:1}),(0,n.Wm)(w,{"thumb-style":e.$style.scrollarea.thumb,"bar-style":e.$style.scrollarea.bar,class:"q-px-md",style:(0,s.j5)(`max-height: 300px; min-height: 150px; height: calc(150px * ${e.checkTransactions.total});`)},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.checkTransactions.list,((t,a)=>((0,n.wg)(),(0,n.iD)("div",{key:a,class:(0,s.C_)(["q-mt-md",e.$q.dark.isActive?"bg-grey-9":"bg-grey-2"]),style:{"border-radius":"15px"}},[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,{floating:"",transparent:"",class:"q-pa-xs",style:{right:"90%",top:"-7px"}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(a+1),1)])),_:2},1024),(0,n.Wm)(h,{floating:"",transparent:"",class:"text-weight-bold hover-bg-secondary q-pa-xs",style:{right:"5%",top:"-7px",cursor:"copy"},onClick:a=>e.$root.fnCopyToClipboard(t.trans_id,"Transaction Id")},{default:(0,n.w5)((()=>[(0,n.Uk)(" # "+(0,s.zw)(t.trans_id),1)])),_:2},1032,["onClick"]),(0,n.Wm)(c,{class:"q-pt-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{lines:"1"},{default:(0,n.w5)((()=>[at,(0,n.Wm)(_,{flat:"",round:"",size:"xs",color:"grey-6",icon:"content_copy",onClick:a=>e.$root.fnCopyToClipboard(t.account_id,"Account Id"),class:"hover-text-primary"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[nt])),_:1})])),_:2},1032,["onClick"]),(0,n._)("span",{class:"float-right text-weight-bold",onDblclick:a=>e.$root.fnCopyToClipboard(t.account_id,"Account Id")},(0,s.zw)(t.account_id),41,st)])),_:2},1024),(0,n.Wm)(f,{caption:"",lines:"1"},{default:(0,n.w5)((()=>[ot,(0,n._)("span",{class:"float-right text-weight-bold",onDblclick:a=>e.$root.fnCopyToClipboard(e.formatMoney(t.amount_paid),"Amount Paid")},(0,s.zw)(e.formatMoney(t.amount_paid))+" PHP ",41,lt)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,n.Wm)(d,{class:"q-pb-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(_,{rounded:"",outline:"",icon:"print",align:"center",color:"primary",label:"Open Receipt",class:"hover-bg-primary hover-text-white",onClick:a=>e.openReceipt(t.trans_id)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)],2)))),128))])),_:1},8,["thumb-style","bar-style","style"]),(0,n.Wm)(u,{class:"q-my-sm"}),(0,n.Wm)(d,{class:"q-pt-md q-pb-none"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,{lines:"1"},{default:(0,n.w5)((()=>[it])),_:1}),(0,n.Wm)(f,{caption:"",class:"text-italic"},{default:(0,n.w5)((()=>[rt])),_:1})])),_:1}),(0,n.Wm)(c,{side:"",class:"text-weight-bold text-primary text-h6",onDblclick:t[8]||(t[8]=t=>e.$root.fnCopyToClipboard(e.formatMoney(e.checkTransactions.total_amount),"Cheque Amount"))},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.formatMoney(e.checkTransactions.total_amount))+" PHP ",1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):(0,n.kq)("",!0)}const dt=(0,n.aZ)({name:"TransactionCheckInfo",data(){return{checkTransactions:null,date:B.ZP,formatMoney:Y.lb,openReceipt:null}},props:{check_no:{type:String,required:!0}},async created(){this.openReceipt=(0,H.Z)(this.openReceiptNow,1e3),this.checkTransactions=await this.getCheckTransaction(this.check_no)},methods:{...(0,X.nv)("transaction",["getAllTransactions"]),async getTransactionInfo(e){const t=await this.getAllTransactions({url:e});return(0,Y.Sw)(t,"response.data.data.0",null)},async getCheckTransaction(e){const t=await this.getAllTransactions({query:[`check_no=${e}`]}),a=(0,Y.Sw)(t,"response.data.data",null);if(a&&Array.isArray(a)){let t=0;return a.map((e=>e.amount_received)).forEach((e=>t+=Number(e))),{check_no:e,total:a.length,total_amount:t,check_bus_style:a[0].check_bus_style,check_bank:a[0].check_bank,check_type:a[0].check_type,check_date:a[0].check_date,date_paid:a[0].date_paid,list:a}}},openReceiptNow(e){let t=`${(0,Q.wE)(e)}`;(0,L.Z)(t,(e=>{e&&console.warn("Error Receipt Window:",e)}),this.$config.openURLConfig)}}});var ut=a(4260),pt=a(151),mt=a(5589),_t=a(3414),ht=a(2035),ft=a(4554),wt=a(5869),yt=a(2165),gt=a(8870),bt=a(7704),kt=a(9721),vt=a(2350),Ct=a(7518),xt=a.n(Ct);const qt=(0,ut.Z)(dt,[["render",ct]]),Wt=qt;xt()(dt,"components",{QCard:pt.Z,QCardSection:mt.Z,QItem:_t.Z,QItemSection:ht.Z,QIcon:ft.Z,QSeparator:wt.Z,QBtn:yt.Z,QTooltip:gt.Z,QScrollArea:bt.Z,QBadge:kt.Z,QItemLabel:vt.Z});const Tt=(0,n.aZ)({name:"TransactionInfo",components:{TransactionCheckInfo:Wt},data(){return{transactionInfo:null,date:B.ZP,formatMoney:Y.lb,openReceipt:null,dialogTransCheckInfo:!1}},props:{trans_id:{type:String,required:!0}},async created(){this.openReceipt=(0,H.Z)(this.openReceiptNow,3e3),this.transactionInfo=await this.getTransactionInfo(this.trans_id)},computed:{qrr(){return document.getElementById("qrCodeRef")}},methods:{...(0,X.nv)("transaction",["getAllTransactions"]),async getTransactionInfo(e){const t=await this.getAllTransactions({url:e});return(0,Y.Sw)(t,"response.data.data.0",null)},openReceiptNow(){let e=`${(0,Q.wE)(this.trans_id)}`;(0,L.Z)(e,(e=>{e&&console.warn("Error Receipt Window:",e)}),this.$config.openURLConfig)}}});var $t=a(9367),At=a(6778),Ut=a(677);const St=(0,ut.Z)(Tt,[["render",Fe]]),Pt=St;xt()(Tt,"components",{QCard:pt.Z,QCardSection:mt.Z,QItem:_t.Z,QItemSection:ht.Z,QIcon:ft.Z,QSeparator:wt.Z,QItemLabel:vt.Z,QBtn:yt.Z,QTooltip:gt.Z,QCardActions:$t.Z,QDialog:At.Z}),xt()(Tt,"directives",{ClosePopup:Ut.Z});const Dt=(0,n.aZ)({name:"TransactionsTable",components:{TransactionInfo:Pt,TransactionCheckInfo:Wt},data(){return{$q:(0,N.Z)(),date:B.ZP,navigationActive:!1,receipt:{status:!1,code:null},separator:"horizontal",loading:!1,dense:!1,filter:"",selected:[],pagination:{sortBy:"id",descending:!0,page:1,rowsPerPage:10,rowsNumber:0},columns:[{name:"id",label:"ID",align:"center",field:e=>e.id,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"text-primary",headerClasses:""},{name:"trans_id",label:"Transaction Id",align:"left",field:e=>e.trans_id,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"text-primary text-weight-bold",headerClasses:"text-primary",required:!0},{name:"trans_or",label:"OR No.",align:"left",field:e=>e.trans_or,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"",headerClasses:""},{name:"trans_ar",label:"AR No.",align:"left",field:e=>e.trans_ar,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"",headerClasses:""},{name:"account_id",label:"Account ID",align:"left",field:e=>e.account_id,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"",headerClasses:""},{name:"account_name",label:"Account Name",align:"left",field:e=>e.account_name,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"",headerClasses:""},{name:"email",label:"Email",align:"left",field:e=>e.email,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"",headerClasses:""},{name:"phone",label:"Phone",align:"left",field:e=>e.phone,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"",headerClasses:""},{name:"receiver_id",label:"Receiver Id",align:"left",field:e=>e.receiver_id,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"",headerClasses:""},{name:"branch_location",label:"Branch Location",align:"left",field:e=>e.branch_location,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"",headerClasses:""},{name:"paymethod",label:"Pay Method",align:"left",field:e=>e.paymethod,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"",headerClasses:""},{name:"channel",label:"Channel",align:"left",field:e=>e.channel,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"",headerClasses:""},{name:"channel_online",label:"(Online) Channel",align:"left",field:e=>e.channel_online,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"",headerClasses:""},{name:"channel_online_confirmed",label:"(Online) Confirmed",align:"left",field:e=>e.channel_online_confirmed,format:(e,t,a)=>a?e:`${null!=e?String(e).toUpperCase():""}`,sortable:!0,classes:"",headerClasses:""},{name:"date_online_confirmed",label:"(Online) Date Confirmed",align:"left",field:e=>e.date_online_confirmed,format:(e,t,a,n)=>a?e:e&&null!=e&&void 0!==e?n?B.ZP.formatDate(e,"ddd MMM D, YYYY h:mma"):(0,Y.K8)(e):"",sortable:!0,classes:"",headerClasses:""},{name:"date_paid",label:"Date Paid",align:"left",field:e=>e.date_paid,format:(e,t,a,n)=>a?e:e&&null!=e&&void 0!==e?n?B.ZP.formatDate(e,"ddd MMM D, YYYY h:mma"):(0,Y.K8)(e):"",sortable:!0,classes:"",headerClasses:""},{name:"date_due",label:"Date Due",align:"left",field:e=>e.date_due,format:(e,t,a,n)=>a?e:e&&null!=e&&void 0!==e?n?(0,Y.K8)(e):B.ZP.formatDate(e,"ddd MMM D, YYYY"):"",sortable:!0,classes:"",headerClasses:""},{name:"amount_paid",label:"Amount Paid",align:"right",field:e=>e.amount_paid,format:(e,t,a)=>a?e:`PHP ${(0,Y.lb)(e)}`,sortable:!0,classes:"text-weight-medium",headerClasses:""},{name:"amount_received",label:"Amount Received",align:"right",field:e=>e.amount_received,format:(e,t,a)=>a?e:`PHP ${(0,Y.lb)(e)}`,sortable:!0,classes:"",headerClasses:""},{name:"trans_fee",label:"Transaction Fee",align:"right",field:e=>e.trans_fee,format:(e,t,a)=>a?e:`PHP ${(0,Y.lb)(e)}`,sortable:!0,classes:"",headerClasses:""},{name:"check_bus_style",label:"(Check) Business Style",align:"left",field:e=>e.check_bus_style,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"",headerClasses:""},{name:"check_no",label:"(Check) No",align:"left",field:e=>e.check_no,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"",headerClasses:""},{name:"check_date",label:"(Check) Date",align:"left",field:e=>e.check_date,format:(e,t,a)=>a?e:B.ZP.formatDate(e,"MMMM D, YYYY"),sortable:!0,classes:"",headerClasses:""},{name:"check_bank",label:"(Check) Bank",align:"left",field:e=>e.check_bank,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"",headerClasses:""},{name:"check_type",label:"(Check) Type",align:"left",field:e=>e.check_type,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"",headerClasses:""},{name:"business_style",label:"Business Style",align:"left",field:e=>e.business_style,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"",headerClasses:""},{name:"deleted",label:"Date Deleted",align:"left",field:e=>e.deleted,format:(e,t,a,n)=>a?e:e&&null!=e&&void 0!==e?n?B.ZP.formatDate(e,"ddd MMM D, YYYY h:mma"):(0,Y.K8)(e):"",sortable:!0,classes:"",headerClasses:""},{name:"confirm_by",label:"Confirmed By",align:"left",field:e=>e.confirm_by,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"",headerClasses:""},{name:"deleted_by",label:"Deleted By",align:"left",field:e=>e.deleted_by,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"",headerClasses:""},{name:"updated_by",label:"Updated By",align:"left",field:e=>e.updated_by,format:(e,t,a)=>a?e:`${null!=e?e:""}`,sortable:!0,classes:"",headerClasses:""}],data:[],expanded:[],visibleColumns:["trans_id","account_id","paymethod","date_paid","amount_paid","amount_received","trans_fee"],popupEditableColumns:["trans_or","trans_ar","account_name","email","phone"],originalRows:[],originalFilteredRows:[],viewDeleted:!1,viewAllTransaction:!1,onRequestLimited:null,onRequestDelayed:null,number_columns:["id","account_id","receiver_id","date_online_confirmed","date_paid","date_due","amount_paid","amount_received","trans_fee","check_date"],view_trans:null,dialogTransInfo:!1,dialogTransCheckInfo:!1,exportTable:null,relativeDate:Y.K8,plain_date_paid:!1,autoScroll:!1,tableFullScreen:!1,moreTransOptions:null}},props:{_style:{type:String},_class:{type:String},table_style:{type:String},table_class:{type:String},card_style:{type:String},card_class:{type:String},withAutoScroll:{type:Boolean,default:!0}},computed:{...(0,X.rn)("user",["authenticated"]),...(0,X.rn)("transaction",["transactions","transactions_summary","transactions_summary_all"]),tableClass(){return!0===this.navigationActive?"shadow-3":null},paginationLabel(){const{index:e}=this.tableInfo(),{from:t,to:a,total:n}=e;return t&&a&&n?`${t}-${a} of ${n}`:""}},async created(){this.onRequest({pagination:this.pagination,filter:this.filter}),this.$root.isAdmin?this.visibleColumns.push("receiver_id","branch_location"):this.visibleColumns.push("account_name"),this.onRequestLimited=(0,H.Z)(this.onRequest,3e3),this.onRequestDelayed=(0,$e.Z)(this.onRequest,1e3),this.exportTable=(0,H.Z)(this.exportTableNow,3e3),this.pagination.rowsNumber=(0,Y.Sw)(this.transactions_summary,"count."+(this.viewAllTransaction?"overall":"thisday"),0)},watch:{autoScroll:{async handler(e){this.controlScrollDenseFullscreen({autoscroll:e})},deep:!0},dense:{async handler(e){this.controlScrollDenseFullscreen({})},deep:!0},tableFullScreen:{async handler(e){this.controlScrollDenseFullscreen({})},deep:!0},viewDeleted:{async handler(e){this.onRequestDelayed({pagination:this.pagination,filter:this.filter},1e3)},deep:!0},viewAllTransaction:{async handler(e){this.onRequestDelayed({pagination:this.pagination,filter:this.filter},1e3)},deep:!0},transactions_summary:{async handler(e){if(this.onRequestDelayed({pagination:this.pagination,filter:this.filter},1e3),e){const t=(0,Y.Sw)(e,"count."+(this.viewAllTransaction?"overall":"thisday"),0);t&&!this.pagination.rowsNumber&&(this.pagination.rowsNumber=t)}},deep:!0},navigationActive:{async handler(e){this.separator=!0===e?"cell":"horizontal"},deep:!0}},methods:{...(0,X.nv)("transaction",["getAllTransactions","updateTransaction"]),showCustomMenu(e){this.moreTransOptions=e},rowsPerPageOptions(e){if(e)return[0];let t=[5];const{index:a,rowsPerPage:n}=this.tableInfo(),{total:s}=a,o=[10,15,20,25,50];return!n||t.includes(n)||o.includes(n)||t.push(n),s?(o.forEach(((e,a)=>{(e<=s||s<=n&&e<=n)&&-1===t.indexOf(e)&&t.push(e),a===o.length-1&&s>2*e&&-1===t.indexOf(e/2)&&t.push(e/2)})),t.concat(0)):t.concat(o,0)},tableInfo(e=!1){const{computedRows:t,computedRowsNumber:a,filteredSortedRows:n}=this.$refs.myTransactionsTable||{},{page:s,rowsPerPage:o,rowsNumber:l}=this.pagination;let i=s>1?s*o-o+1:s,r=s>1?o+(s*o-o):o,c=l||a;return c=c||0,!c&&t&&(c=t.length),!c&&r&&(c=r),r=r>c?c:r,{all:e?this.$refs.myTransactionsTable||{}:void 0,computedRows:t,computedRowsNumber:a,filteredSortedRows:n,page:s,rowsPerPage:o,rowsNumber:l,index:{from:i,to:r,total:c}}},controlScrollDenseFullscreen({autoscroll:e,dense:t,tableFullScreen:a}){let n=this.tableFullScreen?20:10;const{to:s}=this.tableInfo().index;this.dense&&(n+=5);let o=!1;"boolean"===typeof e&&!1===e&&s>n&&(o=!0,this.pagination.rowsPerPage=10),(o||this.pagination.rowsPerPage<n)&&this.onRequestLimited({pagination:{...this.pagination,rowsPerPage:n},filter:this.filter},1e3)},async tableScreenUpdate(e){this.tableFullScreen=!e},getSelectedString(){return 0===this.selected.length?"":`${this.selected.length} transaction${this.selected.length>1?"s":""} selected`},async updateTableTrans(e,t,a){let n={};Array.isArray(e)&&Array.isArray(t)?e.forEach(((e,a)=>{n[e]=t[a]})):n[e]=t,n["updated_by"]=(0,Y.Sw)(this.authenticated,"data.userid",null);const s=await this.updateTransaction({query:[],data:n,trans_id:(0,Y.Sw)(a,"row.trans_id","")});return(0,Y.Sw)(s,"response.data.success")||console.error("Error:",(0,Y.Sw)(s,"response.data.error.message","Unknown Error")),s},wrapCsvValue(e,t){let a=void 0!==t?t(e,null,!0):e;return isNaN(a)&&B.ZP.isValid(a)?a=B.ZP.formatDate(a,"MMMM D, YYYY HH:mm:ss"):!isNaN(a)&&/^[0-9]+\.[0-9]+$/.test(String(a))&&(a=Number(a).toFixed(2)),a=void 0===a||null===a?"":String(a),a=a.split('"').join('""'),`"${a}"`},async exportTableNow(){const e=this.columns.filter((e=>this.visibleColumns.includes(e.name)));let t=[e.map((e=>this.wrapCsvValue(e.label)))].concat(this.data.map((t=>e.map((e=>this.wrapCsvValue("function"===typeof e.field?e.field(t):t[void 0===e.field?e.name:e.field],e.format))).join(",")))).join("\r\n");const a=this.data.length<1?null:(0,Te.Z)("Transactions_Exported_"+Date.now()+".csv",t,"text/csv");!0!==a&&this.$q.notify({message:null===a?"No transaction found!":"Browser denied file download...",type:"negative",timeout:3e3})},async onRequest(e,t=0){this.loading=!0;const{page:a,rowsPerPage:n,sortBy:s,descending:o}=e.pagination,l=e.filter;this.pagination.rowsNumber=await this.getRowsNumberCount(l);const i=0===n&&this.pagination.rowsNumber||n,r=(a-1)*n,c=await this.fetchFromServer(r,i,l,s,o);this.data.splice(0,this.data.length,...c),this.pagination.page=a,this.pagination.rowsPerPage=n,this.pagination.sortBy=s,this.pagination.descending=o,setTimeout((()=>{e.ref&&e.ref.refresh(-1),this.loading=!1}),t)},searchFilterVals(e,t){return Array.isArray(e)?e.filter(((e,a)=>{if((0,Y.JH)(e)){const a=Object.values(e);if(a.join(" ").toLowerCase().includes(t.toLowerCase()))return!0;let n;return a.forEach((e=>{isNaN(e)&&B.ZP.isValid(e)&&(B.ZP.formatDate(e,"dddd MMMM Do, YYYY h:mmaAaa").toLowerCase().includes(t.toLowerCase())||this.relativeDate(e).toLowerCase().includes(t.toLowerCase()))&&(n=!0)})),!!n}return!1})):e},async serverQuery(e=-1,t=-1,a="id",n=!0){let s=[`orderby=${a}`,"reverse="+(n?"true":"false")],o="";e>=0&&s.push(`offset=${e}`),t>=0&&s.push(`limit=${t}`),this.viewAllTransaction||s.push(`date_paid=${(new Date).setHours(0,0,0,0)}`),this.viewDeleted&&(o=`${(0,Y.Sw)(this.$config,"api_path.transaction.all")}`),this.$root.isAdmin||s.push(`receiver_id=${(0,Y.Sw)(this.authenticated,"data.userid")}`);const l=await this.getAllTransactions({query:s,url:o});return Object.values((0,Y.Sw)(l,"response.data.data",[]))},async fetchFromServer(e,t,a,n,s){a||(this.originalRows=await this.serverQuery(e,t,n,s));let o=a?this.originalFilteredRows:this.originalRows;if(n){const e=this.number_columns.includes(n)?s?(e,t)=>parseFloat(t[n])-parseFloat(e[n]):(e,t)=>parseFloat(e[n])-parseFloat(t[n]):s?(e,t)=>e.id>t.id?-1:e.id<t.id?1:0:(e,t)=>e.id>t.id?1:e.id<t.id?-1:0;o.sort(e)}return a?o.slice(e||0,(e||0)+t||0):o},async getRowsNumberCount(e){if(!e){let e=await(0,Y.Sw)(this.viewDeleted?this.transactions_summary_all:this.transactions_summary,"count."+(this.viewAllTransaction?"overall":"thisday"),0);return(!e||e<=0)&&(e=this.originalRows.length),(!e||e<=0)&&(e=this.data.length),e}const t=await this.serverQuery();return this.originalFilteredRows=await this.searchFilterVals(t,e),this.originalFilteredRows.length},async onKey(e){"Enter"==e.key&&e.ctrlKey&&this.selected.length&&this.printSelectedReceipt(),!0===this.navigationActive&&-1!==["Home","End","PageUp","PageDown","ArrowUp","ArrowDown"].indexOf(e.key)&&(e.preventDefault(),this.tableTicker(e.key,{shiftKey:e.shiftKey,controlKey:e.ctrlKey,altKey:e.altKey}))},async tableTicker(e,{shiftKey:t,ctrlKey:a,altKey:n}){const{computedRows:s,computedRowsNumber:o}=this.tableInfo();if(!s||0===s.length)return;const l=this.selected.length>0?s.indexOf(this.selected[this.selected.length-1]):-1,i=this.pagination.page,r=0===this.pagination.rowsPerPage?o:this.pagination.rowsPerPage,c=s.length-1,d=Math.ceil(o/r);let u=l,p=i;switch(e){case"Home":p=1,u=0;break;case"End":p=d,u=r-1;break;case"PageUp":p=i<=1?d:i-1,u<0&&(u=0);break;case"PageDown":p=i>=d?1:i+1,u<0&&(u=r-1);break;case"ArrowUp":l<=0?(p=i<=1?d:i-1,u=i==d?o%r-1:r-1):u=l-1;break;case"ArrowDown":l>=c?(p=i>=d?1:i+1,u=0):u=l+1;break}const m=e=>{const a=e>=0?s[e]:null;t?a&&-1===this.selected.indexOf(a)&&this.selected.push(a):this.selected=a?[a]:[]};p!==this.pagination.page&&p<=d?(this.pagination={...this.pagination,page:p},this.onRequestLimited({pagination:this.pagination,filter:this.filter},1e3).then((e=>{this.$refs.myTransactionsTable.$nextTick((()=>{const e=Math.min(u,s.length-1);m(e)}))}))):m(u)},toggleSelected(e,t){e?this.selected.splice(this.selected.indexOf(t),1):this.selected.push(t)},async onScroll({index:e,from:t,to:a,direction:n,ref:s}){const o=this.tableInfo();"increase"===n&&this.autoScroll&&!0!==this.loading&&e+1===o.index.to/o.page&&e+1<o.index.total&&this.onRequestDelayed({pagination:{...this.pagination,rowsPerPage:this.pagination.rowsPerPage+5},filter:this.filter,ref:s},1e3)},async printSelectedReceipt(e){let t=e&&Array.isArray(e)?e:e?[e]:[];e||this.selected.forEach((e=>{e.trans_id&&t.push(e.trans_id)}));const a=(0,Q.wE)(t);a&&t.length&&(0,L.Z)(a,(e=>{e&&(this.$q.notify({type:"negative",message:`Failed to open receipt ${a}}!`,timeout:1e4}),console.warn("Error Receipt Window:",e))}),this.$config.openURLConfig)},async popupSubmit(e,t,a){const n=(0,Y.Sw)(a,"row.trans_id"),s=await this.updateTableTrans([e],[t],a),o=(0,Y.Sw)(s,"response.data.success");return this.$q.notify({color:o?"primary":"negative",icon:o?"info":"warning",message:o?`Transaction #${n} Updated`:`Error: ${(0,Y.Sw)(s,"response.data.error.message","Update Failed")}`}),!!o},async confirmOnlineTransaction(e){const t=(0,Y.Sw)(e,"row.trans_id"),a="no"==(0,Y.Sw)(e,"row.channel_online_confirmed")?"yes":"no",n=await this.updateTableTrans(["channel_online_confirmed","confirm_by","date_online_confirmed"],[a,(0,Y.Sw)(this.authenticated,"data.userid"),new Date],e),s=(0,Y.Sw)(n,"response.data.success");return this.$q.notify({color:s&&"no"!=a?"primary":"negative",icon:s?"info":"warning",message:s?`Transaction #${t} ${"no"==a?"Unconfirmed":"Confirmed"}`:("no"==a?"Unconfirm":"Confirm")+" Failed"}),!!s},async confirmDeleteUndo(e,t=!1){const a=(0,Y.Sw)(e,"row.trans_id");a&&this.$q.dialog({title:"Confirm",dark:!0,message:`${t?"Restore":"Delete"} transaction ${a}?`,ok:{push:!0,color:"negative"},cancel:{push:!0,color:"primary"},persistent:!1}).onOk((async()=>{const a=await this.updateTableTrans(["deleted","deleted_by"],[t?null:new Date,(0,Y.Sw)(this.authenticated,"data.userid")],e),n=(0,Y.Sw)(a,"response.data.success");this.$q.notify({color:n?"primary":"negative",icon:n?t?"restore":"delete":"warning",message:n?`Transaction has been ${t?"restored":"deleted"}!`:`Failed to ${t?"restore":"delete"} transaction!`})}))}}});var It=a(328),Zt=a(8186),jt=a(2414),Vt=a(811),Mt=a(4600),Rt=a(7011),zt=a(3884),Ot=a(4522),Ft=a(4842),Qt=a(8886),Yt=a(8516);const Nt=(0,ut.Z)(Dt,[["render",We]]),Kt=Nt;xt()(Dt,"components",{QTable:It.Z,QTr:Zt.Z,QTh:jt.Z,QBtn:yt.Z,QTooltip:gt.Z,QBadge:kt.Z,QMenu:Vt.Z,QVirtualScroll:Mt.Z,QList:Rt.Z,QItemLabel:vt.Z,QItem:_t.Z,QItemSection:ht.Z,QIcon:ft.Z,QTd:zt.Z,QPopupEdit:Ot.Z,QInput:Ft.Z,QToggle:Qt.Z,QSelect:Yt.Z,QDialog:At.Z}),xt()(Dt,"directives",{ClosePopup:Ut.Z});const Et=(0,n.Uk)(" No results ");function Bt(e,t,a,s,o,l){const i=(0,n.up)("q-icon"),r=(0,n.up)("q-item-section"),c=(0,n.up)("q-item"),d=(0,n.up)("q-select");return(0,n.wg)(),(0,n.j4)(d,{"lazy-rules":"","input-debounce":100,"transition-duration":100,"transition-show":"jump-up","transition-hide":"jump-down",options:e.check_types_filter,onFilter:e.selectFilter_check_types},{prepend:(0,n.w5)((()=>[(0,n.Wm)(i,{name:"fact_check"})])),"no-option":(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r,{class:"text-grey"},{default:(0,n.w5)((()=>[Et])),_:1})])),_:1})])),_:1},8,["options","onFilter"])}const Lt=(0,n.aZ)({name:"SelectCheckType",data(){return{check_types:[],check_types_filter:null}},async beforeMount(){this.check_types=await(0,Q.Kd)("transactions","select_check_type")},methods:{async selectFilter_check_types(e,t,a){setTimeout((()=>{t((()=>{if(""===e)this.check_types_filter=this.check_types;else{const t=e.toLowerCase();this.check_types_filter=this.check_types.filter((e=>e&&e.toLowerCase().indexOf(t)>-1))}}),(t=>{""!==e&&t.options.length>0&&(t.setOptionIndex(-1),t.moveOptionSelection(1,!0))}))}),100)}}}),Ht=(0,ut.Z)(Lt,[["render",Bt]]),Xt=Ht;xt()(Lt,"components",{QSelect:Yt.Z,QIcon:ft.Z,QItem:_t.Z,QItemSection:ht.Z});const Gt={class:"row items-center justify-end"},Jt={class:"row q-gutter-x-sm"};function ea(e,t,a,o,l,i){const r=(0,n.up)("q-btn"),c=(0,n.up)("q-toolbar-title"),d=(0,n.up)("q-toolbar"),u=(0,n.up)("q-badge"),p=(0,n.up)("q-date"),m=(0,n.up)("q-popup-proxy"),_=(0,n.up)("q-icon"),h=(0,n.up)("q-input"),f=(0,n.up)("q-space"),w=(0,n.up)("q-form"),y=(0,n.up)("q-scroll-area"),g=(0,n.up)("q-card"),b=(0,n.Q2)("close-popup");return e.formIsOk?((0,n.wg)(),(0,n.j4)(g,{key:0,style:{width:"500px","max-width":"80vw","border-radius":"15px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"bg-primary text-white"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{flat:"",round:"",ripple:"","no-caps":"",size:"md",icon:e.icon,onClick:e.icon_click},null,8,["icon","onClick"]),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.title),1)])),_:1})])),_:1}),(0,n.Wm)(y,{"thumb-style":e.$style.scrollarea.thumb,"bar-style":e.$style.scrollarea.bar,style:(0,s.j5)(`max-height: 80vh; height: calc(95px + (75px * ${Object.keys(e.local_inputs).length}))`)},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{autofocus:"",onSubmit:e.doSave,ref:e.form_conf.ref,class:"q-pa-md q-gutter-xs"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(Object.keys(e.local_inputs),((t,a)=>((0,n.wg)(),(0,n.iD)("div",{key:t},[e.local_inputs[t]?((0,n.wg)(),(0,n.j4)(h,{key:0,autofocus:0===a,"clear-icon":e.local_inputs[t].clearicon||"close",placeholder:e.local_inputs[t].placeholder,rounded:e.local_inputs[t].rounded||!1,standout:e.local_inputs[t].standout||!1,outlined:e.local_inputs[t].outlined||!1,"lazy-rules-icon":e.local_inputs[t].lazyrules||!1,clearable:e.local_inputs[t].clearable||!1,type:e.local_inputs[t].type,autogrow:e.local_inputs[t].autogrow,mask:e.local_inputs[t].mask,"fill-mask":!!e.local_inputs[t].mask&&0!=e.local_inputs[t].fillmask,hint:e.local_inputs[t].hint,counter:e.local_inputs[t].counter,label:e.local_inputs[t].label,"input-class":`${e.form_conf.inputclass} ${e.local_inputs[t].inputclass}`,class:(0,s.C_)(e.local_inputs[t].class),style:(0,s.j5)(e.local_inputs[t].style),modelValue:e.local_inputs[t].value,"onUpdate:modelValue":a=>e.local_inputs[t].value=a,rules:e.local_inputs[t].rules||[t=>e.checker.input(!0,500)],onKeyup:e.modKey},{prepend:(0,n.w5)((()=>["date"==e.local_inputs[t].mask||"date"==e.local_inputs[t].type?((0,n.wg)(),(0,n.j4)(r,{key:0,flat:"",round:"",class:"q-pa-sm",icon:e.local_inputs[t].icon},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{cover:"",breakpoint:700,"transition-show":"scale","transition-hide":"scale"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{"today-btn":"",size:"sm",modelValue:e.local_inputs[t].value,"onUpdate:modelValue":a=>e.local_inputs[t].value=a},{default:(0,n.w5)((()=>[(0,n._)("div",Gt,[(0,n.wy)((0,n.Wm)(r,{flat:"",rounded:"",label:"Close",color:"primary"},null,512),[[b]]),(0,n.Wm)(u,{rounded:"",floating:"",transparent:"",style:{top:"5px",right:"5px"},class:"bg-transparent"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(r,{flat:"",round:"",icon:"clear",color:"blue-3"},null,512),[[b]])])),_:1})])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["icon"])):((0,n.wg)(),(0,n.j4)(_,{key:1,class:"q-pa-sm",name:e.local_inputs[t].icon},null,8,["name"]))])),_:2},1032,["autofocus","clear-icon","placeholder","rounded","standout","outlined","lazy-rules-icon","clearable","type","autogrow","mask","fill-mask","hint","counter","label","input-class","class","style","modelValue","onUpdate:modelValue","rules","onKeyup"])):(0,n.kq)("",!0)])))),128)),(0,n._)("div",Jt,[(0,n.Wm)(f),(0,n.Wm)(r,{flat:"",ripple:"",rounded:"",label:"Cancel",color:"grey-6",class:"hover-text-primary",onClick:e.doCancel},null,8,["onClick"]),(0,n.Wm)(r,{ripple:"",rounded:"",unelevated:"",label:"Save",color:"primary","icon-right":"done_all",onClick:e.submitValidation},null,8,["onClick"])])])),_:1},8,["onSubmit"])])),_:1},8,["thumb-style","bar-style","style"])])),_:1})):(0,n.kq)("",!0)}const ta=(0,n.aZ)({name:"InputsForm",emits:["save","cancel","close"],data(){return{$q:(0,N.Z)(),checker:Y.ZZ,local_inputs:{},form_conf:{ref:"inputs_form",inputclass:"form_active_input"},formIsOk:!1}},props:{icon_click:{},icon:{},title:{},inputs:{}},computed:{...(0,X.rn)("user",["authenticated"])},created(){this.local_inputs=this.inputs,this.formIsOk=this.title&&this.icon&&this.inputs&&this.local_inputs&&Object.keys(this.local_inputs).length,this.formIsOk||this.$emit("close")},methods:{submitValidation(){const e=(0,Y.Sw)(this.$refs,`${this.form_conf.ref}`);e&&e.submit()},async doSave(){this.$emit("save",this.local_inputs)},async doCancel(){this.$emit("cancel",this.local_inputs)},async modKey(e){switch(e.key){case"Enter":if(e.preventDefault(),e.ctrlKey&&e.shiftKey&&e.altKey);else if(e.altKey);else if(e.shiftKey)(0,Y.A_)(e,!1);else if(e.ctrlKey)this.submitValidation();else{const t=await(0,Y.A_)(e);t||this.$refs[this.form_conf.ref].submit()}break;default:break}}},beforeUnmount(){this.$emit("close")}});var aa=a(9570),na=a(3747),sa=a(5269),oa=a(3944),la=a(5626),ia=a(2025);const ra=(0,ut.Z)(ta,[["render",ea]]),ca=ra;xt()(ta,"components",{QCard:pt.Z,QToolbar:aa.Z,QBtn:yt.Z,QToolbarTitle:na.Z,QScrollArea:bt.Z,QForm:sa.Z,QInput:Ft.Z,QPopupProxy:oa.Z,QDate:la.Z,QBadge:kt.Z,QIcon:ft.Z,QSpace:ia.Z}),xt()(ta,"directives",{ClosePopup:Ut.Z});const da=(0,n.aZ)({name:"PageIndex",components:{TransactionsTable:Kt,SelectCheckType:Xt,MoreTransInfo:ca},data(){return{$q:(0,N.Z)(),date:B.ZP,format:K.ZP,formatMoney:Y.lb,search:"",inputs_empty:!0,dialog_transactions_options:!1,dialog_multiple_transactions:!1,checker:Y.ZZ,form_conf:{ref:"transactions_form",inputclass:"form_active_input"},local_transactions:{},local_trans_options:{total_amount:0,paymethod:null,check_type:null,channel:null,channel_online:null,online_confimed:null,open_check_date_picker:!1},local_trans_payment:{amount_received:null,check:{check_bus_style:null,check_no:null,check_date:null,check_bank:null,check_type:null}},trans_options:{paymethod:["Cash","Check","Debit"],channel:["OverTheCounter","Internet","ATM","Mobile","Phone"],check_type:["Local","Regional","On Us","Managers Check"],channel_online:["Gcash","Coins.ph","Paymaya","Debit"],online_confimed:["yes","no","declined"]},trans_options_filtered:null,last_input_ref_focus:null,form_trans_status:{},form_isprocessing:!1,seamless_card:!0,submitTransactions:null,fabAdminAction:!1,local_convenience_fee:0,fabPos:[18,18],draggingFab:!1,selectedTrans:null,dialogMoreDetails:!1,disableAmountReceived:!1}},computed:{...(0,X.rn)("user",["authenticated"]),local_transactions_length(){return Object.keys(this.local_transactions).length},local_trans_raw_total(){let e=0,t=0;const a=Object.keys(this.local_transactions).map((e=>Number(this.local_transactions[e].amount||0)));a.forEach((t=>e+=t));const n=Object.keys(this.local_transactions).map((e=>Number(this.local_transactions[e].amount_received||(this.local_transactions[e].amount?Number(this.local_transactions[e].amount)+this.$root.transactions_fee:0)||0)));return n.forEach((e=>t+=e)),{total_money:Number(e),money_list:Array.from(a),input_received_total:t,input_received_list:Array.from(n)}},longTrans(){return this.local_transactions_length>10},transactionChange(){return Number((0,Y.Sw)(this.local_trans_payment,"amount_received",0))-Number((0,Y.Sw)(this.local_trans_options,"total_amount",0))},payViaCheck(){return!!(0,Y.Sw)(this.local_trans_payment,"check.check_no")},payViaCheckReady(){let e=!0;const t=(0,Y.Sw)(this.local_trans_payment,"check.check_date");return this.payViaCheck?(0,Y.Sw)(this.local_trans_options,"paymethod")!=this.trans_options.paymethod[1]?e=!1:(0,Y.Sw)(this.local_trans_payment,"check.check_bus_style")&&t&&this.dateBetween(t)&&(0,Y.Sw)(this.local_trans_payment,"check.check_bank")&&(0,Y.Sw)(this.local_trans_payment,"check.check_type")||(e=!1):e=!1,e},transactionsReady(){const{money_list:e}=this.local_trans_raw_total;let t=!0;return-1!==e.indexOf(0)||this.inputs_empty?t=!1:(0,Y.Sw)(this.local_trans_options,"total_amount",0)&&(0,Y.Sw)(this.local_trans_payment,"amount_received",0)?this.transactionChange<0?t=!1:this.payViaCheck&&(t=this.payViaCheckReady):t=!1,t}},async created(){this.$root.setMeta({title:"Home"}),this.local_convenience_fee=Number(this.$root.transactions_fee).toFixed(2),this.local_transactions_length||this.addTransaction(),this.local_trans_options.paymethod||(this.local_trans_options.paymethod=this.trans_options.paymethod[0]),this.local_trans_options.channel||(this.local_trans_options.channel=this.trans_options.channel[0]),this.focusBackInput(),this.trans_options_filtered={...this.trans_options},this.submitTransactions=(0,H.Z)(this.submitTransactionsNow,2e3),Object.keys(this.trans_options).forEach((async e=>{this.trans_options[e]=await(0,Q.Kd)("transactions",`select_${e}`)}))},watch:{["$q.screen"]:{async handler(e){e.width-50<this.fabPos[0]&&(this.fabPos[0]=e.width-50),e.height-100<this.fabPos[1]&&(this.fabPos[1]=e.height-100)},deep:!0},local_trans_raw_total:{async handler(e){const{money_list:t,total_money:a,input_received_total:n}=e;this.inputs_empty=!a;const s=t.filter((e=>e)).length*this.$root.transactions_fee;this.local_trans_options.total_amount=a+s,this.updateReceivedDetails()},deep:!0},payViaCheck:{async handler(e){e?(this.local_trans_options.paymethod=this.trans_options.paymethod[1],this.local_trans_payment.check.check_type=this.trans_options.check_type[0],this.local_trans_payment.check.check_date=B.ZP.formatDate(new Date,"YYYY/MM/DD"),this.local_trans_payment.check.check_bus_style="Default",this.disableAmountReceived=!1):(this.local_trans_options.paymethod=this.trans_options.paymethod[0],this.resetPaymentOptions(!0),this.updateReceivedDetails())},deep:!0},dialog_transactions_options:{async handler(e){e||(this.dialog_multiple_transactions=!1)},deep:!0},local_transactions_length:{async handler(e){e?1===e&&(this.disableAmountReceived=!1):(this.form_trans_status={},this.resetPaymentOptions(),this.disableAmountReceived=!1,this.local_trans_payment.amount_received=null,setTimeout((()=>{this.addTransaction()}),1e3))},deep:!0},seamless_card:{async handler(e){this.focusBackInput()},deep:!0}},methods:{...(0,X.nv)("user",["getUsers","startRealtimeUsers"]),...(0,X.nv)("company",["updateCompany"]),...(0,X.nv)("transaction",["getAllTransactions","newTransaction","updateTransaction"]),async updateReceivedDetails(){const{total_money:e,money_list:t,input_received_total:a,input_received_list:n}=this.local_trans_raw_total;!this.payViaCheck&&-1===t.indexOf(0)&&a&&this.local_trans_options.total_amount!=a?(this.local_trans_payment.amount_received=a,this.disableAmountReceived=!0):this.disableAmountReceived=!1},async saveTransInfo(e){if(!this.selectedTrans)return;const t=this.local_transactions[this.selectedTrans],a=Object.keys(e);a.map((t=>e[t].value)).forEach(((e,n)=>{t&&(this.local_transactions[this.selectedTrans][a[n]]=e)})),this.dialogMoreDetails=!1},genMoreTransInfo(){if(!this.selectedTrans)return;const e=e=>(0,Y.Sw)(this.local_transactions,`${this.selectedTrans}.${e}`,""),t={date_due:{label:"Due Date",icon:"event",clearable:!0,mask:"date",rounded:!0,standout:"bg-primary text-white",value:e("date_due")||B.ZP.formatDate(new Date,"YYYY/MM/DD"),rules:[e=>this.checker.input(this.dateBetween(e,B.ZP.addToDate(new Date,{years:-1},B.ZP.addToDate(new Date,{years:1})))||"",500)]},email:{label:"Email Address",icon:"email",clearable:!0,type:"email",rounded:!0,standout:"bg-primary text-white",value:e("email")},phone:{label:"Phone Number",icon:"phone",clearable:!0,mask:"(###) ### - ####",fillmask:!1,rounded:!0,standout:"bg-primary text-white",value:e("phone")},business_style:{label:"Business Style",icon:"business",clearable:!0,rounded:!0,standout:"bg-primary text-white",value:e("business_style")}};let a={};return!this.payViaCheck&&this.local_transactions_length>1&&(a["amount_received"]={label:"Amount Received",icon:"payment",clearable:!0,type:"number",rounded:!0,standout:"bg-primary text-white",value:e("amount_received"),placeholder:Number(e("amount"))+this.$root.transactions_fee,rules:[t=>this.checker.input(""===t||Number(t)>=Number(e("amount"))+this.$root.transactions_fee||`Amount paid + transaction fee is ${Number(e("amount"))+this.$root.transactions_fee}`,500)]}),a={...a,...t},{title:`Account: ${this.cleanAccountID(e("accnt_id"))}`,icon:"badge",inputs:a}},async updateConvenienceFee(e,t){if(e!=t){const a={id:(0,Y.Sw)(this.$root.company,"id",0),data:{convenience_fee:e}};this.updateCompany(a).then((a=>{const n=(0,Y.Sw)(a,"response.data");this.local_convenience_fee=n.success?e:t,this.$q.notify({message:n.success?"Convenience Fee has been Updated":"Failed to Update Convenience Fee",type:n.success?"positive":"negative",timeout:3e3})})).catch((e=>{this.$q.notify({message:"Error Updating Convenience Fee",type:"negative",timeout:3e3})}))}},cleanAccountID(e){return e&&e.replaceAll(" ","").replaceAll("-","")||"0"},async searchAccountID(e,t){if(e=this.cleanAccountID(e),e&&11===e.length){const a=await this.getAllTransactions({query:[`account_id=${e}`,"orderby=id","limit=1","reverse=true"]}),n=(0,Y.Sw)(a,"response.data.data[0]");return n?(this.local_transactions[t].accnt_name=n.account_name,this.local_transactions[t].email=n.email,this.local_transactions[t].phone=n.phone,this.local_transactions[t].business_style=n.business_style,this.$refs[`${t}_amount`][0].focus()):this.$refs[`${t}_accnt_name`][0].focus(),this.$q.notify({type:"info",message:n?`Account: ${n.account_name}`:`New Account: ${e}`,color:"accent"}),n}return this.local_transactions[t].accnt_name="",!1},async submitTransactionsNow(){if(this.transactionsReady&&this.longTrans&&!this.dialog_multiple_transactions)return this.dialog_multiple_transactions=!0,void(this.dialog_transactions_options=!0);this.$refs[this.form_conf.ref]&&!this.form_isprocessing&&this.$refs[this.form_conf.ref].submit()},async submitTransactionsForm(){if(this.transactionsReady&&!this.form_isprocessing){this.form_isprocessing=!0;const e=Object.keys(this.local_transactions);e.forEach(((t,a)=>{const n=e=>(0,Y.Sw)(this.local_transactions,`${t}.${e}`,"");let s={receiver_id:String((0,Y.Sw)(this.authenticated,"data.userid")),account_id:this.cleanAccountID(n("accnt_id")),account_name:n("accnt_name"),branch_location:(0,Y.Sw)(this.authenticated,"data.branch_location"),paymethod:(0,Y.Sw)(this.local_trans_options,"paymethod"),channel:(0,Y.Sw)(this.local_trans_options,"channel"),amount_paid:(0,Y.Sw)(this.local_transactions,`${t}.amount`,0),amount_received:n("amount_received"),trans_fee:this.$root.transactions_fee,email:n("email")||null,phone:n("phone")||null,date_due:n("date_due")||null,business_style:n("business_style")||null};this.payViaCheck&&(s.amount_received=Number(s.amount_paid)+Number(this.$root.transactions_fee)),s.amount_received||(s.amount_received=this.local_transactions_length>1?Number(s.amount_paid)+Number(this.$root.transactions_fee):this.local_trans_payment.amount_received),this.payViaCheck&&(s.check_bus_style=this.local_trans_payment.check.check_bus_style,s.check_no=this.local_trans_payment.check.check_no,s.check_date=new Date(this.local_trans_payment.check.check_date),s.check_bank=this.local_trans_payment.check.check_bank,s.check_type=this.local_trans_payment.check.check_type),this.processTransaction(t,s,e.length)}))}else this.$refs[this.form_conf.ref]&&(this.$refs[this.form_conf.ref].validate(),this.form_isprocessing=!1)},async processTransaction(e,t,a=1,n=0){const s=this.newTransaction({data:t}).then((async t=>{this.form_trans_status[e]=(0,Y.Sw)(t,"response.data",{success:0,error:{message:"Unknown Error"}});const s=(0,Y.Sw)(this.form_trans_status,`${e}.success`);s?this.removeTransInput(e,n):this.errorTransInput(e,(0,Y.Sw)(this.form_trans_status,`${e}.error.message`,"Payment Failed")),this.$q.notify({type:s?"positive":"negative",message:`Transaction #${(0,Y.Sw)(this.form_trans_status,e+".data.trans_id",e)} ${s?"Successful":"Failed"}`}),this.local_transactions_length&&(this.local_trans_payment.amount_received=this.local_trans_options.total_amount),a==Object.keys(this.form_trans_status).length&&this.doneAllTransaction()})).catch((t=>{this.form_trans_status[e]={success:0,error:{message:"Unknown Error"}}}));return s},async doneAllTransaction(){this.focusBackInput();const e={...this.form_trans_status},t=Object.keys(e).filter((t=>(0,Y.Sw)(e,`${t}.data.trans_id`,!1))).map((t=>(0,Y.Sw)(e,`${t}.data.trans_id`))),a=(0,Q.wE)(t);a&&t.length&&(0,L.Z)(a,(e=>{e&&(this.$q.notify({type:"negative",message:`Failed to open receipt ${a}}!`,timeout:1e4}),console.warn("Error Receipt Window:",e))}),this.$config.openURLConfig),setTimeout((()=>{this.form_trans_status={},this.form_isprocessing=!1}),500)},async addTransaction(e=1){while(e){const t=(0,E.Z)();this.local_transactions[t]||(this.local_transactions[t]={accnt_id:null,accnt_name:null,amount:null}),e--}},async resetPaymentOptions(e=!1,t=0){setTimeout((()=>{Object.keys(this.local_trans_payment).forEach((t=>{(0,Y.JH)(this.local_trans_payment[t])?Object.keys(this.local_trans_payment[t]).forEach((e=>{this.local_trans_payment[t][e]=null})):e||(this.local_trans_payment[t]=null)}))}),t)},async resetAllTransaction(){const e=()=>{Object.keys(this.local_transactions).forEach((e=>{this.removeTransInput(e,1e3)})),this.$refs[this.form_conf.ref]&&this.$refs[this.form_conf.ref].resetValidation(),this.resetPaymentOptions(!1,1e3)};this.local_transactions_length>1?this.$q.dialog({title:"Confirm",dark:!0,message:`Are you sure to remove ${this.local_transactions_length} transaction form${this.local_transactions_length>1?"s":""}?`,ok:{push:!0,color:"negative"},cancel:{push:!0,color:"primary"},persistent:!1}).onOk((async()=>{e()})):e()},dateBetween(e,t,a,n={onlyDate:!0,inclusiveFrom:!0,inclusiveTo:!0}){return e=new Date(e),t=t?new Date(t):(new Date).setHours(0,0,0,0),a=a?new Date(a):B.ZP.addToDate(new Date,{years:1}),!!(B.ZP.isValid(e)&&B.ZP.isValid(t)&&B.ZP.isValid(a)&&B.ZP.isBetweenDates(e,t,a,n))},payCheckInputRules(e,t=!1){return this.payViaCheck&&!!e||t},validateAmountReceived(e=!1){return!this.payViaCheck||0===this.transactionChange||e},async modKey(e,t){let a=!1;switch(e.key){case"Enter":if(e.preventDefault(),e.ctrlKey&&e.shiftKey&&e.altKey)t&&this.removeTransInput(t.trans_code,250);else if(t&&e.ctrlKey&&e.shiftKey)(0,Y.Sw)(this.local_transactions,`${t.trans_code}.accnt_id`)&&(this.selectedTrans=t.trans_code,this.dialogMoreDetails=!this.dialogMoreDetails);else if(e.altKey)this.addTransaction();else if(e.shiftKey)(0,Y.A_)(e,!1);else if(e.ctrlKey)this.transactionsReady&&!this.form_isprocessing?this.longTrans?(this.dialog_multiple_transactions=!0,a=!0):this.submitTransactions():this.$refs[this.form_conf.ref]&&this.$refs[this.form_conf.ref].validate();else{const t=await(0,Y.A_)(e);t||!this.transactionsReady||this.form_isprocessing?t||this.form_isprocessing||(a=!1,await(0,Y.A_)(e,0)):this.form_isprocessing?this.$refs[this.form_conf.ref]&&this.$refs[this.form_conf.ref].validate():(this.longTrans&&(this.dialog_multiple_transactions=!0),a=!0)}a&&!this.form_isprocessing&&(this.dialog_transactions_options=!0);break}},getTransIndex(e,t,a){let n=0;return isNaN(t)||isNaN(a)||("payment_options"===e&&(n=3*this.local_transactions_length+a+t),(0,Y.Sw)(this.local_transactions,e)&&(n=t*this.local_transactions_length+a)),n},changeInputFocus(e){this.last_input_ref_focus=e},async focusBackInput(e=1e3){setTimeout((()=>{const e=Object.keys(this.local_transactions);e&&this.last_input_ref_focus&&(0,Y.Sw)(this.$refs,`${this.last_input_ref_focus}.0`,!1)?this.$refs[this.last_input_ref_focus][0].focus():e&&e[0]&&(0,Y.Sw)(this.$refs,`${e[0]}_accnt_id.0`,!1)&&this.$refs[`${e[0]}_accnt_id`][0].focus()}),e)},async removeTransInput(e,t=0){(0,Y.Sw)(this.local_transactions,e,!1)&&setTimeout((()=>{Object.keys((0,Y.Sw)(this.local_transactions,e,{})).forEach((t=>{(0,Y.Sw)(this.$refs,`${e}_${t}.0`,!1)&&this.$refs[`${e}_${t}`][0].resetValidation()})),delete this.local_transactions[e]}),t),this.focusBackInput()},async errorTransInput(e,t){this.local_transactions[e]&&(this.local_transactions[e].error=t)},async moveFab(e){this.draggingFab=!0!==e.isFirst&&!0!==e.isFinal,this.fabPos=[(window.innerWidth-50>this.fabPos[0]||e.delta.x>0)&&(this.fabPos[0]>-15||e.delta.x<0)?this.fabPos[0]-e.delta.x:this.fabPos[0],(window.innerHeight-100>this.fabPos[1]||e.delta.y>0)&&(this.fabPos[1]>-15||e.delta.y<0)?this.fabPos[1]-e.delta.y:this.fabPos[1]]}},beforeRouteLeave(){this.seamless_card=!1}});var ua=a(4379),pa=a(846),ma=a(1007),_a=a(9200),ha=a(9975),fa=a(1598),wa=a(8406);const ya=(0,ut.Z)(da,[["render",F]]),ga=ya;xt()(da,"components",{QPage:ua.Z,QCard:pt.Z,QList:Rt.Z,QItem:_t.Z,QItemSection:ht.Z,QItemLabel:vt.Z,QBtn:yt.Z,QBadge:kt.Z,QPopupEdit:Ot.Z,QInput:Ft.Z,QIcon:ft.Z,QTooltip:gt.Z,QForm:sa.Z,QPopupProxy:oa.Z,QDate:la.Z,QDialog:At.Z,QBar:pa.Z,QSpace:ia.Z,QCardSection:mt.Z,QSeparator:wt.Z,QCardActions:$t.Z,QPageSticky:ma.Z,QFab:_a.Z,QFabAction:ha.Z,QLinearProgress:fa.Z}),xt()(da,"directives",{ClosePopup:Ut.Z,TouchPan:wa.Z})},9949:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAACXBIWXMAAAsSAAALEgHS3X78AAACtVBMVEUjpu0ipewjrPUipewipuwjp+wq0vdHcEwipewjpewipewkpOpZxesjpu0opekjpewjpuwmvPYjpu0jpuwipu0kqvAipeYkq/EkrPMjpu0q0vcipu0ipu0lrfIlrPAipu4qmusipu4ipewip+4ip+8ip+8ip+8kpOojpewkr/Uip/Acquwkqe8ipu0ipuwhpOs83vcipewjpewlrPApmucipu0pmeglrfMlrfElrvMipu4jrPMlrvMqmeUlrvQipu0om/MipewlrvUom+8ipewom/Faxesnm/IrmOMip+8ipu8lr/UkrPQjpuwipu0ipewjqfArmOIjq/Itu/Qmv/grl+Emu/YjpOotluIip+wkvfeU0+BTw+wppusjpesksPUjpuskqe9H3/5G3/4kqO5I3Pspv/gkq/FD4P5B4P43y/Q/4f8kqO4jpuwkp+1F2PYjpu0dqesdquxG2vkipe0/4v8jqPBF1vQcqesbquwjpuojpelF/P9F0/EcqOso1vl71vslu/Y63/8bq+w94/8drO4opukkrPQhpu4cp+kjq/MhpOspq+8cqOoopehE0e4jqPEjqPAhpOsjqfEbq+0jq/Qjp+wjp+wipe0r0fcipu1Q1PsjrPUmvPYnvPFL1/wkqfAkrfRF2v4jq/UkqfAzx/Y73fcopukswvc83vcjqOw92/0kqfAipe0jqOw83vcjqO0npOUhsvE32vohpOsjqe8kqO0kqvA82vQjp+soyek83vggo+shpusy1/Ut1/IhpOYipeYipOYmvPcmu/Yjpu0jpu4jqPAjp+8kr/olsfwipu4krPQjp+4krvoipu0jqfEjqfIjqvIipe0jqPEkr/sjq/MjqvMlsPwkrvkjqO8krfcip+8krPUksPwlsf0kr/klr/Ylsf4ksv4jp/AkrfUjqvEE9hfgAAAAxXRSTlP++4j4/vovAP7+/fQY+3P7+0r9/v73Rfjr/C7y76+y6gLo9ebk4d/z/ajbBfX7+PYl+vyxAu0CrbCs7OqrAqvuAvaqAvQCGAIC4t6p6/z1+foCv1pDAkz0AvpGDBoF96H29yEh9yBk9yIiQSL09vYg+gUFIP0j2h8FBfb1Gh8FKhFFJwUkBXPozwX69GsFdR/Z2P3YBYb79/4v/ByHSwIb9YUcifYDFHUEJ/Qe9/r4JPgfAyD19/n5JPMmJfjyIyVJREVKST1nnQUAAAIZSURBVDjLfdPld9NQHMbx3yBw7y2UbKRQOvcxZcPd3d3d3d1hw93d3d1dbprRhUKnuPN3cJOmkITA5+RFXnzPc3JyE1i9bcvm2Skp7RMTExLaxcfHxcXEREXVr9UkPDwsrGVsbDPY+sFXXOzzvWZeMQUFbtVbiZFlmcI6sOlgMxtUkzE18v65dVCHRaADFOC6bAOVwFHBQbzEqCrc/+4RRfZA7yXKsXkiuQ0keHDrxvnjh9PSJg7FlHDEOzipTzmdJLj76OG1c0cP7Vs6vp8oACnqMWBgeZ3WgAKWlBE5wHn9kVEgOIH2+IPeaFDfXt3aNqpZOzq6RaumbeD2vczMS2dOIhTqD3qaF+7cvHj57JcjCJVVA6n7kOTkDs0bN6xXJyKibo3ISLggeUTb12P+gFL8rqSwMFf1UvEGMigHWSX7Awu0Ex+s4Hl28Xz1YCgtYgh6UUoLKAbzqzYEVmdhXCAU9AR2FsaFfIF6flO+Gcm0IOR3dTqdYyopho2cPGn+AlOAi0YvXJ4za8K4sSOGj5oxZc6iTeYgb5n5TZqDA+j0we3Z81JTp0+bu3jDmhV/BSHo6v8XQhC6cqqCZuXG9VbB42+5AR/XWgVPwK6ZSlZZBZXdxOH/bUCs8q9AOwuZBVQLQg2BdhhsoYtMadAnZWGniCn+8UwNdmsLUkfo7Eq3Z3zewRZ2zUy3Z/18jtBT2bW3osrlbfALIi1OJC31MMUAAAAASUVORK5CYII="}}]);