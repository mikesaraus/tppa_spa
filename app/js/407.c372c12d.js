"use strict";(self["webpackChunktppa_app"]=self["webpackChunktppa_app"]||[]).push([[407],{6407:(t,e,a)=>{a.r(e),a.d(e,{default:()=>Jt});var n=a(3673);const r=(0,n.Uk)(" Report "),o=(0,n.Uk)("Generate Transactions Report");function s(t,e,a,s,l,i){const d=(0,n.up)("q-icon"),p=(0,n.up)("q-item-label"),c=(0,n.up)("q-item-section"),u=(0,n.up)("q-item"),m=(0,n.up)("ReportCalendar"),h=(0,n.up)("q-list"),_=(0,n.up)("q-card"),f=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(f,{class:"flex full-width full-height"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{flat:"",class:"full-width row justify-center items-start q-pb-xl q-pt-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{class:"col full-width q-gutter-y-sm"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{class:"col text-center"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{class:"text-h4 text-primary"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{size:"lg",color:"primary",name:"archive"}),r])),_:1}),(0,n.Wm)(p,{caption:""},{default:(0,n.w5)((()=>[o])),_:1})])),_:1})])),_:1}),(0,n.Wm)(u,{class:"flex flex-center text-center"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{style:{"max-width":"95%",width:"500px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(m)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var l=a(2323);const i={class:"col full-width"},d={class:"row items-center justify-end q-gutter-x-sm"},p=(0,n.Uk)(" Clear all selected dates "),c=(0,n._)("br",null,null,-1),u=(0,n.Uk)(" Tip: When no date selected it will return all transactions. "),m=(0,n.Uk)("Report Settings"),h={key:0},_=(0,n.Uk)("Users"),f=(0,n.Uk)("Select User"),b=(0,n.Uk)("All Users"),w=(0,n.Uk)("Select Branch"),$=(0,n.Uk)("All Branch"),S=(0,n.Uk)("Cash Denomination"),E=(0,n.Uk)("Report Settings"),T={class:"row items-center no-wrap"},y=(0,n._)("div",{class:"text-center"},"Generate",-1),N=(0,n.Uk)("Machine Readable"),g=(0,n.Uk)(".txt"),C=(0,n.Uk)("Human Readable"),A=(0,n.Uk)(".rpt"),k={key:0},O=(0,n.Uk)(" Custom "),D=(0,n.Uk)("Per User"),W=(0,n.Uk)(" Readable "),v=(0,n.Uk)(".rpt"),R=(0,n.Uk)(" Report categories per-user "),L=(0,n.Uk)("User Per Branch"),M=(0,n.Uk)(" Readable "),Y=(0,n.Uk)(".rpt"),U=(0,n.Uk)(" Report per-user per-branch if user has multiple branch location "),x=(0,n.Uk)("Download All"),I=(0,n.Uk)("All available reports");function Z(t,e,a,r,o,s){const Z=(0,n.up)("q-icon"),P=(0,n.up)("q-badge"),H=(0,n.up)("q-tooltip"),q=(0,n.up)("q-btn"),j=(0,n.up)("q-item-label"),B=(0,n.up)("q-item-section"),Q=(0,n.up)("q-item"),F=(0,n.up)("q-separator"),z=(0,n.up)("q-list"),K=(0,n.up)("q-menu"),V=(0,n.up)("q-avatar"),G=(0,n.up)("q-btn-dropdown"),J=(0,n.up)("q-btn-group"),X=(0,n.up)("q-date"),tt=(0,n.up)("CashDenominationForm"),et=(0,n.up)("q-dialog"),at=(0,n.up)("q-card");return(0,n.wg)(),(0,n.j4)(at,{flat:""},{default:(0,n.w5)((()=>[(0,n.Wm)(z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{class:"text-center"},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{class:"row justify-center items-center"},{default:(0,n.w5)((()=>[(0,n._)("div",i,[(0,n.Wm)(X,{range:"",multiple:"","today-btn":"",color:"primary","years-in-month-view":"",events:t.cal_events,modelValue:t.trans_days,"onUpdate:modelValue":e[12]||(e[12]=e=>t.trans_days=e),"event-color":"primary",landscape:t.$q.screen.gt.sm,style:(0,l.j5)([{height:"500px","border-radius":"15px"},`width: ${t.$q.screen.gt.md?"50":t.$q.screen.gt.sm?"70":"100"}%`]),options:e=>e<=t.date.formatDate(new Date,"YYYY/MM/DD"),"navigation-min-year-month":t.nmin_ym,"navigation-max-year-month":t.nmax_ym},{default:(0,n.w5)((()=>[(0,n._)("div",d,[(0,n.Wm)(q,{flat:"",round:"",icon:"clear_all",color:"grey-6 hover-text-primary",onClick:e[0]||(e[0]=e=>t.trans_days=[])},{default:(0,n.w5)((()=>[(0,n.Wm)(H,{offset:[10,10],self:"center end",anchor:"center start",class:"bg-transparent text-right"},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Wm)(P,{class:"text-body2",color:"accent"},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{name:"highlight_off",size:"xs"}),p])),_:1}),c,(0,n.Wm)(P,{rounded:"",class:"shadow-3 text-caption",color:"primary"},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{name:"info",size:"xs"}),u])),_:1})])])),_:1})])),_:1}),(0,n.Wm)(q,{flat:"",round:"",size:"md",color:"grey-6",icon:"settings"},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{modelValue:t.custom_view_show,"onUpdate:modelValue":e[6]||(e[6]=e=>t.custom_view_show=e),"transition-duration":250,"transition-show":"jump-down","transition-hide":"jump-up",class:"text-grey-9"},{default:(0,n.w5)((()=>[(0,n.Wm)(z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(j,{header:""},{default:(0,n.w5)((()=>[m])),_:1}),t.$root.isTeller?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",h,[(0,n.Wm)(Q,{clickable:""},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{color:"primary",name:t.user_filter.length?"indeterminate_check_box":"check_box"},null,8,["name"])])),_:1}),(0,n.Wm)(B,null,{default:(0,n.w5)((()=>[(0,n.Wm)(j,null,{default:(0,n.w5)((()=>[_])),_:1})])),_:1}),(0,n.Wm)(K,{modelValue:t.custom_view_user_show,"onUpdate:modelValue":e[2]||(e[2]=e=>t.custom_view_user_show=e),anchor:"top end",self:"top start",class:"text-grey-9",style:{"min-width":"175px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(j,{header:""},{default:(0,n.w5)((()=>[f])),_:1}),(0,n.Wm)(Q,{clickable:"",onClick:e[1]||(e[1]=e=>t.user_filter=[])},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{color:t.user_filter.length?t.$root.app_settings.darkmode?"grey-8":"grey-5":"primary",name:t.user_filter.length?"check_box_outline_blank":"check_box"},null,8,["color","name"])])),_:1}),(0,n.Wm)(B,null,{default:(0,n.w5)((()=>[(0,n.Wm)(j,null,{default:(0,n.w5)((()=>[b])),_:1})])),_:1})])),_:1}),(0,n.Wm)(F,{inset:"item",style:{opacity:"0.25"},color:"grey-6"}),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(2==t.$root.accessLevel?t.branchmates:Object.keys(t.users),((e,a)=>((0,n.wg)(),(0,n.iD)("div",{key:e},[(0,n.Wm)(Q,{clickable:"",onClick:()=>{t.user_filter.indexOf(e)>=0?t.user_filter.splice(t.user_filter.indexOf(e),1):t.user_filter.push(e)}},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{color:t.user_filter.includes(e)?"primary":t.$root.app_settings.darkmode?"grey-8":"grey-5",name:t.user_filter.includes(e)?"check_box":"check_box_outline_blank"},null,8,["color","name"])])),_:2},1024),(0,n.Wm)(B,null,{default:(0,n.w5)((()=>[(0,n.Wm)(j,null,{default:(0,n.w5)((()=>[(0,n.Uk)("#"+(0,l.zw)(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),a+1<(2==t.$root.accessLevel?t.branchmates.length:Object.keys(t.users).length)?((0,n.wg)(),(0,n.j4)(F,{key:0,inset:"item",style:{opacity:"0.25"},color:"grey-6"})):(0,n.kq)("",!0)])))),128))])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,n.Wm)(F,{inset:"item",style:{opacity:"0.25"},color:"grey-6"}),(0,n.Wm)(Q,{clickable:""},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{color:t.$root.isLogin&&t.$root.accessLevel<2?"primary":t.$root.app_settings.darkmode?"grey-8":"grey-5",name:t.branch_filter.length?"indeterminate_check_box":"check_box"},null,8,["color","name"])])),_:1}),(0,n.Wm)(B,null,{default:(0,n.w5)((()=>[(0,n.Wm)(j,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.$root.isLogin&&t.$root.accessLevel>1?"This Branch":"Branches"),1)])),_:1}),t.$root.isLogin&&t.$root.accessLevel>1?((0,n.wg)(),(0,n.j4)(H,{key:0,anchor:"center right",self:"center left"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.getObj(t.authenticated,"data.branch_location")),1)])),_:1})):(0,n.kq)("",!0)])),_:1}),t.$root.isLogin&&t.$root.accessLevel<2?((0,n.wg)(),(0,n.j4)(K,{key:0,modelValue:t.custom_view_branch_show,"onUpdate:modelValue":e[4]||(e[4]=e=>t.custom_view_branch_show=e),anchor:"top end",self:"top start",class:"text-grey-9",style:{"min-width":"175px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(j,{header:""},{default:(0,n.w5)((()=>[w])),_:1}),(0,n.Wm)(Q,{clickable:"",onClick:e[3]||(e[3]=e=>t.branch_filter=[])},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{color:t.branch_filter.length?t.$root.app_settings.darkmode?"grey-8":"grey-5":"primary",name:t.branch_filter.length?"check_box_outline_blank":"check_box"},null,8,["color","name"])])),_:1}),(0,n.Wm)(B,null,{default:(0,n.w5)((()=>[(0,n.Wm)(j,null,{default:(0,n.w5)((()=>[$])),_:1})])),_:1})])),_:1}),(0,n.Wm)(F,{inset:"item",style:{opacity:"0.25"},color:"grey-6"}),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.branches,((e,a)=>((0,n.wg)(),(0,n.iD)("div",{key:e},[(0,n.Wm)(Q,{clickable:"",onClick:()=>{t.branch_filter.indexOf(e)>=0?t.branch_filter.splice(t.branch_filter.indexOf(e),1):t.branch_filter.push(e)}},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{color:t.branch_filter.includes(e)?"primary":t.$root.app_settings.darkmode?"grey-8":"grey-5",name:t.branch_filter.includes(e)?"check_box":"check_box_outline_blank"},null,8,["color","name"])])),_:2},1024),(0,n.Wm)(B,null,{default:(0,n.w5)((()=>[(0,n.Wm)(j,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),a+1<t.branches.length?((0,n.wg)(),(0,n.j4)(F,{key:0,inset:"item",style:{opacity:"0.25"},color:"grey-6"})):(0,n.kq)("",!0)])))),128))])),_:1})])),_:1},8,["modelValue"])):(0,n.kq)("",!0)])),_:1})])),(0,n.Wm)(F,{inset:"item",style:{opacity:"0.25"},color:"grey-6"}),(0,n.Wm)(Q,{clickable:"",onClick:e[5]||(e[5]=e=>t.with_denomination=!t.with_denomination)},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{name:"view_stream",color:t.with_denomination?"primary":t.$root.app_settings.darkmode?"grey-8":"grey-5"},null,8,["color"])])),_:1}),(0,n.Wm)(B,null,{default:(0,n.w5)((()=>[(0,n.Wm)(j,null,{default:(0,n.w5)((()=>[S])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(H,null,{default:(0,n.w5)((()=>[E])),_:1})])),_:1}),(0,n.Wm)(J,{rounded:"",unelevated:"",push:""},{default:(0,n.w5)((()=>[(0,n.Wm)(G,{split:"",rounded:"","auto-close":"",unelevated:"",color:"primary",disable:t.processing,onClick:t.fetchReport},{label:(0,n.w5)((()=>[(0,n._)("div",T,[(0,n.Wm)(Z,{left:"",name:"archive"}),y])])),default:(0,n.w5)((()=>[(0,n.Wm)(z,{padding:"",style:{width:"250px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(Q,{clickable:"",onClick:e[7]||(e[7]=e=>t.fetchReport(e,"systxt"))},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(V,{icon:"point_of_sale",color:"accent","text-color":"white"})])),_:1}),(0,n.Wm)(B,null,{default:(0,n.w5)((()=>[(0,n.Wm)(j,null,{default:(0,n.w5)((()=>[N])),_:1}),(0,n.Wm)(j,{caption:""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(`Report for ${t.distribution_comp}`),1)])),_:1})])),_:1}),(0,n.Wm)(B,{side:""},{default:(0,n.w5)((()=>[(0,n.Wm)(P,null,{default:(0,n.w5)((()=>[g])),_:1})])),_:1})])),_:1}),(0,n.Wm)(Q,{clickable:"",onClick:e[8]||(e[8]=e=>t.fetchReport(e,"rpt"))},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(V,{icon:"engineering",color:"accent","text-color":"white"})])),_:1}),(0,n.Wm)(B,null,{default:(0,n.w5)((()=>[(0,n.Wm)(j,null,{default:(0,n.w5)((()=>[C])),_:1}),(0,n.Wm)(j,{caption:""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(`For ${t.company.name_short}`),1)])),_:1})])),_:1}),(0,n.Wm)(B,{side:""},{default:(0,n.w5)((()=>[(0,n.Wm)(P,null,{default:(0,n.w5)((()=>[A])),_:1})])),_:1})])),_:1}),t.$root.isTeller?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",k,[(0,n.Wm)(F,{inset:"",class:"q-mt-sm"}),(0,n.Wm)(j,{header:"",class:"q-pb-xs"},{default:(0,n.w5)((()=>[O])),_:1}),(0,n.Wm)(Q,{clickable:"",onClick:e[9]||(e[9]=e=>t.fetchReport(e,"user_rpt"))},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(V,{icon:"groups",color:"teal","text-color":"white"})])),_:1}),(0,n.Wm)(B,null,{default:(0,n.w5)((()=>[(0,n.Wm)(j,null,{default:(0,n.w5)((()=>[D])),_:1}),(0,n.Wm)(j,{caption:""},{default:(0,n.w5)((()=>[W,(0,n.Wm)(P,null,{default:(0,n.w5)((()=>[v])),_:1})])),_:1})])),_:1}),(0,n.Wm)(B,{side:""},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{name:"info",color:"amber"},{default:(0,n.w5)((()=>[(0,n.Wm)(H,null,{default:(0,n.w5)((()=>[R])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(Q,{clickable:"",onClick:e[10]||(e[10]=e=>t.fetchReport(e,"user_branch_rpt"))},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(V,{icon:"privacy_tip",color:"teal","text-color":"white"})])),_:1}),(0,n.Wm)(B,null,{default:(0,n.w5)((()=>[(0,n.Wm)(j,null,{default:(0,n.w5)((()=>[L])),_:1}),(0,n.Wm)(j,{caption:""},{default:(0,n.w5)((()=>[M,(0,n.Wm)(P,null,{default:(0,n.w5)((()=>[Y])),_:1})])),_:1})])),_:1}),(0,n.Wm)(B,{side:""},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{name:"info",color:"amber"},{default:(0,n.w5)((()=>[(0,n.Wm)(H,null,{default:(0,n.w5)((()=>[U])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(F,{inset:"",class:"q-mt-sm q-mb-sm"}),(0,n.Wm)(Q,{clickable:"",onClick:e[11]||(e[11]=e=>t.fetchReport(e,"report_all"))},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(V,{icon:"download_for_offline",color:"accent","text-color":"white"})])),_:1}),(0,n.Wm)(B,null,{default:(0,n.w5)((()=>[(0,n.Wm)(j,null,{default:(0,n.w5)((()=>[x])),_:1}),(0,n.Wm)(j,{caption:""},{default:(0,n.w5)((()=>[(0,n.Wm)(P,{color:"accent"},{default:(0,n.w5)((()=>[I])),_:1})])),_:1})])),_:1})])),_:1})]))])),_:1})])),_:1},8,["disable","onClick"])])),_:1})])])),_:1},8,["events","modelValue","landscape","style","options","navigation-min-year-month","navigation-max-year-month"])])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(et,{modelValue:t.dialogCashSplit,"onUpdate:modelValue":e[15]||(e[15]=e=>t.dialogCashSplit=e),"transition-duration":100,"transition-show":"scale","transition-hide":"scale"},{default:(0,n.w5)((()=>[(0,n.Wm)(tt,{cash_match:t.total_cash_collection,onSave:t.saveInputsMoney,onClose:e[13]||(e[13]=()=>{t.dialogCashSplit=!1}),onCancel:e[14]||(e[14]=()=>{t.dialogCashSplit=!1})},null,8,["cash_match","onSave"])])),_:1},8,["modelValue"])])),_:1})}a(71);var P=a(5616),H=a(8825),q=a(2841),j=a(3317),B=a(3617),Q=a(6386),F=a(9063),z=a(8880);const K=(0,n.Uk)(" Cash Denomination "),V={class:"text-h6"},G=(0,n.Uk)(" Centavo "),J={class:"on-right"},X={class:"full-with"},tt=(0,n._)("div",{class:"text-h6 text-grey-6"},"C",-1),et={class:"text-caption"},at={key:0},nt={class:"text-h6"},rt=(0,n.Uk)(" Peso "),ot={class:"on-right"},st={class:"full-with"},lt=(0,n._)("div",{class:"text-h6 text-grey-6"},"P",-1),it={class:"text-caption"},dt={key:0},pt={class:"text-body2"},ct=(0,n.Uk)(" TOTAL "),ut=(0,n.Uk)(" PHP "),mt={key:0},ht=(0,n.Uk)(" Difference "),_t=(0,n.Uk)(" PHP ");function ft(t,e,a,r,o,s){const i=(0,n.up)("q-btn"),d=(0,n.up)("q-toolbar-title"),p=(0,n.up)("q-toolbar"),c=(0,n.up)("q-icon"),u=(0,n.up)("q-space"),m=(0,n.up)("q-item-label"),h=(0,n.up)("q-tooltip"),_=(0,n.up)("q-input"),f=(0,n.up)("q-item-section"),b=(0,n.up)("q-item"),w=(0,n.up)("q-slide-transition"),$=(0,n.up)("q-list"),S=(0,n.up)("q-scroll-area"),E=(0,n.up)("q-form"),T=(0,n.up)("q-card");return t.formIsOk?((0,n.wg)(),(0,n.j4)(T,{key:0,style:{width:"500px","max-width":"80vw","border-radius":"15px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{class:"bg-primary text-white"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{flat:"",round:"",ripple:"","no-caps":"",size:"md",icon:"view_stream",onClick:t.icon_click},null,8,["onClick"]),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[K,(0,n._)("small",null,"(P "+(0,l.zw)(t.formatMoney(t.cash_match))+")",1)])),_:1})])),_:1}),(0,n.Wm)(E,{autofocus:"",onSubmit:t.doSave,ref:t.form_conf.ref},{default:(0,n.w5)((()=>[(0,n.Wm)(S,{"thumb-style":t.$style.scrollarea.thumb,"bar-style":t.$style.scrollarea.bar,style:(0,l.j5)(`max-height: calc(100vh - 200px); height: calc(110px + (90px * ${(t.show_centavo?t.denominations.filter((t=>t<1)).length:0)+(t.show_peso?t.denominations.filter((t=>t>=1)).length:0)}))`)},{default:(0,n.w5)((()=>[(0,n.Wm)($,{class:"q-pt-md q-px-md q-gutter-y-xs"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{class:(0,l.C_)(["row items-center",t.$root.app_settings.darkmode?"text-grey-6":"text-grey-8"])},{default:(0,n.w5)((()=>[(0,n._)("span",V,[(0,n.Wm)(c,{name:"view_stream",size:"md",color:t.$root.app_settings.darkmode?"grey-9":"grey-3"},null,8,["color"]),G]),(0,n.Wm)(u),(0,n._)("span",J,[(0,n.Wm)(i,{flat:"",round:"",size:"md",color:"grey-6",icon:t.show_centavo?"visibility_off":"visibility",onClick:e[0]||(e[0]=e=>t.show_centavo=!t.show_centavo)},null,8,["icon"])])])),_:1},8,["class"]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.denominations.filter((t=>t<1)),(e=>((0,n.wg)(),(0,n.iD)("div",{key:e,class:"full-with"},[(0,n.Wm)(w,{duration:1e3,class:"full-with"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",X,[(0,n.Wm)(b,{class:"no-padding q-mx-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[t.local_inputs[e]?((0,n.wg)(),(0,n.j4)(_,{key:0,rounded:"",type:"number",standout:"bg-primary text-white",placeholder:t.genLabel(e),"input-class":`${t.form_conf.inputclass}`,modelValue:t.local_inputs[e].value,"onUpdate:modelValue":a=>t.local_inputs[e].value=a,rules:[e=>t.checker.input(!e||e&&Number(e)>=0&&!String(e).includes(".")||"",500)],onKeyup:t.modKey},{before:(0,n.w5)((()=>[tt])),prepend:(0,n.w5)((()=>[(0,n.Wm)(c,{size:"sm",name:"numbers"})])),append:(0,n.w5)((()=>[(0,n._)("div",et,[Number(t.local_inputs[e].value)>0?((0,n.wg)(),(0,n.iD)("span",at,[(0,n.Uk)(" piece"+(0,l.zw)(Number(t.local_inputs[e].value)>1?"s":"")+" of ",1),(0,n._)("b",null,(0,l.zw)(e>=1?e+" Peso"+(e>1?"s":""):100*e+" Centavo"+(100*e>1?"s":"")),1)])):(0,n.kq)("",!0)])])),after:(0,n.w5)((()=>[(0,n.Wm)(i,{flat:"",round:"",size:"md",icon:"remove",onClick:a=>Number(t.local_inputs[e].value)>1?t.local_inputs[e].value=Number(t.local_inputs[e].value)-1:t.local_inputs[e].value=""},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" -1 of "+(0,l.zw)(t.genLabel(e)),1)])),_:2},1024)])),_:2},1032,["onClick"]),(0,n.Wm)(i,{flat:"",round:"",size:"md",icon:"add",onClick:a=>t.local_inputs[e].value?t.local_inputs[e].value=Number(t.local_inputs[e].value)+1:t.local_inputs[e].value=1},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" +1 of "+(0,l.zw)(t.genLabel(e)),1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1032,["placeholder","input-class","modelValue","onUpdate:modelValue","rules","onKeyup"])):(0,n.kq)("",!0)])),_:2},1024)])),_:2},1024)],512),[[z.F8,t.show_centavo]])])),_:2},1024)])))),128)),(0,n.Wm)(m,{class:(0,l.C_)(["row items-center",t.$root.app_settings.darkmode?"text-grey-6":"text-grey-8"])},{default:(0,n.w5)((()=>[(0,n._)("span",nt,[(0,n.Wm)(c,{name:"view_stream",size:"md",color:t.$root.app_settings.darkmode?"grey-9":"grey-3"},null,8,["color"]),rt]),(0,n.Wm)(u),(0,n._)("span",ot,[(0,n.Wm)(i,{flat:"",round:"",size:"md",color:"grey-6",icon:t.show_peso?"visibility_off":"visibility",onClick:e[1]||(e[1]=e=>t.show_peso=!t.show_peso)},null,8,["icon"])])])),_:1},8,["class"]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.denominations.filter((t=>t>=1)),((e,a)=>((0,n.wg)(),(0,n.iD)("div",{key:e,class:"full-with"},[(0,n.Wm)(w,{duration:1e3,class:"full-with"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",st,[(0,n.Wm)(b,{class:"no-padding q-mx-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[t.local_inputs[e]?((0,n.wg)(),(0,n.j4)(_,{key:0,rounded:"",type:"number",autofocus:0===a,standout:"bg-primary text-white",placeholder:t.genLabel(e),"input-class":`${t.form_conf.inputclass}`,modelValue:t.local_inputs[e].value,"onUpdate:modelValue":a=>t.local_inputs[e].value=a,rules:[e=>t.checker.input(!e||e&&Number(e)>=0&&!String(e).includes(".")||"",500)],onKeyup:t.modKey},{before:(0,n.w5)((()=>[lt])),prepend:(0,n.w5)((()=>[(0,n.Wm)(c,{size:"sm",name:"numbers"})])),append:(0,n.w5)((()=>[(0,n._)("div",it,[Number(t.local_inputs[e].value)>0?((0,n.wg)(),(0,n.iD)("span",dt,[(0,n.Uk)(" piece"+(0,l.zw)(Number(t.local_inputs[e].value)>1?"s":"")+" of ",1),(0,n._)("b",null,(0,l.zw)(e>=1?e+" Peso"+(e>1?"s":""):100*e+" Centavo"+(100*e>1?"s":"")),1)])):(0,n.kq)("",!0)])])),after:(0,n.w5)((()=>[(0,n.Wm)(i,{flat:"",round:"",size:"md",icon:"remove",onClick:a=>Number(t.local_inputs[e].value)>1?t.local_inputs[e].value=Number(t.local_inputs[e].value)-1:t.local_inputs[e].value=""},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" -1 of "+(0,l.zw)(t.genLabel(e)),1)])),_:2},1024)])),_:2},1032,["onClick"]),(0,n.Wm)(i,{flat:"",round:"",size:"md",icon:"add",onClick:a=>t.local_inputs[e].value?t.local_inputs[e].value=Number(t.local_inputs[e].value)+1:t.local_inputs[e].value=1},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" +1 of "+(0,l.zw)(t.genLabel(e)),1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1032,["autofocus","placeholder","input-class","modelValue","onUpdate:modelValue","rules","onKeyup"])):(0,n.kq)("",!0)])),_:2},1024)])),_:2},1024)],512),[[z.F8,t.show_peso]])])),_:2},1024)])))),128))])),_:1})])),_:1},8,["thumb-style","bar-style","style"]),(0,n._)("div",{class:(0,l.C_)(["row q-gutter-x-sm items-center text-grey-6 q-pa-md",t.$root.app_settings.darkmode?"shadow-1-white":"shadow-1"])},[(0,n._)("div",pt,[ct,(0,n._)("span",{class:(0,l.C_)(["text-h6 text-weight-bold",t.total_denomination>t.cash_match?"text-red-9":0===t.missing_denomination?"text-primary":""])},(0,l.zw)(t.formatMoney(t.total_denomination)),3),ut,0!==t.missing_denomination?((0,n.wg)(),(0,n.iD)("div",mt,[ht,(0,n._)("span",{class:(0,l.C_)(0!==t.missing_denomination?"text-red-6":"text-primary")},(0,l.zw)((t.missing_denomination>0?"+":"")+t.formatMoney(t.missing_denomination)),3),_t])):(0,n.kq)("",!0)]),(0,n.Wm)(u),(0,n.Wm)(i,{flat:"",ripple:"",rounded:"",label:"Cancel",color:"grey-6",class:"hover-text-primary",onClick:t.doCancel},null,8,["onClick"]),(0,n.Wm)(i,{ripple:"",rounded:"",unelevated:"",label:"Save",color:"primary","icon-right":"done_all",disable:0!==t.missing_denomination,onClick:t.submitValidation},null,8,["disable","onClick"])],2)])),_:1},8,["onSubmit"])])),_:1})):(0,n.kq)("",!0)}const bt=(0,n.aZ)({name:"CashDenominationForm",emits:["save","cancel","close"],data(){return{$q:(0,H.Z)(),checker:Q.ZZ,formatMoney:Q.lb,local_inputs:{},form_conf:{ref:"cash_denomination_form",inputclass:"form_active_input"},formIsOk:!1,show_centavo:!1,show_peso:!0,denominations:[.01,.1,.25,.5,1,5,10,20,50,100,200,500,1e3]}},props:{icon_click:{},cash_denominations:{type:Array},cash_match:{type:Number}},computed:{...(0,B.rn)("user",["authenticated"]),total_denomination(){let t=0;return Object.keys(this.local_inputs).map((t=>(this.local_inputs[t].value||0)*Number(t))).forEach((e=>{t+=Number(e)})),t},missing_denomination(){return this.cash_match-this.total_denomination}},created(){this.cash_denominations&&(this.denominations=this.cash_denominations),this.denominations.forEach((t=>{this.local_inputs[t]={}})),this.formIsOk=this.cash_match>=0&&this.local_inputs&&Object.keys(this.local_inputs).length,this.formIsOk||this.$emit("close")},methods:{submitValidation(){const t=(0,Q.Sw)(this.$refs,`${this.form_conf.ref}`);t&&t.submit()},genLabel(t){return t>=1?t+" Peso"+(t>1?"s":""):100*t+" Centavo"+(100*t>1?"s":"")},async doSave(){this.total_denomination===this.cash_match&&this.$emit("save",this.local_inputs)},async doCancel(){this.$emit("cancel",this.local_inputs)},async modKey(t){switch(t.key){case"Enter":if(t.preventDefault(),t.ctrlKey&&t.shiftKey&&t.altKey);else if(t.altKey);else if(t.shiftKey)(0,Q.A_)(t,!1);else if(t.ctrlKey)this.submitValidation();else{const e=await(0,Q.A_)(t);e||this.$refs[this.form_conf.ref].submit()}break;default:break}}},beforeUnmount(){this.$emit("close")}});var wt=a(4260),$t=a(151),St=a(9570),Et=a(2165),Tt=a(3747),yt=a(5269),Nt=a(7704),gt=a(7011),Ct=a(2350),At=a(4554),kt=a(2025),Ot=a(2471),Dt=a(3414),Wt=a(2035),vt=a(4842),Rt=a(8870),Lt=a(7518),Mt=a.n(Lt);const Yt=(0,wt.Z)(bt,[["render",ft]]),Ut=Yt;Mt()(bt,"components",{QCard:$t.Z,QToolbar:St.Z,QBtn:Et.Z,QToolbarTitle:Tt.Z,QForm:yt.Z,QScrollArea:Nt.Z,QList:gt.Z,QItemLabel:Ct.Z,QIcon:At.Z,QSpace:kt.Z,QSlideTransition:Ot.Z,QItem:Dt.Z,QItemSection:Wt.Z,QInput:vt.Z,QTooltip:Rt.Z});const xt=(0,n.aZ)({name:"ReportCalendar",components:{CashDenominationForm:Ut},data(){return{$q:(0,H.Z)(),date:P.ZP,trans_days:[],nmin_ym:null,nmax_ym:null,cal_events:[],control_no:0,distribution_comp:"DLPC",report_file_type:"CLF",report_to_generate:"",fetchReport:null,report:[],total_cash_collection:0,report_strdates:[],cash_split:{},total_cash_split:0,dialogCashSplit:!1,download_ready:!0,with_denomination:!0,download_success:null,processing:!1,getObj:Q.Sw,branches:[],custom_view_show:!1,custom_view_user_show:!1,custom_view_branch_show:!1,branch_filter:[],user_filter:[]}},async created(){const t=new Date;this.nmin_ym="2000/01",this.nmax_ym=P.ZP.formatDate(t,"YYYY/MM"),this.control_no=P.ZP.formatDate(t,"DDDD").padStart(3,0),this.control_no+=String((0,Q.Sw)(this.authenticated,"data.userid","")).substring(0,3).padStart(3,0),this.cal_events.push(P.ZP.formatDate(t,"YYYY/MM/DD")),this.trans_days.push(P.ZP.formatDate(t,"YYYY/MM/DD")),(0,F.C_)().then((t=>this.branches=t)),this.fetchReport=(0,j.Z)(this.fetchReportNow,3e3),this.trans_days.length||this.trans_days.push({from:P.ZP.formatDate(t.setDate(t.getDate()-6),"YYYY/MM/DD"),to:P.ZP.formatDate(new Date,"YYYY/MM/DD")}),this.$root.isTeller?this.user_filter.push((0,Q.Sw)(this.authenticated,"data.userid")):2==this.$root.accessLevel&&this.branch_filter.push((0,Q.Sw)(this.authenticated,"data.branch_location"))},computed:{...(0,B.rn)("company",["company"]),...(0,B.Se)("user",["branchmates"]),...(0,B.rn)("user",["authenticated","users"])},methods:{...(0,B.nv)("transaction",["getAllTransactions"]),saveInputsMoney(t){this.total_cash_split=0,Object.keys(t).forEach((e=>{this.cash_split[e]=Number(t[e].value||0),this.total_cash_split+=Number(e||0)*Number(t[e].value||0)})),this.dialogCashSplit=!1,this.generateReports()},async generateReports(){if(this.with_denomination&&this.total_cash_split!==this.total_cash_collection)this.download_success=!1,this.$q.notify({message:`Error: Total cash of ${(0,Q.lb)(this.total_cash_collection)} did not match with ${(0,Q.lb)(this.total_cash_split)}`,color:"negative",icon:"info"});else{switch(this.$q.notify({message:`Generating reports for ${this.report_strdates.join(", ")}...`,timeout:1e3,color:"secondary",type:"ongoing"}),this.report_to_generate){case"systxt":this.formatReportTxt();break;case"rpt":this.formatReportRpt();break;case"user_rpt":this.formatReportUsersRpt();break;case"user_branch_rpt":this.formatReportUserBranchRpt();break;case"report_all":this.formatReportTxt(),this.formatReportRpt(),this.formatReportUsersRpt(),this.formatReportUserBranchRpt();break;default:this.formatReportTxt(),this.formatReportRpt();break}setTimeout((async()=>{this.download_ready=!0}),2e3)}},async fetchReportNow(t,e){this.processing=!0,this.report=[],this.total_cash_collection=0,this.total_cash_split=0;let a=[];!1!==this.download_success&&(this.cash_split={}),this.trans_days.forEach(((t,e)=>{a.push(`${(0,Q.JH)(t)&&t.from?t.from:t||""}${t.to?"::"+P.ZP.formatDate(new Date(t.to).setHours(24,0,0,0),"YYYY/MM/DD"):""}`)}));let n=[`date_paid=${a.join("||")}`];this.user_filter.length&&n.push(`receiver_id=${this.user_filter.join("||")}`),this.branch_filter.length&&n.push(`branch_location=${this.branch_filter.join("||")}`);const r=await this.getAllTransactions({query:n}),o=(0,Q.Sw)(r,"response.data.data");o&&o.length?(this.download_ready=!1,o.map((t=>"cash"==t.paymethod.toLowerCase()?Number(t.amount_paid||0)+Number(t.trans_fee||0):0)).forEach((t=>{this.total_cash_collection+=t})),this.report=o,this.report_to_generate=e,this.report_strdates=await this.joinDatesArrayObj(this.trans_days,this.report),this.with_denomination&&this.total_cash_collection>0?this.dialogCashSplit=!0:this.generateReports()):this.$q.notify({message:`No transaction for selected date${this.trans_days.length>1?"s":""}!`,color:"negative",icon:"info"}),setTimeout((async()=>{while(this.dialogCashSplit)await this.sleep();this.processing=!1}),3e3)},async formatReportTxt(){const t=this.report;if(t.length){const e=this.company,a=this.users,n=new Date;let r=0,o="H";o+=`${this.control_no}`.padStart(6,0),o+=`${e.name_short}`.padEnd(30," "),o+=`${P.ZP.formatDate(n,"YYYYMMDDHHmmss")}`.padEnd(14,"");let s=[];t.forEach(((t,e)=>{r+=Number(t.amount_paid);let n="D";n+=`${t.branch_location}`.padEnd(10," "),n+=`${a[t.receiver_id]?(0,Q.Sw)(a[t.receiver_id],"firstname","")+" "+(0,Q.Sw)(a[t.receiver_id],"lastname",""):t.receiver_id}`.padEnd(30," "),n+=`${P.ZP.formatDate(t.date_paid,"YYYYMMDD")}`.padEnd(8,"0"),n+=`${P.ZP.formatDate(t.date_paid,"HHmmss")}`.padEnd(6,"0"),n+=`${t.trans_id}`.padStart(10,"0"),n+=`${Number(t.amount_paid).toFixed(2)}`.padStart(16,"0"),n+=`${t.account_id}`.padStart(20," "),n+=`${t.account_name}`.toUpperCase().padEnd(50," "),n+=`${this.abbr_format(t.channel)}`.padEnd(2," "),n+=`${this.abbr_format(t.paymethod)}`.padEnd(2," "),n+=`${t.check_no||""}`.padEnd(10," "),n+=`${t.check_date?P.ZP.formatDate(t.check_date,"YYYYMMDD"):""}`.padEnd(8,t.check_date?"0":" "),n+=`${t.check_bank||""}`.padEnd(30," "),n+=`${t.check_type?this.abbr_format(t.check_type):""}`.padEnd(2," "),s.push(n)}));let l="T";l+=`${t.length}`.padStart(7,"0"),l+=`${Number(r).toFixed(2)}`.padStart(16,"0");const i=(new Array).concat(o,s,l);let d=this.generateReportFileName("TXT");return this.downloadReport(d,i.join("\n")),i}},async formatReportRpt(){const t=this.report;if(t.length){const e=this.company,a=(this.users,new Date),n=()=>"-".repeat(200);let r=n();r+="\n".repeat(3),r+=`${e.name}`.padEnd(200," "),r+="\n",r+=`BILLS PAYMENT SYSTEM - ${this.distribution_comp}`.padEnd(100," "),r+=`RUN DATE: ${P.ZP.formatDate(a,"MM/DD/YYYY")}`.padStart(100," "),r+="\n",r+="COLLECTION REPORT".padEnd(100," "),r+=`RUN TIME: ${P.ZP.formatDate(a,"HH:mm:ss").padEnd(10," ")}`.padStart(100," "),r+="\n";const o=this.report_strdates;r+=`TRANSACTION DATE${o.length>1?"S":""}: ${o.join(", ")}`,r+="\n";const{branches:s,receivers:l}=this.splitDetails(t);let i=[],d=0,p=0,c=0,u=0,m=0,h=0,_=0,f=0,b=0;s.forEach((e=>{let a=[];a.push(`\nBRANCH: ${e}\n`.padEnd(200," "));let r="SUBSCRIBER ID".padEnd(30," ");r+="CUSTOMER NAME".padEnd(50," "),r+="TRANS DATE".padEnd(20," "),r+="AMT  DUE".padStart(20," "),r+="CASH AMOUNT".padStart(20," "),r+="CHECK AMOUNT".padStart(20," "),r+="TOTAL AMT".padStart(20," "),r+="CHECK NO".padStart(20," "),a.push(`${r}`),a.push(`${n()}\n`);let o=0,s=0,l=0,w=0,$=0,S=0,E=0,T=0,y=0;t.filter((t=>t.branch_location==e)).forEach(((t,e)=>{let n=`${t.account_id}`.padEnd(30," ");n+=`${t.account_name}`.padEnd(50," "),n+=`${P.ZP.formatDate(t.date_paid,"MM/DD/YYYY")}`.padEnd(20," "),n+=`${t.amount_due?(0,Q.lb)(t.amount_due):""}`.padStart(20," "),n+=`${(0,Q.lb)(t.check_no?0:t.amount_paid)}`.padStart(20," "),n+=`${(0,Q.lb)(t.check_no?t.amount_paid:0)}`.padStart(20," "),n+=`${(0,Q.lb)(t.amount_paid)}`.padStart(20," "),n+=`${t.check_no?t.check_no:""}`.padStart(20," "),"cash"==t.paymethod.toLowerCase()?(o+=Number(t.amount_paid),w+=1,E+=Number(t.amount_paid)+Number(t.trans_fee)):t.check_no&&(s+=Number(t.amount_paid),T+=Number(t.amount_paid)+Number(t.trans_fee),$+=1),l+=Number(t.amount_paid),y+=Number(t.amount_paid)+Number(t.trans_fee),S++,a.push(`${n}`)})),c+=Number(l),b+=Number(y),d+=Number(o),_+=Number(E),f+=Number(T),p+=Number(s),h+=S,u+=w,m+=$,a.push(`\n${n()}`);let N=`Branch Total: ${e} (${S} Transactions)`.padEnd(120," ");N+=`${(0,Q.lb)(o)}`.padStart(20," "),N+=`${(0,Q.lb)(s)}`.padStart(20," "),N+=`${(0,Q.lb)(l)}`.padStart(20," "),a.push(N),a.push(`${n()}\n`),i.push(`${a.join("\n")}`)})),i.push(`${"\n".repeat(3)}`);let w=`Grand Total: ${o.join(", ")}`.padEnd(120," ");w+=`${(0,Q.lb)(d)}`.padStart(20," "),w+=`${(0,Q.lb)(p)}`.padStart(20," "),w+=`${(0,Q.lb)(c)}`.padStart(20," ");let $=(new Array).concat(n(),w,"\n".repeat(5),"=".repeat(200));$.push(`${" ".repeat(25)}${e.name}`.padEnd(100," ")),$.push(`${" ".repeat(25)}BILLS PAYMENT SYSTEM - ${this.distribution_comp}`.padEnd(100," ")+`RUN DATE: ${P.ZP.formatDate(a,"MM/DD/YYYY")}`.padStart(50," ").padEnd(25," ")),$.push(`${" ".repeat(25)}COLLECTION SUMMARY REPORT`.padEnd(100," ")+`RUN TIME: ${P.ZP.formatDate(a,"HH:mm:ss").padEnd(10," ")}`.padStart(50," ").padEnd(25," ")),$.push(`${" ".repeat(25)}TRANSACTION DATE${o.length>1?"S":""}: ${o.join(", ")}`),$.push("=".repeat(200)),$.push(""),$.push(`${" ".repeat(25)}TOTAL NO. OF BRANCHES`.padEnd(70,".")+":".padStart(15," ")+`${s.length}`.padStart(35," ")),$.push(`${" ".repeat(25)}TOTAL NO. OF TELLERS`.padEnd(70,".")+":".padStart(15," ")+`${l.length}`.padStart(35," ")),$.push(""),$.push(`${" ".repeat(25)}TOTAL CASH TRANSACTIONS`.padEnd(70,".")+":".padStart(15," ")+`${u}`.padStart(35," ")),$.push(`${" ".repeat(25)}TOTAL CASH AMOUNT`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(d)}`.padStart(35," ")),$.push(`${" ".repeat(25)}TOTAL CASH AMOUNT WITH TRANSACTION FEE`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(_)}`.padStart(35," ")),this.with_denomination&&Object.keys(this.cash_split).forEach((t=>{this.cash_split[t]&&$.push(`${" ".repeat(25)}* PHP ${t} x ${Number(this.cash_split[t]||0)}`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(Number(t||0)*Number(this.cash_split[t]||0))}`.padStart(35," "))})),$.push(""),$.push(`${" ".repeat(25)}TOTAL CHECK TRANSACTION`.padEnd(70,".")+":".padStart(15," ")+`${m}`.padStart(35," ")),$.push(`${" ".repeat(25)}TOTAL CHECK AMOUNT`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(p)}`.padStart(35," ")),$.push(`${" ".repeat(25)}TOTAL CHECK AMOUNT WITH TRANSACTION FEE`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(f)}`.padStart(35," ")),$.push(""),$.push(`${" ".repeat(25)}TOTAL NO. OF TRANSACTIONS`.padEnd(70,".")+":".padStart(15," ")+`${h}`.padStart(35," ")),$.push(`${" ".repeat(25)}TOTAL COLLECTION AMOUNT`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(c)}`.padStart(35," ")),$.push(`${" ".repeat(25)}TOTAL COLLECTION AMOUNT WITH TRANSACTION FEE`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(b)}`.padStart(35," ")),$.push(`${" ".repeat(25)}TOTAL COLLECTIONS TRANSACTION FEE`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(b-c)}`.padStart(35," ")),$.push("\n"),$.push(`${n()}`);const S=(new Array).concat(r,i,$);let E=this.generateReportFileName("RPT");return this.downloadReport(E,S.join("\n")),S}},async formatReportUsersRpt(){const t=this.report;if(t.length){const e=this.company,a=this.users,n=new Date,r=()=>"-".repeat(200);let o=r();o+="\n".repeat(3),o+=`${e.name}`.padEnd(200," "),o+="\n",o+=`BILLS PAYMENT SYSTEM - ${this.distribution_comp}`.padEnd(100," "),o+=`RUN DATE: ${P.ZP.formatDate(n,"MM/DD/YYYY")}`.padStart(100," "),o+="\n",o+="COLLECTION REPORT".padEnd(100," "),o+=`RUN TIME: ${P.ZP.formatDate(n,"HH:mm:ss").padEnd(10," ")}`.padStart(100," "),o+="\n";const s=this.report_strdates;o+=`TRANSACTION DATE${s.length>1?"S":""}: ${s.join(", ")}`,o+="\n";const{branches:l,receivers:i}=this.splitDetails(t);let d=[],p=0,c=0,u=0,m=0,h=0,_=0,f=0,b=0,w=0;i.forEach((e=>{let n=[];n.push(`RECEIVER ID: ${e}`.padEnd(160," ")+`BRANCH LOCATION: ${(0,Q.Sw)(a[e],"branch_location","")}`.padEnd(40," ")),n.push(`RECEIVER NAME: ${(0,Q.Sw)(a[e],"firstname","")} ${(0,Q.Sw)(a[e],"lastname","")}`.padEnd(160," ")+`LAST LOGIN: ${P.ZP.formatDate((0,Q.Sw)(a[e],"last_login"),"MM/DD/YYYY HH:mm:ss")||""}`.padEnd(40," ")),n.push("");let o="SUBSCRIBER ID".padEnd(30," ");o+="CUSTOMER NAME".padEnd(50," "),o+="TRANS DATE".padEnd(20," "),o+="AMT DUE".padStart(20," "),o+="CASH AMOUNT".padStart(20," "),o+="CHECK AMOUNT".padStart(20," "),o+="TOTAL AMT".padStart(20," "),o+="CHECK NO".padStart(20," "),n.push(`${o}`),n.push(`${r()}\n`);let s=0,l=0,i=0,$=0,S=0,E=0,T=0,y=0,N=0;t.filter((t=>t.receiver_id==e)).forEach(((t,e)=>{let a=`${t.account_id}`.padEnd(30," ");a+=`${t.account_name}`.padEnd(50," "),a+=`${P.ZP.formatDate(t.date_paid,"MM/DD/YYYY")}`.padEnd(20," "),a+=`${t.amount_due?(0,Q.lb)(t.amount_due):""}`.padStart(20," "),a+=`${(0,Q.lb)(t.check_no?0:t.amount_paid)}`.padStart(20," "),a+=`${(0,Q.lb)(t.check_no?t.amount_paid:0)}`.padStart(20," "),a+=`${(0,Q.lb)(t.amount_paid)}`.padStart(20," "),a+=`${t.check_no?t.check_no:""}`.padStart(20," "),"cash"==t.paymethod.toLowerCase()?(s+=Number(t.amount_paid),$+=1,T+=Number(t.amount_paid)+Number(t.trans_fee)):t.check_no&&(l+=Number(t.amount_paid),y+=Number(t.amount_paid)+Number(t.trans_fee),S+=1),i+=Number(t.amount_paid),N+=Number(t.amount_paid)+Number(t.trans_fee),E++,n.push(`${a}`)})),u+=Number(i),w+=Number(N),p+=Number(s),f+=Number(T),b+=Number(y),c+=Number(l),_+=E,m+=$,h+=S,n.push(`\n${r()}`);let g=`Receiver Total: ${e} (${E} Transactions)`.padEnd(120," ");g+=`${(0,Q.lb)(s)}`.padStart(20," "),g+=`${(0,Q.lb)(l)}`.padStart(20," "),g+=`${(0,Q.lb)(i)}`.padStart(20," "),n.push(g),n.push(`${r()}\n`),d.push(`\n${n.join("\n")}`)})),d.push(`${"\n".repeat(3)}`);let $=`Grand Total: ${s.join(", ")}`.padEnd(120," ");$+=`${(0,Q.lb)(p)}`.padStart(20," "),$+=`${(0,Q.lb)(c)}`.padStart(20," "),$+=`${(0,Q.lb)(u)}`.padStart(20," ");let S=(new Array).concat(r(),$,"\n".repeat(5),"=".repeat(200));S.push(`${" ".repeat(25)}${e.name}`.padEnd(100," ")),S.push(`${" ".repeat(25)}BILLS PAYMENT SYSTEM - ${this.distribution_comp}`.padEnd(100," ")+`RUN DATE: ${P.ZP.formatDate(n,"MM/DD/YYYY")}`.padStart(50," ").padEnd(25," ")),S.push(`${" ".repeat(25)}COLLECTION SUMMARY REPORT`.padEnd(100," ")+`RUN TIME: ${P.ZP.formatDate(n,"HH:mm:ss").padEnd(10," ")}`.padStart(50," ").padEnd(25," ")),S.push(`${" ".repeat(25)}TRANSACTION DATE${s.length>1?"S":""}: ${s.join(", ")}`),S.push("=".repeat(200)),S.push(""),S.push(`${" ".repeat(25)}TOTAL NO. OF BRANCHES`.padEnd(70,".")+":".padStart(15," ")+`${l.length}`.padStart(35," ")),S.push(`${" ".repeat(25)}TOTAL NO. OF TELLERS`.padEnd(70,".")+":".padStart(15," ")+`${i.length}`.padStart(35," ")),S.push(""),S.push(`${" ".repeat(25)}TOTAL CASH TRANSACTIONS`.padEnd(70,".")+":".padStart(15," ")+`${m}`.padStart(35," ")),S.push(`${" ".repeat(25)}TOTAL CASH AMOUNT`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(p)}`.padStart(35," ")),S.push(`${" ".repeat(25)}TOTAL CASH AMOUNT WITH TRANSACTION FEE`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(f)}`.padStart(35," ")),this.with_denomination&&Object.keys(this.cash_split).forEach((t=>{this.cash_split[t]&&S.push(`${" ".repeat(25)}* PHP ${t} x ${Number(this.cash_split[t]||0)}`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(Number(t||0)*Number(this.cash_split[t]||0))}`.padStart(35," "))})),S.push(""),S.push(`${" ".repeat(25)}TOTAL CHECK TRANSACTION`.padEnd(70,".")+":".padStart(15," ")+`${h}`.padStart(35," ")),S.push(`${" ".repeat(25)}TOTAL CHECK AMOUNT`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(c)}`.padStart(35," ")),S.push(`${" ".repeat(25)}TOTAL CHECK AMOUNT WITH TRANSACTION FEE`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(b)}`.padStart(35," ")),S.push(""),S.push(`${" ".repeat(25)}TOTAL NO. OF TRANSACTIONS`.padEnd(70,".")+":".padStart(15," ")+`${_}`.padStart(35," ")),S.push(`${" ".repeat(25)}TOTAL COLLECTION AMOUNT`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(u)}`.padStart(35," ")),S.push(`${" ".repeat(25)}TOTAL COLLECTION AMOUNT WITH TRANSACTION FEE`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(w)}`.padStart(35," ")),S.push(`${" ".repeat(25)}TOTAL COLLECTIONS TRANSACTION FEE`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(w-u)}`.padStart(35," ")),S.push("\n"),S.push(`${r()}`);const E=(new Array).concat(o,d,S);let T=`${this.generateReportFileName()}_USERS.RPT`;return this.downloadReport(T,E.join("\n")),E}},async formatReportUserBranchRpt(){const t=this.report;if(t.length){const e=this.company,a=this.users,n=new Date,r=()=>"-".repeat(200);let o=r();o+="\n".repeat(3),o+=`${e.name}`.padEnd(200," "),o+="\n",o+=`BILLS PAYMENT SYSTEM - ${this.distribution_comp}`.padEnd(100," "),o+=`RUN DATE: ${P.ZP.formatDate(n,"MM/DD/YYYY")}`.padStart(100," "),o+="\n",o+="COLLECTION REPORT".padEnd(100," "),o+=`RUN TIME: ${P.ZP.formatDate(n,"HH:mm:ss").padEnd(10," ")}`.padStart(100," "),o+="\n";const s=this.report_strdates;o+=`TRANSACTION DATE${s.length>1?"S":""}: ${s.join(", ")}`,o+="\n";const{branches:l,receivers:i}=this.splitDetails(t);let d=[],p=0,c=0,u=0,m=0,h=0,_=0,f=0,b=0,w=0;i.forEach((e=>{let n=[];const o=this.splitDetails(t.filter((t=>t.receiver_id==e)));n.push(`${"=".repeat(200)}`),n.push(`RECEIVER ID: ${e}`.padEnd(160," ")+`BRANCH LOCATION: ${(0,Q.Sw)(a[e],"branch_location","")}`.padEnd(40," ")),n.push(`RECEIVER NAME: ${(0,Q.Sw)(a[e],"firstname","")} ${(0,Q.Sw)(a[e],"lastname","")}`.padEnd(160," ")+`LAST LOGIN: ${P.ZP.formatDate((0,Q.Sw)(a[e],"last_login"),"MM/DD/YYYY HH:mm:ss")||""}`.padEnd(40," "));let s=0,l=0,i=0,$=0,S=0,E=0,T=0,y=0,N=0,g=0;const C=o.branches;C.forEach((a=>{let o=[];o.push(`\nBRANCH: ${a}\n`.padEnd(200," "));let d="SUBSCRIBER ID".padEnd(30," ");d+="CUSTOMER NAME".padEnd(50," "),d+="TRANS DATE".padEnd(20," "),d+="AMT  DUE".padStart(20," "),d+="CASH AMOUNT".padStart(20," "),d+="CHECK AMOUNT".padStart(20," "),d+="TOTAL AMT".padStart(20," "),d+="CHECK NO".padStart(20," "),o.push(`${d}`),o.push(`${r()}\n`);let p=0,c=0,u=0,m=0,h=0,_=0,f=0,b=0,w=0;t.filter((t=>t.branch_location==a&&t.receiver_id==e)).forEach(((t,e)=>{let a=`${t.account_id}`.padEnd(30," ");a+=`${t.account_name}`.padEnd(50," "),a+=`${P.ZP.formatDate(t.date_paid,"MM/DD/YYYY")}`.padEnd(20," "),a+=`${t.amount_due?(0,Q.lb)(t.amount_due):""}`.padStart(20," "),a+=`${(0,Q.lb)(t.check_no?0:t.amount_paid)}`.padStart(20," "),a+=`${(0,Q.lb)(t.check_no?t.amount_paid:0)}`.padStart(20," "),a+=`${(0,Q.lb)(t.amount_paid)}`.padStart(20," "),a+=`${t.check_no?t.check_no:""}`.padStart(20," "),"cash"==t.paymethod.toLowerCase()?(p+=Number(t.amount_paid),f+=Number(t.amount_paid)+Number(t.trans_fee),m+=1):t.check_no&&(c+=Number(t.amount_paid),b+=Number(t.amount_paid)+Number(t.trans_fee),h+=1),u+=Number(t.amount_paid),w+=Number(t.amount_paid)+Number(t.trans_fee),_++,o.push(`${a}`)})),T++,i+=Number(u),g+=Number(w),s+=Number(p),y+=Number(f),N+=Number(b),l+=Number(c),$+=Number(m),S+=Number(h),E+=Number(_),o.push(`\n${r()}`);let C=`Branch Total: (${_} Transactions)`.padEnd(120," ");C+=`${(0,Q.lb)(p)}`.padStart(20," "),C+=`${(0,Q.lb)(c)}`.padStart(20," "),C+=`${(0,Q.lb)(u)}`.padStart(20," "),o.push(`${C}`),o.push(`${r()}\n`),n.push(`${o.join("\n")}`)}));let A=`Receiver Total: ${e} (${T} Branch${T>1?"es":""} ${E} Transaction${E>1?"s":""})`.padEnd(120," ");A+=`${(0,Q.lb)(s)}`.padStart(20," "),A+=`${(0,Q.lb)(l)}`.padStart(20," "),A+=`${(0,Q.lb)(i)}`.padStart(20," "),n.push(A),n.push(`${"=".repeat(200)}\n`),n.push(`${"\n".repeat(3)}`),u+=Number(i),w+=Number(g),p+=Number(s),f+=Number(y),b+=Number(N),c+=Number(l),_+=E,m+=$,h+=S,d.push(n.join("\n"))}));let $=`Grand Total: ${s.join(", ")}`.padEnd(120," ");$+=`${(0,Q.lb)(p)}`.padStart(20," "),$+=`${(0,Q.lb)(c)}`.padStart(20," "),$+=`${(0,Q.lb)(u)}`.padStart(20," ");let S=(new Array).concat(r(),$,"\n".repeat(5),"=".repeat(200));S.push(`${" ".repeat(25)}${e.name}`.padEnd(100," ")),S.push(`${" ".repeat(25)}BILLS PAYMENT SYSTEM - ${this.distribution_comp}`.padEnd(100," ")+`RUN DATE: ${P.ZP.formatDate(n,"MM/DD/YYYY")}`.padStart(50," ").padEnd(25," ")),S.push(`${" ".repeat(25)}COLLECTION SUMMARY REPORT`.padEnd(100," ")+`RUN TIME: ${P.ZP.formatDate(n,"HH:mm:ss").padEnd(10," ")}`.padStart(50," ").padEnd(25," ")),S.push(`${" ".repeat(25)}TRANSACTION DATE${s.length>1?"S":""}: ${s.join(", ")}`),S.push("=".repeat(200)),S.push(""),S.push(`${" ".repeat(25)}TOTAL NO. OF BRANCHES`.padEnd(70,".")+":".padStart(15," ")+`${l.length}`.padStart(35," ")),S.push(`${" ".repeat(25)}TOTAL NO. OF TELLERS`.padEnd(70,".")+":".padStart(15," ")+`${i.length}`.padStart(35," ")),S.push(""),S.push(`${" ".repeat(25)}TOTAL CASH TRANSACTIONS`.padEnd(70,".")+":".padStart(15," ")+`${m}`.padStart(35," ")),S.push(`${" ".repeat(25)}TOTAL CASH AMOUNT`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(p)}`.padStart(35," ")),S.push(`${" ".repeat(25)}TOTAL CASH AMOUNT WITH TRANSACTION FEE`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(f)}`.padStart(35," ")),this.with_denomination&&Object.keys(this.cash_split).forEach((t=>{this.cash_split[t]&&S.push(`${" ".repeat(25)}* PHP ${t} x ${Number(this.cash_split[t]||0)}`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(Number(t||0)*Number(this.cash_split[t]||0))}`.padStart(35," "))})),S.push(""),S.push(`${" ".repeat(25)}TOTAL CHECK TRANSACTION`.padEnd(70,".")+":".padStart(15," ")+`${h}`.padStart(35," ")),S.push(`${" ".repeat(25)}TOTAL CHECK AMOUNT`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(c)}`.padStart(35," ")),S.push(`${" ".repeat(25)}TOTAL CHECK AMOUNT WITH TRANSACTION FEE`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(b)}`.padStart(35," ")),S.push(""),S.push(`${" ".repeat(25)}TOTAL NO. OF TRANSACTIONS`.padEnd(70,".")+":".padStart(15," ")+`${_}`.padStart(35," ")),S.push(`${" ".repeat(25)}TOTAL COLLECTION AMOUNT`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(u)}`.padStart(35," ")),S.push(`${" ".repeat(25)}TOTAL COLLECTION AMOUNT WITH TRANSACTION FEE`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(w)}`.padStart(35," ")),S.push(`${" ".repeat(25)}TOTAL COLLECTIONS TRANSACTION FEE`.padEnd(70,".")+":".padStart(15," ")+`${(0,Q.lb)(w-u)}`.padStart(35," ")),S.push(`\n${r()}`);const E=(new Array).concat(o,d,S);let T=`${this.generateReportFileName()}_DETAILED.RPT`;return this.downloadReport(T,E.join("\n")),E}},abbr_format(t){const e=["OverTheCounter","Internet","ATM","Mobile","Phone"],a=["OT","IB","AT","MB","PB"],n=["Cash","Check","Debit"],r=["CS","CK","DR"],o=["Local","Regional","On Us","Check"],s=["LO","RE","OU","MC"],l=(new Array).concat(e,n,o),i=(new Array).concat(a,r,s);return i[l.indexOf(t)]||""},ducodes(t){const e=["VEC","DLP","CLP","SEZ","MEZ","BEZ","LEZ"],a=["VECO","DLPC","CLPC","SEZC","MEZC","BEZC","LEZC"],n=["Visayan Electric Company","Davao Light and Power Company","Cotabato Light and Power Company","Subic Enerzone Corporation","Mactan Enerzone Corporation","Balamban Enerzone Corporation","Lima Enerzone Corporation"];let r=a.indexOf(t);return-1===r&&(r=n.indexOf(t)),e[r]||""},generateReportFileName(t){let e=`${this.company.name_abbr}`;return e+=`${this.ducodes(this.distribution_comp)}`,e+=`${this.control_no}`.padStart(6,"0"),e+=`${P.ZP.formatDate(new Date,"YYYYMMDD")}`.padEnd(8,"0"),e+=`${this.report_file_type}`,t&&(e+=`.${t}`),`${e}`},splitDetails(t){let e=[],a=[],n=[];return Array.isArray(t)&&t.forEach((t=>{(0,Q.Sw)(t,"branch_location")&&-1===e.indexOf(t.branch_location)&&e.push(t.branch_location),(0,Q.Sw)(t,"receiver_id")&&-1===a.indexOf(t.receiver_id)&&a.push(t.receiver_id),(0,Q.Sw)(t,"date_paid")&&-1===n.indexOf(t.date_paid)&&n.push(t.date_paid)})),{branches:e,receivers:a,dates:n}},async getDateRange(t){let e=[];t.forEach((t=>{t.date_paid&&e.push(new Date(t.date_paid))}));const a=P.ZP.getMinDate(...e),n=P.ZP.getMaxDate(...e);return[`${P.ZP.formatDate(a,"MM/DD/YYYY")} - ${P.ZP.formatDate(n,"MM/DD/YYYY")}`]},async joinDatesArrayObj(t,e){let a=[];return Array.isArray(t)&&t.forEach((t=>{(0,Q.JH)(t)?a.push(`${P.ZP.formatDate(t.from,"MM/DD/YYYY")} to ${P.ZP.formatDate(t.to,"MM/DD/YYYY")}`):a.push(P.ZP.formatDate(t,"MM/DD/YYYY"))})),a=a.length?a:await this.getDateRange(e),a},async downloadReport(t,e){while(!this.download_ready)await this.sleep();const a=(0,q.Z)(`${t}`,e,{mimeType:"text/plain;charset=UTF-8"});!0!==a?this.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"}):this.download_success=!0},sleep(t=1e3){return new Promise((function(e,a){setTimeout(e,t)}))}}});var It=a(5626),Zt=a(9721),Pt=a(811),Ht=a(5869),qt=a(6375),jt=a(2226),Bt=a(5096),Qt=a(6778);const Ft=(0,wt.Z)(xt,[["render",Z]]),zt=Ft;Mt()(xt,"components",{QCard:$t.Z,QList:gt.Z,QItem:Dt.Z,QItemSection:Wt.Z,QDate:It.Z,QBtn:Et.Z,QTooltip:Rt.Z,QBadge:Zt.Z,QIcon:At.Z,QMenu:Pt.Z,QItemLabel:Ct.Z,QSeparator:Ht.Z,QBtnGroup:qt.Z,QBtnDropdown:jt.Z,QAvatar:Bt.Z,QDialog:Qt.Z});const Kt=(0,n.aZ)({name:"Report",components:{ReportCalendar:zt},data(){return{}},async created(){this.$root.setMeta({title:"Reports"})}});var Vt=a(4379);const Gt=(0,wt.Z)(Kt,[["render",s]]),Jt=Gt;Mt()(Kt,"components",{QPage:Vt.Z,QCard:$t.Z,QList:gt.Z,QItem:Dt.Z,QItemSection:Wt.Z,QItemLabel:Ct.Z,QIcon:At.Z})}}]);